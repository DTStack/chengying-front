"use strict";(self.webpackChunkdt_em_front=self.webpackChunkdt_em_front||[]).push([[8017],{8017:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se});var a,r=n(1068),l=n.n(r),c=n(86902),i=n.n(c),o=n(14310),s=n.n(o),u=n(20116),m=n.n(u),d=n(34074),p=n.n(d),f=n(78914),v=n.n(f),g=n(39649),y=n.n(g),Z=n(20368),h=n.n(Z),E=n(63978),S=n.n(E),_=n(73126),C=n(68420),N=n(27344),b=n(5281),K=n(84441),A=n(3020),L=n(3362),k=n(44845),w=n(77766),O=n.n(w),x=n(2991),H=n.n(x),P=n(78580),M=n.n(P),Y=n(41511),j=n.n(Y),D=n(67294),G=n(29027),z=n(99210),B=n(97183),F=n(24105),I=n(69035),R=n(45360),$=n(11382),q=n(67908),J=n(31097),Q=n(4107),T=n(14277),U=n(19528),V=n(30381),W=n.n(V),X=n(36808);function ee(e,t){var n=i()(e);if(s()){var a=s()(e);t&&(a=m()(a).call(a,(function(t){return p()(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n,a,r=null!=arguments[t]?arguments[t]:{};t%2?v()(n=ee(Object(r),!0)).call(n,(function(t){(0,k.Z)(e,t,r[t])})):y()?h()(e,y()(r)):v()(a=ee(Object(r))).call(a,(function(t){S()(e,t,p()(r,t))}))}return e}function ne(e){var t=function(){if("undefined"==typeof Reflect||!l())return!1;if(l().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(l()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,L.Z)(e);if(t){var r=(0,L.Z)(this).constructor;n=l()(a,arguments,r)}else n=a.apply(this,arguments);return(0,A.Z)(this,n)}}var ae=z.Z.SubMenu,re=B.Z.Content,le=B.Z.Sider,ce=F.Z.Panel,ie=I.Z.Item,oe={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},se=(0,G.$j)((function(e){return{HeaderStore:e.HeaderStore}}),void 0)(a=function(e){(0,K.Z)(n,e);var t=ne(n);function n(){var e,a;(0,C.Z)(this,n);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return a=t.call.apply(t,O()(e=[this]).call(e,l)),(0,k.Z)((0,b.Z)(a),"state",{menuOpenKey:[""],menuSelectKey:[""],collapseActiveKey:"redis",menuList:[],serviceList:[],serviceLoading:!1,menuLoading:!1}),(0,k.Z)((0,b.Z)(a),"getAlertGroup",(function(){var e=a.props.HeaderStore,t={limit:0,parentProductName:"选择产品"!=(null==e?void 0:e.cur_parent_product)?null==e?void 0:e.cur_parent_product:X.get("em_current_parent_product")};a.setState({menuLoading:!0}),U.ll.getConfigAlertGroups(t).then((function(e){a.setState({menuLoading:!1});var t=e.data,n=t.code,r=t.msg,l=t.data,c=l.count,i=l.list,o=void 0===i?[]:i;if(0===n){var s={menuList:o};if(c){var u,m=o[0],d=m.product_name,p=m.groups,f=void 0===p?[]:p;s.menuOpenKey=[d],s.menuSelectKey=[O()(u="".concat(d,"_")).call(u,f[0])],a.getConfigAlertaction(d,f[0])}a.setState(te({},s))}else R.Z.error(r)}))})),(0,k.Z)((0,b.Z)(a),"getConfigAlertaction",(function(e,t){var n={limit:0,parentProductName:a.props.HeaderStore.cur_parent_product,ProductName:e,group:t};a.setState({serviceLoading:!0}),U.ll.getConfigAlertaction(n).then((function(e){a.setState({serviceLoading:!1});var t=e.data,n=t.code,r=t.msg,l=t.data.list,c=void 0===l?[]:l;if(0===n){var i=c[0]||{};a.setState({serviceList:c,collapseActiveKey:i.service_name})}else R.Z.error(r)}))})),(0,k.Z)((0,b.Z)(a),"handleServiceChange",(function(e){var t=e.key.split("_");a.setState({menuSelectKey:[e.key]}),a.getConfigAlertaction(t[0],t[1])})),(0,k.Z)((0,b.Z)(a),"handleCollapseChange",(function(e){a.setState({collapseActiveKey:e})})),a}return(0,N.Z)(n,[{key:"componentDidMount",value:function(){this.getAlertGroup()}},{key:"render",value:function(){var e=this,t=this.state,n=t.menuList,a=void 0===n?[]:n,r=t.serviceList,l=void 0===r?[]:r,c=t.menuLoading,i=t.serviceLoading,o=t.menuOpenKey,s=t.menuSelectKey,u=t.collapseActiveKey;return D.createElement(B.Z,null,D.createElement(re,{className:"config-page"},D.createElement($.Z,{spinning:c},a.length?D.createElement(B.Z,{className:"config-content box-shadow-style"},D.createElement(le,{className:"config-sider",width:250},D.createElement(z.Z,{className:"dt-em-menu",mode:"inline",openKeys:o,selectedKeys:s,onOpenChange:function(t){return e.setState({menuOpenKey:t})},onClick:this.handleServiceChange},H()(a).call(a,(function(e){var t;return D.createElement(ae,{key:e.product_name,title:D.createElement("div",{className:"submenu-title-style"},D.createElement("span",null,e.product_name),D.createElement(q.Z,{type:"down",className:M()(o).call(o,e.product_name)?"up":""}))},j()(e.groups)&&H()(t=e.groups).call(t,(function(t){var n;return D.createElement(z.Z.Item,{key:O()(n="".concat(e.product_name,"_")).call(n,t)},t)})))})))),D.createElement(re,null,D.createElement($.Z,{spinning:i},D.createElement(F.Z,{activeKey:u,bordered:!1,onChange:this.handleCollapseChange},H()(l).call(l,(function(e){var t=e.service_name,n=e.alteration,a=void 0===n?[]:n;return D.createElement(ce,{key:t,header:t},D.createElement(I.Z,null,H()(a).call(a,(function(e){var t=D.createElement(D.Fragment,null,e.isnew&&D.createElement("i",{className:"emicon emicon-new icon-style"}),e.config.length>20?D.createElement(J.Z,{title:e.config},D.createElement("span",{className:"text-ellipsis label"},e.config)):D.createElement("span",null,e.config));return D.createElement(ie,(0,_.Z)({},oe,{label:t,key:e.config}),e.current.length>44?D.createElement(J.Z,{title:e.current},D.createElement(Q.Z,{className:"text-ellipsis input",value:e.current,disabled:!0,addonAfter:D.createElement("i",{className:"emicon emicon-undo",style:{fontSize:14}}),style:{width:400}})):D.createElement(Q.Z,{value:e.current,disabled:!0,addonAfter:D.createElement("i",{className:"emicon emicon-undo",style:{fontSize:14}}),style:{width:400}}),D.createElement(J.Z,{title:D.createElement(D.Fragment,null,D.createElement("p",null,"最近修改时间：",W()(e.updated).format("YYYY-MM-DD HH:mm:ss")),D.createElement("p",null,"默认值：",e.default))},D.createElement("i",{className:"emicon emicon-revise icon-style"})))}))))})))))):D.createElement(T.Z,{className:"config-empty box-shadow-style",description:"暂无数据变更"}))))}}]),n}(D.PureComponent))||a}}]);