(self.webpackChunkdt_em_front=self.webpackChunkdt_em_front||[]).push([[2646],{47644:(e,t,o)=>{var i=o(70492),r=o(33051);o(12906),o(25787),o(74026);var n=o(69274),a=o(23509),l=o(22528);i.registerVisual(r.curry(n,"sunburst")),i.registerLayout(r.curry(a,"sunburst")),i.registerProcessor(r.curry(l,"sunburst"))},54313:(e,t,o)=>{var i=o(33051),r=o(51177),n="none",a="ancestor",l="self";function s(e,t,o){r.Group.call(this);var i=new r.Sector({z2:2});i.seriesIndex=t.seriesIndex;var n=new r.Text({z2:4,silent:e.getModel("label").get("silent")});function a(){n.ignore=n.hoverIgnore}function l(){n.ignore=n.normalIgnore}this.add(i),this.add(n),this.updateData(!0,e,"normal",t,o),this.on("emphasis",a).on("normal",l).on("mouseover",a).on("mouseout",l)}var d=s.prototype;d.updateData=function(e,t,o,n,a){this.node=t,t.piece=this,n=n||this._seriesModel,a=a||this._ecModel;var l=this.childAt(0);l.dataIndex=t.dataIndex;var s=t.getModel(),d=t.getLayout(),h=i.extend({},d);h.label=null;var u=function(e,t,o){var r=e.getVisual("color"),n=e.getVisual("visualMeta");n&&0!==n.length||(r=null);var a=e.getModel("itemStyle").get("color");if(a)return a;if(r)return r;if(0===e.depth)return o.option.color[0];var l=o.option.color.length;a=o.option.color[function(e){var t=e;for(;t.depth>1;)t=t.parentNode;var o=e.getAncestors()[0];return i.indexOf(o.children,t)}(e)%l];return a}(t,0,a);!function(e,t,o){t.getData().setItemVisual(e.dataIndex,"color",o)}(t,n,u);var c,p=s.getModel("itemStyle").getItemStyle();if("normal"===o)c=p;else{var g=s.getModel(o+".itemStyle").getItemStyle();c=i.merge(g,p)}c=i.defaults({lineJoin:"bevel",fill:c.fill||u},c),e?(l.setShape(h),l.shape.r=d.r0,r.updateProps(l,{shape:{r:d.r}},n,t.dataIndex),l.useStyle(c)):"object"==typeof c.fill&&c.fill.type||"object"==typeof l.style.fill&&l.style.fill.type?(r.updateProps(l,{shape:h},n),l.useStyle(c)):r.updateProps(l,{shape:h,style:c},n),this._updateLabel(n,u,o);var f=s.getShallow("cursor");if(f&&l.attr("cursor",f),e){var v=n.getShallow("highlightPolicy");this._initEvents(l,t,n,v)}this._seriesModel=n||this._seriesModel,this._ecModel=a||this._ecModel,r.setHoverStyle(this)},d.onEmphasis=function(e){var t=this;this.node.hostTree.root.eachNode((function(o){var i,r,s;o.piece&&(t.node===o?o.piece.updateData(!1,o,"emphasis"):(i=o,r=t.node,(s=e)!==n&&(s===l?i===r:s===a?i===r||i.isAncestorOf(r):i===r||i.isDescendantOf(r))?o.piece.childAt(0).trigger("highlight"):e!==n&&o.piece.childAt(0).trigger("downplay")))}))},d.onNormal=function(){this.node.hostTree.root.eachNode((function(e){e.piece&&e.piece.updateData(!1,e,"normal")}))},d.onHighlight=function(){this.updateData(!1,this.node,"highlight")},d.onDownplay=function(){this.updateData(!1,this.node,"downplay")},d._updateLabel=function(e,t,o){var n=this.node.getModel(),a=n.getModel("label"),l="normal"===o||"emphasis"===o?a:n.getModel(o+".label"),s=n.getModel("emphasis.label"),d=l.get("formatter")?o:"normal",h=i.retrieve(e.getFormattedLabel(this.node.dataIndex,d,null,null,"label"),this.node.name);!1===S("show")&&(h="");var u=this.node.getLayout(),c=l.get("minAngle");null==c&&(c=a.get("minAngle")),c=c/180*Math.PI;var p=u.endAngle-u.startAngle;null!=c&&Math.abs(p)<c&&(h="");var g=this.childAt(1);r.setLabelStyle(g.style,g.hoverStyle||{},a,s,{defaultText:l.getShallow("show")?h:null,autoColor:t,useInsideStyle:!0});var f,v=(u.startAngle+u.endAngle)/2,m=Math.cos(v),y=Math.sin(v),x=S("position"),w=S("distance")||0,_=S("align");"outside"===x?(f=u.r+w,_=v>Math.PI/2?"right":"left"):_&&"center"!==_?"left"===_?(f=u.r0+w,v>Math.PI/2&&(_="right")):"right"===_&&(f=u.r-w,v>Math.PI/2&&(_="left")):(f=(u.r+u.r0)/2,_="center"),g.attr("style",{text:h,textAlign:_,textVerticalAlign:S("verticalAlign")||"middle",opacity:S("opacity")});var I=f*m+u.cx,b=f*y+u.cy;g.attr("position",[I,b]);var N=S("rotate"),M=0;function S(e){var t=l.get(e);return null==t?a.get(e):t}"radial"===N?(M=-v)<-Math.PI/2&&(M+=Math.PI):"tangential"===N?(M=Math.PI/2-v)>Math.PI/2?M-=Math.PI:M<-Math.PI/2&&(M+=Math.PI):"number"==typeof N&&(M=N*Math.PI/180),g.attr("rotation",M)},d._initEvents=function(e,t,o,i){e.off("mouseover").off("mouseout").off("emphasis").off("normal");var r=this,n=function(){r.onEmphasis(i)},a=function(){r.onNormal()};o.isAnimationEnabled()&&e.on("mouseover",n).on("mouseout",a).on("emphasis",n).on("normal",a).on("downplay",(function(){r.onDownplay()})).on("highlight",(function(){r.onHighlight()}))},i.inherits(s,r.Group);var h=s;e.exports=h},12906:(e,t,o)=>{var i=o(33051),r=o(93321),n=o(9327),a=o(4272),l=o(68833).wrapTreePathInfo,s=r.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(e,t){var o={name:e.name,children:e.data};!function e(t){var o=0;i.each(t.children,(function(t){e(t);var r=t.value;i.isArray(r)&&(r=r[0]),o+=r}));var r=t.value;i.isArray(r)&&(r=r[0]);(null==r||isNaN(r))&&(r=o);r<0&&(r=0);i.isArray(t.value)?t.value[0]=r:t.value=r}(o);var r=i.map(e.levels||[],(function(e){return new a(e,this,t)}),this),l=n.createTree(o,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var o=l.getNodeByDataIndex(t),i=r[o.depth];return i&&(e.parentModel=i),e}))}));return l.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(e){var t=r.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=l(o,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});e.exports=s},25787:(e,t,o)=>{var i=o(33051),r=o(75797),n=o(54313),a=o(4130),l=o(78988).windowOpen,s=r.extend({type:"sunburst",init:function(){},render:function(e,t,o,r){var l=this;this.seriesModel=e,this.api=o,this.ecModel=t;var s=e.getData(),d=s.tree.root,h=e.getViewRoot(),u=this.group,c=e.get("renderLabelForZeroData"),p=[];h.eachNode((function(e){p.push(e)}));var g=this._oldChildren||[];if(function(o,r){if(0===o.length&&0===r.length)return;function l(e){return e.getId()}function h(i,a){!function(o,i){c||!o||o.getValue()||(o=null);if(o!==d&&i!==d)if(i&&i.piece)o?(i.piece.updateData(!1,o,"normal",e,t),s.setItemGraphicEl(o.dataIndex,i.piece)):function(e){if(!e)return;e.piece&&(u.remove(e.piece),e.piece=null)}(i);else if(o){var r=new n(o,e,t);u.add(r),s.setItemGraphicEl(o.dataIndex,r)}}(null==i?null:o[i],null==a?null:r[a])}new a(r,o,l,l).add(h).update(h).remove(i.curry(h,null)).execute()}(p,g),function(o,i){if(i.depth>0){l.virtualPiece?l.virtualPiece.updateData(!1,o,"normal",e,t):(l.virtualPiece=new n(o,e,t),u.add(l.virtualPiece)),i.piece._onclickEvent&&i.piece.off("click",i.piece._onclickEvent);var r=function(e){l._rootToNode(i.parentNode)};i.piece._onclickEvent=r,l.virtualPiece.on("click",r)}else l.virtualPiece&&(u.remove(l.virtualPiece),l.virtualPiece=null)}(d,h),r&&r.highlight&&r.highlight.piece){var f=e.getShallow("highlightPolicy");r.highlight.piece.onEmphasis(f)}else if(r&&r.unhighlight){var v=this.virtualPiece;!v&&d.children.length&&(v=d.children[0].piece),v&&v.onNormal()}this._initEvents(),this._oldChildren=p},dispose:function(){},_initEvents:function(){var e=this,t=function(t){var o=!1;e.seriesModel.getViewRoot().eachNode((function(i){if(!o&&i.piece&&i.piece.childAt(0)===t.target){var r=i.getModel().get("nodeClick");if("rootToNode"===r)e._rootToNode(i);else if("link"===r){var n=i.getModel(),a=n.get("link");if(a){var s=n.get("target",!0)||"_blank";l(a,s)}}o=!0}}))};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",t),this.group._onclickEvent=t},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,t){var o=t.getData().getItemLayout(0);if(o){var i=e[0]-o.cx,r=e[1]-o.cy,n=Math.sqrt(i*i+r*r);return n<=o.r&&n>=o.r0}}});e.exports=s},74026:(e,t,o)=>{var i=o(70492),r=o(68833);i.registerAction({type:"sunburstRootToNode",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,o){var i=r.retrieveTargetInfo(e,["sunburstRootToNode"],t);if(i){var n=t.getViewRoot();n&&(e.direction=r.aboveViewRoot(n,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node)}}))}));i.registerAction({type:"sunburstHighlight",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,o){var i=r.retrieveTargetInfo(e,["sunburstHighlight"],t);i&&(e.highlight=i.node)}))}));i.registerAction({type:"sunburstUnhighlight",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,o){e.unhighlight=!0}))}))},23509:(e,t,o)=>{var i=o(85669).parsePercent,r=o(33051),n=Math.PI/180;function a(e,t){var o=e.children||[];e.children=function(e,t){if("function"==typeof t)return e.sort(t);var o="asc"===t;return e.sort((function(e,t){var i=(e.getValue()-t.getValue())*(o?1:-1);return 0===i?(e.dataIndex-t.dataIndex)*(o?-1:1):i}))}(o,t),o.length&&r.each(e.children,(function(e){a(e,t)}))}e.exports=function(e,t,o,l){t.eachSeriesByType(e,(function(e){var t=e.get("center"),l=e.get("radius");r.isArray(l)||(l=[0,l]),r.isArray(t)||(t=[t,t]);var s=o.getWidth(),d=o.getHeight(),h=Math.min(s,d),u=i(t[0],s),c=i(t[1],d),p=i(l[0],h/2),g=i(l[1],h/2),f=-e.get("startAngle")*n,v=e.get("minAngle")*n,m=e.getData().tree.root,y=e.getViewRoot(),x=y.depth,w=e.get("sort");null!=w&&a(y,w);var _=0;r.each(y.children,(function(e){!isNaN(e.getValue())&&_++}));var I=y.getValue(),b=Math.PI/(I||_)*2,N=y.depth>0,M=y.height-(N?-1:1),S=(g-p)/(M||1),T=e.get("clockwise"),L=e.get("stillShowZeroSum"),R=T?1:-1,D=function(e,t){if(e){var o=t;if(e!==m){var n=e.getValue(),a=0===I&&L?b:n*b;a<v&&(a=v),o=t+R*a;var l=e.depth-x-(N?-1:1),s=p+S*l,d=p+S*(l+1),g=e.getModel();null!=g.get("r0")&&(s=i(g.get("r0"),h/2)),null!=g.get("r")&&(d=i(g.get("r"),h/2)),e.setLayout({angle:a,startAngle:t,endAngle:o,clockwise:T,cx:u,cy:c,r0:s,r:d})}if(e.children&&e.children.length){var f=0;r.each(e.children,(function(e){f+=D(e,t+f)}))}return o-t}};if(N){var A=p,P=p+S,C=2*Math.PI;m.setLayout({angle:C,startAngle:f,endAngle:f+C,clockwise:T,cx:u,cy:c,r0:A,r:P})}D(y,f)}))}},90110:(e,t,o)=>{var i=o(70492);o(84066),o(16140),o(78244);var r=o(21330),n=o(9496),a=o(22528);i.registerLayout(r),i.registerVisual(n),i.registerProcessor(a("themeRiver"))},16140:(e,t,o)=>{var i=o(93321),r=o(55623),n=o(10381).getDimensionTypeByAxis,a=o(87587),l=o(33051),s=o(32234).groupData,d=o(78988).encodeHTML,h=o(72019),u=i.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){u.superApply(this,"init",arguments),this.legendVisualProvider=new h(l.bind(this.getData,this),l.bind(this.getRawData,this))},fixData:function(e){var t=e.length,o={},i=s(e,(function(e){return o.hasOwnProperty(e[0])||(o[e[0]]=-1),e[2]})),r=[];i.buckets.each((function(e,t){r.push({name:t,dataList:e})}));for(var n=r.length,a=0;a<n;++a){for(var l=r[a].name,d=0;d<r[a].dataList.length;++d){var h=r[a].dataList[d][0];o[h]=a}for(var h in o)o.hasOwnProperty(h)&&o[h]!==a&&(o[h]=a,e[t]=[],e[t][0]=h,e[t][1]=0,e[t][2]=l,t++)}return e},getInitialData:function(e,t){for(var o=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),i=l.filter(e.data,(function(e){return void 0!==e[2]})),s=this.fixData(i||[]),d=[],h=this.nameMap=l.createHashMap(),u=0,c=0;c<s.length;++c)d.push(s[c][2]),h.get(s[c][2])||(h.set(s[c][2],u),u++);var p=r(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:n(o)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),g=new a(p,this);return g.initData(s),g},getLayerSeries:function(){for(var e=this.getData(),t=e.count(),o=[],i=0;i<t;++i)o[i]=i;var r=e.mapDimension("single"),n=s(o,(function(t){return e.get("name",t)})),a=[];return n.buckets.each((function(t,o){t.sort((function(t,o){return e.get(r,t)-e.get(r,o)})),a.push({name:o,indices:t})})),a},getAxisTooltipData:function(e,t,o){l.isArray(e)||(e=e?[e]:[]);for(var i,r=this.getData(),n=this.getLayerSeries(),a=[],s=n.length,d=0;d<s;++d){for(var h=Number.MAX_VALUE,u=-1,c=n[d].indices.length,p=0;p<c;++p){var g=r.get(e[0],n[d].indices[p]),f=Math.abs(g-t);f<=h&&(i=g,h=f,u=n[d].indices[p])}a.push(u)}return{dataIndices:a,nestestValue:i}},formatTooltip:function(e){var t=this.getData(),o=t.getName(e),i=t.get(t.mapDimension("value"),e);return(isNaN(i)||null==i)&&(i="-"),d(o+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}}),c=u;e.exports=c},78244:(e,t,o)=>{var i=o(70492),r=o(30633).Polygon,n=o(51177),a=o(33051),l=a.bind,s=a.extend,d=o(4130),h=i.extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(e,t,o){var i=e.getData(),a=this.group,h=e.getLayerSeries(),u=i.getLayout("layoutInfo"),c=u.rect,p=u.boundaryGap;function g(e){return e.name}a.attr("position",[0,c.y+p[0]]);var f=new d(this._layersSeries||[],h,g,g),v={};function m(t,o,l){var d=this._layers;if("remove"!==t){for(var u,c,p,g=[],f=[],m=h[o].indices,y=0;y<m.length;y++){var x=i.getItemLayout(m[y]),w=x.x,_=x.y0,I=x.y;g.push([w,_]),f.push([w,_+I]),u=i.getItemVisual(m[y],"color")}var b=i.getItemLayout(m[0]),N=i.getItemModel(m[y-1]),M=N.getModel("label"),S=M.get("margin");if("add"===t){var T=v[o]=new n.Group;c=new r({shape:{points:g,stackedOnPoints:f,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),p=new n.Text({style:{x:b.x-S,y:b.y0+b.y/2}}),T.add(c),T.add(p),a.add(T),c.setClipPath(function(e,t,o){var i=new n.Rect({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return n.initProps(i,{shape:{width:e.width+20,height:e.height+20}},t,o),i}(c.getBoundingRect(),e,(function(){c.removeClipPath()})))}else{T=d[l];c=T.childAt(0),p=T.childAt(1),a.add(T),v[o]=T,n.updateProps(c,{shape:{points:g,stackedOnPoints:f}},e),n.updateProps(p,{style:{x:b.x-S,y:b.y0+b.y/2}},e)}var L=N.getModel("emphasis.itemStyle"),R=N.getModel("itemStyle");n.setTextStyle(p.style,M,{text:M.get("show")?e.getFormattedLabel(m[y-1],"normal")||i.getName(m[y-1]):null,textVerticalAlign:"middle"}),c.setStyle(s({fill:u},R.getItemStyle(["color"]))),n.setHoverStyle(c,L.getItemStyle())}else a.remove(d[o])}f.add(l(m,this,"add")).update(l(m,this,"update")).remove(l(m,this,"remove")).execute(),this._layersSeries=h,this._layers=v},dispose:function(){}});e.exports=h},21330:(e,t,o)=>{var i=o(33051),r=o(85669);function n(e,t,o){if(e.count())for(var r,n=t.coordinateSystem,a=t.getLayerSeries(),l=e.mapDimension("single"),s=e.mapDimension("value"),d=i.map(a,(function(t){return i.map(t.indices,(function(t){var o=n.dataToPoint(e.get(l,t));return o[1]=e.get(s,t),o}))})),h=function(e){for(var t=e.length,o=e[0].length,i=[],r=[],n=0,a={},l=0;l<o;++l){for(var s=0,d=0;s<t;++s)d+=e[s][l][1];d>n&&(n=d),i.push(d)}for(var h=0;h<o;++h)r[h]=(n-i[h])/2;n=0;for(var u=0;u<o;++u){var c=i[u]+r[u];c>n&&(n=c)}return a.y0=r,a.max=n,a}(d),u=h.y0,c=o/h.max,p=a.length,g=a[0].indices.length,f=0;f<g;++f){r=u[f]*c,e.setItemLayout(a[0].indices[f],{layerIndex:0,x:d[0][f][0],y0:r,y:d[0][f][1]*c});for(var v=1;v<p;++v)r+=d[v-1][f][1]*c,e.setItemLayout(a[v].indices[f],{layerIndex:v,x:d[v][f][0],y0:r,y:d[v][f][1]*c})}}e.exports=function(e,t){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),o=e.coordinateSystem,i={},a=o.getRect();i.rect=a;var l=e.get("boundaryGap"),s=o.getAxis();(i.boundaryGap=l,"horizontal"===s.orient)?(l[0]=r.parsePercent(l[0],a.height),l[1]=r.parsePercent(l[1],a.height),n(t,e,a.height-l[0]-l[1])):(l[0]=r.parsePercent(l[0],a.width),l[1]=r.parsePercent(l[1],a.width),n(t,e,a.width-l[0]-l[1]));t.setLayout("layoutInfo",i)}))}},9496:(e,t,o)=>{var i=o(33051).createHashMap;e.exports=function(e){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),o=e.getRawData(),r=e.get("color"),n=i();t.each((function(e){n.set(t.getRawIndex(e),e)})),o.each((function(i){var a=o.getName(i),l=r[(e.nameMap.get(a)-1)%r.length];o.setItemVisual(i,"color",l);var s=n.get(i);null!=s&&t.setItemVisual(s,"color",l)}))}))}},81052:(e,t,o)=>{var i=o(70492);o(97908),o(37732),o(1969);var r=o(34586),n=o(92961);i.registerVisual(r("tree","circle")),i.registerLayout(n)},97908:(e,t,o)=>{var i=o(93321),r=o(9327),n=o(78988).encodeHTML,a=o(4272),l=i.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(e){var t={name:e.name,children:e.data},o=e.leaves||{},i=new a(o,this,this.ecModel),n=r.createTree(t,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var o=n.getNodeByDataIndex(t);return o.children.length&&o.isExpand||(e.parentModel=i),e}))}));var l=0;n.eachNode("preorder",(function(e){e.depth>l&&(l=e.depth)}));var s=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:l;return n.root.eachNode("preorder",(function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=s})),n.data},getOrient:function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},formatTooltip:function(e){for(var t=this.getData().tree,o=t.root.children[0],i=t.getNodeByDataIndex(e),r=i.getValue(),a=i.name;i&&i!==o;)a=i.parentNode.name+"."+a,i=i.parentNode;return n(a+(isNaN(r)||null==r?"":" : "+r))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});e.exports=l},37732:(e,t,o)=>{var i=o(33051),r=o(51177),n=o(66351),a=o(69387).radialCoordinate,l=o(70492),s=o(3726),d=o(23845),h=o(31194),u=o(9176),c=o(61485).onIrrelevantElement,p=(o(38175).__DEV__,o(85669).parsePercent),g=r.extendShape({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(e,t){var o=t.childPoints,i=o.length,r=t.parentPoint,n=o[0],a=o[i-1];if(1===i)return e.moveTo(r[0],r[1]),void e.lineTo(n[0],n[1]);var l=t.orient,s="TB"===l||"BT"===l?0:1,d=1-s,h=p(t.forkPosition,1),u=[];u[s]=r[s],u[d]=r[d]+(a[d]-r[d])*h,e.moveTo(r[0],r[1]),e.lineTo(u[0],u[1]),e.moveTo(n[0],n[1]),u[s]=n[s],e.lineTo(u[0],u[1]),u[s]=a[s],e.lineTo(u[0],u[1]),e.lineTo(a[0],a[1]);for(var c=1;c<i-1;c++){var g=o[c];e.moveTo(g[0],g[1]),u[s]=g[s],e.lineTo(u[0],u[1])}}}),f=l.extendChartView({type:"tree",init:function(e,t){this._oldTree,this._mainGroup=new r.Group,this._controller=new u(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(e,t,o,i){var r=e.getData(),n=e.layoutInfo,a=this._mainGroup,l=e.get("layout");"radial"===l?a.attr("position",[n.x+n.width/2,n.y+n.height/2]):a.attr("position",[n.x,n.y]),this._updateViewCoordSys(e,n,l),this._updateController(e,t,o);var s=this._data,d={expandAndCollapse:e.get("expandAndCollapse"),layout:l,edgeShape:e.get("edgeShape"),edgeForkPosition:e.get("edgeForkPosition"),orient:e.getOrient(),curvature:e.get("lineStyle.curveness"),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};r.diff(s).add((function(t){v(r,t)&&y(r,t,null,a,e,d)})).update((function(t,o){var i=s.getItemGraphicEl(o);v(r,t)?y(r,t,i,a,e,d):i&&x(s,o,i,a,e,d)})).remove((function(t){var o=s.getItemGraphicEl(t);o&&x(s,t,o,a,e,d)})).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===d.expandAndCollapse&&r.eachItemGraphicEl((function(t,i){t.off("click").on("click",(function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:i})}))})),this._data=r},_updateViewCoordSys:function(e){var t=e.getData(),o=[];t.each((function(e){var i=t.getItemLayout(e);!i||isNaN(i.x)||isNaN(i.y)||o.push([+i.x,+i.y])}));var i=[],r=[];s.fromPoints(o,i,r);var n=this._min,a=this._max;r[0]-i[0]==0&&(i[0]=n?n[0]:i[0]-1,r[0]=a?a[0]:r[0]+1),r[1]-i[1]==0&&(i[1]=n?n[1]:i[1]-1,r[1]=a?a[1]:r[1]+1);var l=e.coordinateSystem=new d;l.zoomLimit=e.get("scaleLimit"),l.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1]),l.setCenter(e.get("center")),l.setZoom(e.get("zoom")),this.group.attr({position:l.position,scale:l.scale}),this._viewCoordSys=l,this._min=i,this._max=r},_updateController:function(e,t,o){var i=this._controller,r=this._controllerHost,n=this.group;i.setPointerChecker((function(t,i,r){var a=n.getBoundingRect();return a.applyTransform(n.transform),a.contain(i,r)&&!c(t,o,e)})),i.enable(e.get("roam")),r.zoomLimit=e.get("scaleLimit"),r.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(t){h.updateViewOnPan(r,t.dx,t.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})}),this).on("zoom",(function(t){h.updateViewOnZoom(r,t.scale,t.originX,t.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),this._updateNodeAndLinkScale(e)}),this)},_updateNodeAndLinkScale:function(e){var t=e.getData(),o=this._getNodeGlobalScale(e),i=[o,o];t.eachItemGraphicEl((function(e,t){e.attr("scale",i)}))},_getNodeGlobalScale:function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var o=this._nodeScaleRatio,i=t.scale,r=i&&i[0]||1;return((t.getZoom()-1)*o+1)/r},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}});function v(e,t){var o=e.getItemLayout(t);return o&&!isNaN(o.x)&&!isNaN(o.y)&&"none"!==e.getItemVisual(t,"symbol")}function m(e,t,o){return o.itemModel=t,o.itemStyle=t.getModel("itemStyle").getItemStyle(),o.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),o.lineStyle=t.getModel("lineStyle").getLineStyle(),o.labelModel=t.getModel("label"),o.hoverLabelModel=t.getModel("emphasis.label"),!1===e.isExpand&&0!==e.children.length?o.symbolInnerColor=o.itemStyle.fill:o.symbolInnerColor="#fff",o}function y(e,t,o,a,l,s){var d=!o,h=e.tree.getNodeByDataIndex(t),u=h.getModel(),c=(s=m(h,u,s),e.tree.root),p=h.parentNode===c?h:h.parentNode||h,f=e.getItemGraphicEl(p.dataIndex),v=p.getLayout(),y=f?{x:f.position[0],y:f.position[1],rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:v,x=h.getLayout();d?(o=new n(e,t,s)).attr("position",[y.x,y.y]):o.updateData(e,t,s),o.__radialOldRawX=o.__radialRawX,o.__radialOldRawY=o.__radialRawY,o.__radialRawX=x.rawX,o.__radialRawY=x.rawY,a.add(o),e.setItemGraphicEl(t,o),r.updateProps(o,{position:[x.x,x.y]},l);var _=o.getSymbolPath();if("radial"===s.layout){var I,b,N=c.children[0],M=N.getLayout(),S=N.children.length;if(x.x===M.x&&!0===h.isExpand){var T={};T.x=(N.children[0].getLayout().x+N.children[S-1].getLayout().x)/2,T.y=(N.children[0].getLayout().y+N.children[S-1].getLayout().y)/2,(I=Math.atan2(T.y-M.y,T.x-M.x))<0&&(I=2*Math.PI+I),(b=T.x<M.x)&&(I-=Math.PI)}else(I=Math.atan2(x.y-M.y,x.x-M.x))<0&&(I=2*Math.PI+I),0===h.children.length||0!==h.children.length&&!1===h.isExpand?(b=x.x<M.x)&&(I-=Math.PI):(b=x.x>M.x)||(I-=Math.PI);var L=b?"left":"right",R=s.labelModel.get("rotate"),D=R*(Math.PI/180);_.setStyle({textPosition:s.labelModel.get("position")||L,textRotation:null==R?-I:D,textOrigin:"center",verticalAlign:"middle"})}!function(e,t,o,n,a,l,s,d,h){var u=h.edgeShape,c=n.__edge;if("curve"===u)t.parentNode&&t.parentNode!==o&&(c||(c=n.__edge=new r.BezierCurve({shape:w(h,a,a),style:i.defaults({opacity:0,strokeNoScale:!0},h.lineStyle)})),r.updateProps(c,{shape:w(h,l,s),style:i.defaults({opacity:1},h.lineStyle)},e));else if("polyline"===u&&"orthogonal"===h.layout&&t!==o&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var p=t.children,f=[],v=0;v<p.length;v++){var m=p[v].getLayout();f.push([m.x,m.y])}c||(c=n.__edge=new g({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:h.orient,forkPosition:h.edgeForkPosition},style:i.defaults({opacity:0,strokeNoScale:!0},h.lineStyle)})),r.updateProps(c,{shape:{parentPoint:[s.x,s.y],childPoints:f},style:i.defaults({opacity:1},h.lineStyle)},e)}d.add(c)}(l,h,c,o,y,v,x,a,s)}function x(e,t,o,i,n,a){for(var l,s=e.tree.getNodeByDataIndex(t),d=e.tree.root,h=s.getModel(),u=(a=m(s,h,a),s.parentNode===d?s:s.parentNode||s),c=a.edgeShape;null==(l=u.getLayout());)u=u.parentNode===d?u:u.parentNode||u;r.updateProps(o,{position:[l.x+1,l.y+1]},n,(function(){i.remove(o),e.setItemGraphicEl(t,null)})),o.fadeOut(null,{keepLabel:!0});var p=e.getItemGraphicEl(u.dataIndex).__edge,g=o.__edge||(!1===u.isExpand||1===u.children.length?p:void 0);c=a.edgeShape;g&&("curve"===c?r.updateProps(g,{shape:w(a,l,l),style:{opacity:0}},n,(function(){i.remove(g)})):"polyline"===c&&"orthogonal"===a.layout&&r.updateProps(g,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,(function(){i.remove(g)})))}function w(e,t,o){var i,r,n,l,s,d,h,u,c=e.orient;if("radial"===e.layout){s=t.rawX,h=t.rawY,d=o.rawX,u=o.rawY;var p=a(s,h),g=a(s,h+(u-h)*e.curvature),f=a(d,u+(h-u)*e.curvature),v=a(d,u);return{x1:p.x,y1:p.y,x2:v.x,y2:v.y,cpx1:g.x,cpy1:g.y,cpx2:f.x,cpy2:f.y}}return s=t.x,h=t.y,d=o.x,u=o.y,"LR"!==c&&"RL"!==c||(i=s+(d-s)*e.curvature,r=h,n=d+(s-d)*e.curvature,l=u),"TB"!==c&&"BT"!==c||(i=s,r=h+(u-h)*e.curvature,n=d,l=u+(h-u)*e.curvature),{x1:s,y1:h,x2:d,y2:u,cpx1:i,cpy1:r,cpx2:n,cpy2:l}}e.exports=f},69387:(e,t,o)=>{var i=o(76172);function r(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function n(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function a(e,t,o){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:o}function l(e,t,o){var i=o/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=o,t.hierNode.modifier+=o,t.hierNode.prelim+=o,e.hierNode.change+=i}function s(e,t){return e.parentNode===t.parentNode?1:2}t.init=function(e){e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t,o,i=[e];t=i.pop();)if(o=t.children,t.isExpand&&o.length)for(var r=o.length-1;r>=0;r--){var n=o[r];n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i:r,thread:null},i.push(n)}},t.firstWalk=function(e,t){var o=e.isExpand?e.children:[],i=e.parentNode.children,s=e.hierNode.i?i[e.hierNode.i-1]:null;if(o.length){!function(e){var t=e.children,o=t.length,i=0,r=0;for(;--o>=0;){var n=t[o];n.hierNode.prelim+=i,n.hierNode.modifier+=i,r+=n.hierNode.change,i+=n.hierNode.shift+r}}(e);var d=(o[0].hierNode.prelim+o[o.length-1].hierNode.prelim)/2;s?(e.hierNode.prelim=s.hierNode.prelim+t(e,s),e.hierNode.modifier=e.hierNode.prelim-d):e.hierNode.prelim=d}else s&&(e.hierNode.prelim=s.hierNode.prelim+t(e,s));e.parentNode.hierNode.defaultAncestor=function(e,t,o,i){if(t){for(var s=e,d=e,h=d.parentNode.children[0],u=t,c=s.hierNode.modifier,p=d.hierNode.modifier,g=h.hierNode.modifier,f=u.hierNode.modifier;u=r(u),d=n(d),u&&d;){s=r(s),h=n(h),s.hierNode.ancestor=e;var v=u.hierNode.prelim+f-d.hierNode.prelim-p+i(u,d);v>0&&(l(a(u,e,o),e,v),p+=v,c+=v),f+=u.hierNode.modifier,p+=d.hierNode.modifier,c+=s.hierNode.modifier,g+=h.hierNode.modifier}u&&!r(s)&&(s.hierNode.thread=u,s.hierNode.modifier+=f-c),d&&!n(h)&&(h.hierNode.thread=d,h.hierNode.modifier+=p-g,o=e)}return o}(e,s,e.parentNode.hierNode.defaultAncestor||i[0],t)},t.secondWalk=function(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier},t.separation=function(e){return arguments.length?e:s},t.radialCoordinate=function(e,t){var o={};return e-=Math.PI/2,o.x=t*Math.cos(e),o.y=t*Math.sin(e),o},t.getViewRect=function(e,t){return i.getLayoutRect(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}},55128:(e,t)=>{t.eachAfter=function(e,t,o){for(var i,r=[e],n=[];i=r.pop();)if(n.push(i),i.isExpand){var a=i.children;if(a.length)for(var l=0;l<a.length;l++)r.push(a[l])}for(;i=n.pop();)t(i,o)},t.eachBefore=function(e,t){for(var o,i=[e];o=i.pop();)if(t(o),o.isExpand){var r=o.children;if(r.length)for(var n=r.length-1;n>=0;n--)i.push(r[n])}}},1969:(e,t,o)=>{var i=o(70492),r=o(60553).updateCenterAndZoom;i.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var o=e.dataIndex,i=t.getData().tree.getNodeByDataIndex(o);i.isExpand=!i.isExpand}))})),i.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var o=t.coordinateSystem,i=r(o,e);t.setCenter&&t.setCenter(i.center),t.setZoom&&t.setZoom(i.zoom)}))}))},92961:(e,t,o)=>{var i=o(55128),r=i.eachAfter,n=i.eachBefore,a=o(69387),l=a.init,s=a.firstWalk,d=a.secondWalk,h=a.separation,u=a.radialCoordinate,c=a.getViewRect;e.exports=function(e,t){e.eachSeriesByType("tree",(function(e){!function(e,t){var o=c(e,t);e.layoutInfo=o;var i=e.get("layout"),a=0,p=0,g=null;"radial"===i?(a=2*Math.PI,p=Math.min(o.height,o.width)/2,g=h((function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth}))):(a=o.width,p=o.height,g=h());var f=e.getData().tree.root,v=f.children[0];if(v){l(f),r(v,s,g),f.hierNode.modifier=-v.hierNode.prelim,n(v,d);var m=v,y=v,x=v;n(v,(function(e){var t=e.getLayout().x;t<m.getLayout().x&&(m=e),t>y.getLayout().x&&(y=e),e.depth>x.depth&&(x=e)}));var w=m===y?1:g(m,y)/2,_=w-m.getLayout().x,I=0,b=0,N=0,M=0;if("radial"===i)I=a/(y.getLayout().x+w+_),b=p/(x.depth-1||1),n(v,(function(e){N=(e.getLayout().x+_)*I,M=(e.depth-1)*b;var t=u(N,M);e.setLayout({x:t.x,y:t.y,rawX:N,rawY:M},!0)}));else{var S=e.getOrient();"RL"===S||"LR"===S?(b=p/(y.getLayout().x+w+_),I=a/(x.depth-1||1),n(v,(function(e){M=(e.getLayout().x+_)*b,N="LR"===S?(e.depth-1)*I:a-(e.depth-1)*I,e.setLayout({x:N,y:M},!0)}))):"TB"!==S&&"BT"!==S||(I=a/(y.getLayout().x+w+_),b=p/(x.depth-1||1),n(v,(function(e){N=(e.getLayout().x+_)*I,M="TB"===S?(e.depth-1)*b:p-(e.depth-1)*b,e.setLayout({x:N,y:M},!0)})))}}}(e,t)}))}},17831:(e,t,o)=>{var i=o(70492);o(37670),o(45255),o(93663);var r=o(46188),n=o(29605);i.registerVisual(r),i.registerLayout(n)},2711:(e,t,o)=>{var i=o(51177),r=o(76172),n=o(33051),a=o(68833).wrapTreePathInfo;function l(e){this.group=new i.Group,e.add(this.group)}function s(e,t,o,i,r,n){var a=[[r?e:e-5,t],[e+o,t],[e+o,t+i],[r?e:e-5,t+i]];return!n&&a.splice(2,0,[e+o+5,t+i/2]),!r&&a.push([e,t+i/2]),a}function d(e,t,o){e.eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.componentIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:o&&o.dataIndex,name:o&&o.name},treePathInfo:o&&a(o,t)}}l.prototype={constructor:l,render:function(e,t,o,i){var n=e.getModel("breadcrumb"),a=this.group;if(a.removeAll(),n.get("show")&&o){var l=n.getModel("itemStyle"),s=l.getModel("textStyle"),d={pos:{left:n.get("left"),right:n.get("right"),top:n.get("top"),bottom:n.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:n.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,d,s),this._renderContent(e,d,l,s,i),r.positionElement(a,d.pos,d.box)}},_prepare:function(e,t,o){for(var i=e;i;i=i.parentNode){var r=i.getModel().get("name"),n=o.getTextRect(r),a=Math.max(n.width+16,t.emptyItemWidth);t.totalWidth+=a+8,t.renderList.push({node:i,text:r,width:a})}},_renderContent:function(e,t,o,a,l){for(var h=0,u=t.emptyItemWidth,c=e.get("breadcrumb.height"),p=r.getAvailableSize(t.pos,t.box),g=t.totalWidth,f=t.renderList,v=f.length-1;v>=0;v--){var m=f[v],y=m.node,x=m.width,w=m.text;g>p.width&&(g-=x-u,x=u,w=null);var _=new i.Polygon({shape:{points:s(h,0,x,c,v===f.length-1,0===v)},style:n.defaults(o.getItemStyle(),{lineJoin:"bevel",text:w,textFill:a.getTextColor(),textFont:a.getFont()}),z:10,onclick:n.curry(l,y)});this.group.add(_),d(_,e,y),h+=x+8}},remove:function(){this.group.removeAll()}};var h=l;e.exports=h},37670:(e,t,o)=>{var i=o(33051),r=o(93321),n=o(9327),a=o(4272),l=o(78988),s=l.encodeHTML,d=l.addCommas,h=o(68833).wrapTreePathInfo,u=r.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(e,t){var o={name:e.name,children:e.data};!function e(t){var o=0;i.each(t.children,(function(t){e(t);var r=t.value;i.isArray(r)&&(r=r[0]),o+=r}));var r=t.value;i.isArray(r)&&(r=r[0]);(null==r||isNaN(r))&&(r=o);r<0&&(r=0);i.isArray(t.value)?t.value[0]=r:t.value=r}(o);var r=e.levels||[],l=this.designatedVisualItemStyle={},s=new a({itemStyle:l},this,t);r=e.levels=function(e,t){var o,r=t.get("color");if(!r)return;if(e=e||[],i.each(e,(function(e){var t=new a(e),i=t.get("color");(t.get("itemStyle.color")||i&&"none"!==i)&&(o=!0)})),!o){(e[0]||(e[0]={})).color=r.slice()}return e}(r,t);var d=i.map(r||[],(function(e){return new a(e,s,t)}),this),h=n.createTree(o,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var o=h.getNodeByDataIndex(t),i=d[o.depth];return e.parentModel=i||s,e}))}));return h.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(e){var t=this.getData(),o=this.getRawValue(e),r=i.isArray(o)?d(o[0]):d(o),n=t.getName(e);return s(n+": "+r)},getDataParams:function(e){var t=r.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=h(o,this),t},setLayoutInfo:function(e){this.layoutInfo=this.layoutInfo||{},i.extend(this.layoutInfo,e)},mapIdToIndex:function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=i.createHashMap(),this._idIndexMapCount=0);var o=t.get(e);return null==o&&t.set(e,o=this._idIndexMapCount++),o},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});e.exports=u},45255:(e,t,o)=>{var i=o(70492),r=o(33051),n=o(51177),a=o(4130),l=o(68833),s=o(2711),d=o(9176),h=o(60479),u=o(32892),c=o(34584),p=o(59066),g=o(78988).windowOpen,f=r.bind,v=n.Group,m=n.Rect,y=r.each,x=["label"],w=["emphasis","label"],_=["upperLabel"],I=["emphasis","upperLabel"],b=p([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),N=function(e){var t=b(e);return t.stroke=t.fill=t.lineWidth=null,t},M=i.extendChartView({type:"treemap",init:function(e,t){this._containerGroup,this._storage={nodeGroup:[],background:[],content:[]},this._oldTree,this._breadcrumb,this._controller,this._state="ready"},render:function(e,t,o,i){var n=t.findComponents({mainType:"series",subType:"treemap",query:i});if(!(r.indexOf(n,e)<0)){this.seriesModel=e,this.api=o,this.ecModel=t;var a=l.retrieveTargetInfo(i,["treemapZoomToNode","treemapRootToNode"],e),s=i&&i.type,d=e.layoutInfo,h=!this._oldTree,u=this._storage,c="treemapRootToNode"===s&&a&&u?{rootNodeGroup:u.nodeGroup[a.node.getRawIndex()],direction:i.direction}:null,p=this._giveContainerGroup(d),g=this._doRender(p,e,c);h||s&&"treemapZoomToNode"!==s&&"treemapRootToNode"!==s?g.renderFinally():this._doAnimation(p,g,e,c),this._resetController(o),this._renderBreadcrumb(e,o,a)}},_giveContainerGroup:function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new v,this._initEvents(t),this.group.add(t)),t.attr("position",[e.x,e.y]),t},_doRender:function(e,t,o){var i=t.getData().tree,n=this._oldTree,l={nodeGroup:[],background:[],content:[]},s={nodeGroup:[],background:[],content:[]},d=this._storage,h=[],u=r.curry(S,t,s,d,o,l,h);!function e(t,o,i,n,l){n?(o=t,y(t,(function(e,t){!e.isRemoved()&&d(t,t)}))):new a(o,t,s,s).add(d).update(d).remove(r.curry(d,null)).execute();function s(e){return e.getId()}function d(r,a){var s=null!=r?t[r]:null,d=null!=a?o[a]:null,h=u(s,d,i,l);h&&e(s&&s.viewChildren||[],d&&d.viewChildren||[],h,n,l+1)}}(i.root?[i.root]:[],n&&n.root?[n.root]:[],e,i===n||!n,0);var c=function(e){var t={nodeGroup:[],background:[],content:[]};return e&&y(e,(function(e,o){var i=t[o];y(e,(function(e){e&&(i.push(e),e.__tmWillDelete=1)}))})),t}(d);return this._oldTree=i,this._storage=s,{lastsForAnimation:l,willDeleteEls:c,renderFinally:function(){y(c,(function(e){y(e,(function(e){e.parent&&e.parent.remove(e)}))})),y(h,(function(e){e.invisible=!0,e.dirty()}))}}},_doAnimation:function(e,t,o,i){if(o.get("animation")){var n=o.get("animationDurationUpdate"),a=o.get("animationEasing"),l=c.createWrap();y(t.willDeleteEls,(function(e,t){y(e,(function(e,o){if(!e.invisible){var r,s=e.parent;if(i&&"drillDown"===i.direction)r=s===i.rootNodeGroup?{shape:{x:0,y:0,width:s.__tmNodeWidth,height:s.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var d=0,h=0;s.__tmWillDelete||(d=s.__tmNodeWidth/2,h=s.__tmNodeHeight/2),r="nodeGroup"===t?{position:[d,h],style:{opacity:0}}:{shape:{x:d,y:h,width:0,height:0},style:{opacity:0}}}r&&l.add(e,r,n,a)}}))})),y(this._storage,(function(e,o){y(e,(function(e,i){var s=t.lastsForAnimation[o][i],d={};s&&("nodeGroup"===o?s.old&&(d.position=e.position.slice(),e.attr("position",s.old)):(s.old&&(d.shape=r.extend({},e.shape),e.setShape(s.old)),s.fadein?(e.setStyle("opacity",0),d.style={opacity:1}):1!==e.style.opacity&&(d.style={opacity:1})),l.add(e,d,n,a))}))}),this),this._state="animating",l.done(f((function(){this._state="ready",t.renderFinally()}),this)).start()}},_resetController:function(e){var t=this._controller;t||((t=this._controller=new d(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",f(this._onPan,this)),t.on("zoom",f(this._onZoom,this)));var o=new h(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,i){return o.contain(t,i)}))},_clearController:function(){var e=this._controller;e&&(e.dispose(),e=null)},_onPan:function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var o=t.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},_onZoom:function(e){var t=e.originX,o=e.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var r=i.getLayout();if(!r)return;var n=new h(r.x,r.y,r.width,r.height),a=this.seriesModel.layoutInfo;t-=a.x,o-=a.y;var l=u.create();u.translate(l,l,[-t,-o]),u.scale(l,l,[e.scale,e.scale]),u.translate(l,l,[t,o]),n.applyTransform(l),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x,y:n.y,width:n.width,height:n.height}})}},_initEvents:function(e){e.on("click",(function(e){if("ready"===this._state){var t=this.seriesModel.get("nodeClick",!0);if(t){var o=this.findTarget(e.offsetX,e.offsetY);if(o){var i=o.node;if(i.getLayout().isLeafRoot)this._rootToNode(o);else if("zoomToNode"===t)this._zoomToNode(o);else if("link"===t){var r=i.hostTree.data.getItemModel(i.dataIndex),n=r.get("link",!0),a=r.get("target",!0)||"blank";n&&g(n,a)}}}}}),this)},_renderBreadcrumb:function(e,t,o){o||(o=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(o={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new s(this.group))).render(e,t,o.node,f((function(t){"animating"!==this._state&&(l.aboveViewRoot(e.getViewRoot(),t)?this._rootToNode({node:t}):this._zoomToNode({node:t}))}),this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},_rootToNode:function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},findTarget:function(e,t){var o;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(i){var r=this._storage.background[i.getRawIndex()];if(r){var n=r.transformCoordToLocal(e,t),a=r.shape;if(!(a.x<=n[0]&&n[0]<=a.x+a.width&&a.y<=n[1]&&n[1]<=a.y+a.height))return!1;o={node:i,offsetX:n[0],offsetY:n[1]}}}),this),o}});function S(e,t,o,i,a,l,s,d,h,u){if(s){var c=s.getLayout(),p=e.getData();if(p.setItemGraphicEl(s.dataIndex,null),c&&c.isInView){var g=c.width,f=c.height,y=c.borderWidth,M=c.invisible,S=s.getRawIndex(),L=d&&d.getRawIndex(),R=s.viewChildren,D=c.upperHeight,A=R&&R.length,P=s.getModel("itemStyle"),C=s.getModel("emphasis.itemStyle"),V=z("nodeGroup",v);if(V){if(h.add(V),V.attr("position",[c.x||0,c.y||0]),V.__tmNodeWidth=g,V.__tmNodeHeight=f,c.isAboveViewRoot)return V;var k=s.getModel(),E=z("background",m,u,1);if(E&&function(t,o,i){if(o.dataIndex=s.dataIndex,o.seriesIndex=e.seriesIndex,o.setShape({x:0,y:0,width:g,height:f}),M)H(o);else{o.invisible=!1;var r=s.getVisual("borderColor",!0),a=C.get("borderColor"),l=N(P);l.fill=r;var d=b(C);if(d.fill=a,i){var h=g-2*y;W(l,d,r,h,D,{x:y,y:0,width:h,height:D})}else l.text=d.text=null;o.setStyle(l),n.setElementHoverStyle(o,d)}t.add(o)}(V,E,A&&c.upperLabelHeight),A)n.isHighDownDispatcher(V)&&n.setAsHighDownDispatcher(V,!1),E&&(n.setAsHighDownDispatcher(E,!0),p.setItemGraphicEl(s.dataIndex,E));else{var G=z("content",m,u,2);G&&function(t,o){o.dataIndex=s.dataIndex,o.seriesIndex=e.seriesIndex;var i=Math.max(g-2*y,0),r=Math.max(f-2*y,0);if(o.culling=!0,o.setShape({x:y,y:y,width:i,height:r}),M)H(o);else{o.invisible=!1;var a=s.getVisual("color",!0),l=N(P);l.fill=a;var d=b(C);W(l,d,a,i,r),o.setStyle(l),n.setElementHoverStyle(o,d)}t.add(o)}(V,G),E&&n.isHighDownDispatcher(E)&&n.setAsHighDownDispatcher(E,!1),n.setAsHighDownDispatcher(V,!0),p.setItemGraphicEl(s.dataIndex,V)}return V}}}function H(e){!e.invisible&&l.push(e)}function W(t,o,i,a,l,d){var h=k.get("name"),u=k.getModel(d?_:x),p=k.getModel(d?I:w),g=u.getShallow("show");n.setLabelStyle(t,o,u,p,{defaultText:g?h:null,autoColor:i,isRectText:!0,labelFetcher:e,labelDataIndex:s.dataIndex,labelProp:d?"upperLabel":"label"}),B(t,d,c),B(o,d,c),d&&(t.textRect=r.clone(d)),t.truncate=g&&u.get("ellipsis")?{outerWidth:a,outerHeight:l,minChar:2}:null}function B(t,o,i){var r=t.text;if(!o&&i.isLeafRoot&&null!=r){var n=e.get("drillDownIcon",!0);t.text=n?n+" "+r:r}}function z(e,n,l,d){var h=null!=L&&o[e][L],u=a[e];return h?(o[e][L]=null,function(e,t,o){(e[S]={}).old="nodeGroup"===o?t.position.slice():r.extend({},t.shape)}(u,h,e)):M||((h=new n({z:T(l,d)})).__tmDepth=l,h.__tmStorageName=e,function(e,t,o){var r=e[S]={},n=s.parentNode;if(n&&(!i||"drillDown"===i.direction)){var l=0,d=0,h=a.background[n.getRawIndex()];!i&&h&&h.old&&(l=h.old.width,d=h.old.height),r.old="nodeGroup"===o?[0,d]:{x:l,y:d,width:0,height:0}}r.fadein="nodeGroup"!==o}(u,0,e)),t[e][S]=h}}function T(e,t){var o=10*e+t;return(o-1)/o}e.exports=M},93663:(e,t,o)=>{for(var i=o(70492),r=o(68833),n=function(){},a=["treemapZoomToNode","treemapRender","treemapMove"],l=0;l<a.length;l++)i.registerAction({type:a[l],update:"updateView"},n);i.registerAction({type:"treemapRootToNode",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},(function(t,o){var i=r.retrieveTargetInfo(e,["treemapZoomToNode","treemapRootToNode"],t);if(i){var n=t.getViewRoot();n&&(e.direction=r.aboveViewRoot(n,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node)}}))}))},29605:(e,t,o)=>{var i=o(33051),r=o(60479),n=o(85669),a=n.parsePercent,l=n.MAX_SAFE_INTEGER,s=o(76172),d=o(68833),h=Math.max,u=Math.min,c=i.retrieve,p=i.each,g=["itemStyle","borderWidth"],f=["itemStyle","gapWidth"],v=["upperLabel","show"],m=["upperLabel","height"],y={seriesType:"treemap",reset:function(e,t,o,n){var v=o.getWidth(),m=o.getHeight(),y=e.option,b=s.getLayoutRect(e.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()}),N=y.size||[],M=a(c(b.width,N[0]),v),S=a(c(b.height,N[1]),m),T=n&&n.type,L=d.retrieveTargetInfo(n,["treemapZoomToNode","treemapRootToNode"],e),R="treemapRender"===T||"treemapMove"===T?n.rootRect:null,D=e.getViewRoot(),A=d.getPathToRoot(D);if("treemapMove"!==T){var P="treemapZoomToNode"===T?function(e,t,o,i,r){var n,a=(t||{}).node,s=[i,r];if(!a||a===o)return s;var d=i*r,h=d*e.option.zoomToNodeRatio;for(;n=a.parentNode;){for(var u=0,c=n.children,p=0,f=c.length;p<f;p++)u+=c[p].getValue();var v=a.getValue();if(0===v)return s;h*=u/v;var m=n.getModel(),y=m.get(g),x=Math.max(y,I(m));(h+=4*y*y+(3*y+x)*Math.pow(h,.5))>l&&(h=l),a=n}h<d&&(h=d);var w=Math.pow(h/d,.5);return[i*w,r*w]}(e,L,D,M,S):R?[R.width,R.height]:[M,S],C=y.sort;C&&"asc"!==C&&"desc"!==C&&(C="desc");var V={squareRatio:y.squareRatio,sort:C,leafDepth:y.leafDepth};D.hostTree.clearLayouts();var k={x:0,y:0,width:P[0],height:P[1],area:P[0]*P[1]};D.setLayout(k),function e(t,o,i,r){var n,a;if(t.isRemoved())return;var l=t.getLayout();n=l.width,a=l.height;var s=(y=t.getModel()).get(g),d=y.get(f)/2,c=I(y),p=Math.max(s,c),v=s-d,m=p-d,y=t.getModel();t.setLayout({borderWidth:s,upperHeight:p,upperLabelHeight:c},!0),n=h(n-2*v,0),a=h(a-v-m,0);var b=n*a,N=x(t,y,b,o,i,r);if(!N.length)return;var M={x:v,y:m,width:n,height:a},S=u(n,a),T=1/0,L=[];L.area=0;for(var R=0,D=N.length;R<D;){var A=N[R];L.push(A),L.area+=A.getLayout().area;var P=w(L,S,o.squareRatio);P<=T?(R++,T=P):(L.area-=L.pop().getLayout().area,_(L,S,M,d,!1),S=u(M.width,M.height),L.length=L.area=0,T=1/0)}L.length&&_(L,S,M,d,!0);if(!i){var C=y.get("childrenVisibleMin");null!=C&&b<C&&(i=!0)}for(R=0,D=N.length;R<D;R++)e(N[R],o,i,r+1)}(D,V,!1,0);k=D.getLayout();p(A,(function(e,t){var o=(A[t+1]||D).getValue();e.setLayout(i.extend({dataExtent:[o,o],borderWidth:0,upperHeight:0},k))}))}var E=e.getData().tree.root;E.setLayout(function(e,t,o){if(t)return{x:t.x,y:t.y};var i={x:0,y:0};if(!o)return i;var r=o.node,n=r.getLayout();if(!n)return i;var a=[n.width/2,n.height/2],l=r;for(;l;){var s=l.getLayout();a[0]+=s.x,a[1]+=s.y,l=l.parentNode}return{x:e.width/2-a[0],y:e.height/2-a[1]}}(b,R,L),!0),e.setLayoutInfo(b),function e(t,o,i,n,a){var l=t.getLayout(),s=i[a],d=s&&s===t;if(s&&!d||a===i.length&&t!==n)return;t.setLayout({isInView:!0,invisible:!d&&!o.intersect(l),isAboveViewRoot:d},!0);var h=new r(o.x-l.x,o.y-l.y,o.width,o.height);p(t.viewChildren||[],(function(t){e(t,h,i,n,a+1)}))}(E,new r(-b.x,-b.y,v,m),A,D,0)}};function x(e,t,o,r,n,a){var l=e.children||[],s=r.sort;"asc"!==s&&"desc"!==s&&(s=null);var d=null!=r.leafDepth&&r.leafDepth<=a;if(n&&!d)return e.viewChildren=[];!function(e,t){t&&e.sort((function(e,o){var i="asc"===t?e.getValue()-o.getValue():o.getValue()-e.getValue();return 0===i?"asc"===t?e.dataIndex-o.dataIndex:o.dataIndex-e.dataIndex:i}))}(l=i.filter(l,(function(e){return!e.isRemoved()})),s);var h=function(e,t,o){for(var i=0,r=0,n=t.length;r<n;r++)i+=t[r].getValue();var a=e.get("visualDimension");if(t&&t.length)if("value"===a&&o)l=[t[t.length-1].getValue(),t[0].getValue()],"asc"===o&&l.reverse();else{var l=[1/0,-1/0];p(t,(function(e){var t=e.getValue(a);t<l[0]&&(l[0]=t),t>l[1]&&(l[1]=t)}))}else l=[NaN,NaN];return{sum:i,dataExtent:l}}(t,l,s);if(0===h.sum)return e.viewChildren=[];if(h.sum=function(e,t,o,i,r){if(!i)return o;for(var n=e.get("visibleMin"),a=r.length,l=a,s=a-1;s>=0;s--){var d=r["asc"===i?a-s-1:s].getValue();d/o*t<n&&(l=s,o-=d)}return"asc"===i?r.splice(0,a-l):r.splice(l,a-l),o}(t,o,h.sum,s,l),0===h.sum)return e.viewChildren=[];for(var u=0,c=l.length;u<c;u++){var g=l[u].getValue()/h.sum*o;l[u].setLayout({area:g})}return d&&(l.length&&e.setLayout({isLeafRoot:!0},!0),l.length=0),e.viewChildren=l,e.setLayout({dataExtent:h.dataExtent},!0),l}function w(e,t,o){for(var i,r=0,n=1/0,a=0,l=e.length;a<l;a++)(i=e[a].getLayout().area)&&(i<n&&(n=i),i>r&&(r=i));var s=e.area*e.area,d=t*t*o;return s?h(d*r/s,s/(d*n)):1/0}function _(e,t,o,i,r){var n=t===o.width?0:1,a=1-n,l=["x","y"],s=["width","height"],d=o[l[n]],c=t?e.area/t:0;(r||c>o[s[a]])&&(c=o[s[a]]);for(var p=0,g=e.length;p<g;p++){var f=e[p],v={},m=c?f.getLayout().area/c:0,y=v[s[a]]=h(c-2*i,0),x=o[l[n]]+o[s[n]]-d,w=p===g-1||x<m?x:m,_=v[s[n]]=h(w-2*i,0);v[l[a]]=o[l[a]]+u(i,y/2),v[l[n]]=d+u(i,_/2),d+=w,f.setLayout(v,!0)}o[l[a]]+=c,o[s[a]]-=c}function I(e){return e.get(v)?e.get(m):0}e.exports=y},46188:(e,t,o)=>{var i=o(59937),r=o(21092),n=o(33051),a=n.isArray,l={seriesType:"treemap",reset:function(e,t,o,a){var l=e.getData().tree.root;l.isRemoved()||function e(t,o,a,l){var d=t.getModel(),u=t.getLayout();if(!u||u.invisible||!u.isInView)return;var c,p=t.getModel("itemStyle"),g=function(e,t,o){var i=n.extend({},t),r=o.designatedVisualItemStyle;return n.each(["color","colorAlpha","colorSaturation"],(function(o){r[o]=t[o];var n=e.get(o);r[o]=null,null!=n&&(i[o]=n)})),i}(p,o,l),f=p.get("borderColor"),v=p.get("borderColorSaturation");null!=v&&(c=s(g),f=function(e,t){return null!=t?r.modifyHSL(t,null,null,e):null}(v,c));t.setVisual("borderColor",f);var m=t.viewChildren;if(m&&m.length){var y=function(e,t,o,r,n,a){if(!a||!a.length)return;var l=h(t,"color")||null!=n.color&&"none"!==n.color&&(h(t,"colorAlpha")||h(t,"colorSaturation"));if(!l)return;var s=t.get("visualMin"),d=t.get("visualMax"),u=o.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=d&&d>u[1]&&(u[1]=d);var c=t.get("colorMappingBy"),p={type:l.name,dataExtent:u,visual:l.range};"color"!==p.type||"index"!==c&&"id"!==c?p.mappingMethod="linear":(p.mappingMethod="category",p.loop=!0);var g=new i(p);return g.__drColorMappingBy=c,g}(0,d,u,0,g,m);n.each(m,(function(t,o){if(t.depth>=a.length||t===a[t.depth]){var i=function(e,t,o,i,r,a){var l=n.extend({},t);if(r){var s=r.type,d="color"===s&&r.__drColorMappingBy,h="index"===d?i:"id"===d?a.mapIdToIndex(o.getId()):o.getValue(e.get("visualDimension"));l[s]=r.mapValueToVisual(h)}return l}(d,g,t,o,y,l);e(t,i,a,l)}}))}else c=s(g),t.setVisual("color",c)}(l,{},e.getViewRoot().getAncestors(),e)}};function s(e){var t=d(e,"color");if(t){var o=d(e,"colorAlpha"),i=d(e,"colorSaturation");return i&&(t=r.modifyHSL(t,null,null,i)),o&&(t=r.modifyAlpha(t,o)),t}}function d(e,t){var o=e[t];if(null!=o&&"none"!==o)return o}function h(e,t){var o=e.get(t);return a(o)&&o.length?{name:t,range:o}:null}e.exports=l}}]);