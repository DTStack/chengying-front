"use strict";(self.webpackChunkdt_em_front=self.webpackChunkdt_em_front||[]).push([[9933],{37208:(e,t,i)=>{i.d(t,{F:()=>r,G:()=>d});var o,n=i(38626),s=i(50072);class r{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(0===this.getCount())return null;const i=this.getStartLineNumber(),o=this.getEndLineNumber();if(t<i){const i=t-e+1;return this._rendLineNumberStart-=i,null}if(e>o)return null;let n=0,s=0;for(let r=i;r<=o;r++){const i=r-this._rendLineNumberStart;e<=r&&r<=t&&(0===s?(n=i,s=1):s++)}if(e<i){let o=0;o=t<i?t-e+1:i-e,this._rendLineNumberStart-=o}return this._lines.splice(n,s)}onLinesChanged(e,t){if(0===this.getCount())return!1;const i=this.getStartLineNumber(),o=this.getEndLineNumber();let n=!1;for(let s=e;s<=t;s++)s>=i&&s<=o&&(this._lines[s-this._rendLineNumberStart].onContentChanged(),n=!0);return n}onLinesInserted(e,t){if(0===this.getCount())return null;const i=t-e+1,o=this.getStartLineNumber(),n=this.getEndLineNumber();if(e<=o)return this._rendLineNumberStart+=i,null;if(e>n)return null;if(i+e>n){return this._lines.splice(e-this._rendLineNumberStart,n-e+1)}const s=[];for(let e=0;e<i;e++)s[e]=this._createLine();const r=e-this._rendLineNumberStart,d=this._lines.slice(0,r),a=this._lines.slice(r,this._lines.length-i),h=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=d.concat(s).concat(a),h}onTokensChanged(e){if(0===this.getCount())return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let o=!1;for(let n=0,s=e.length;n<s;n++){const s=e[n];if(s.toLineNumber<t||s.fromLineNumber>i)continue;const r=Math.max(t,s.fromLineNumber),d=Math.min(i,s.toLineNumber);for(let e=r;e<=d;e++){const t=e-this._rendLineNumberStart;this._lines[t].onTokensChanged(),o=!0}}return o}}class d{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new r(()=>this._host.createVisibleLine())}_createDomNode(){const e=(0,n.X)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(130)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let e=0,i=t.length;e<i;e++){const i=t[e].getDomNode();i&&this.domNode.domNode.removeChild(i)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let e=0,i=t.length;e<i;e++){const i=t[e].getDomNode();i&&this.domNode.domNode.removeChild(i)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new a(this.domNode.domNode,this._host,e),o={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},n=i.render(o,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(n.rendLineNumberStart,n.lines)}}class a{constructor(e,t,i){this.domNode=e,this.host=t,this.viewportData=i}render(e,t,i,o){const n={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(n.rendLineNumberStart+n.linesLength-1<t||i<n.rendLineNumberStart){n.rendLineNumberStart=t,n.linesLength=i-t+1,n.lines=[];for(let e=t;e<=i;e++)n.lines[e-t]=this.host.createVisibleLine();return this._finishRendering(n,!0,o),n}if(this._renderUntouchedLines(n,Math.max(t-n.rendLineNumberStart,0),Math.min(i-n.rendLineNumberStart,n.linesLength-1),o,t),n.rendLineNumberStart>t){const e=t,s=Math.min(i,n.rendLineNumberStart-1);e<=s&&(this._insertLinesBefore(n,e,s,o,t),n.linesLength+=s-e+1)}else if(n.rendLineNumberStart<t){const e=Math.min(n.linesLength,t-n.rendLineNumberStart);e>0&&(this._removeLinesBefore(n,e),n.linesLength-=e)}if(n.rendLineNumberStart=t,n.rendLineNumberStart+n.linesLength-1<i){const e=n.rendLineNumberStart+n.linesLength,s=i;e<=s&&(this._insertLinesAfter(n,e,s,o,t),n.linesLength+=s-e+1)}else if(n.rendLineNumberStart+n.linesLength-1>i){const e=Math.max(0,i-n.rendLineNumberStart+1),t=n.linesLength-1-e+1;t>0&&(this._removeLinesAfter(n,t),n.linesLength-=t)}return this._finishRendering(n,!1,o),n}_renderUntouchedLines(e,t,i,o,n){const s=e.rendLineNumberStart,r=e.lines;for(let e=t;e<=i;e++){const t=s+e;r[e].layoutLine(t,o[t-n])}}_insertLinesBefore(e,t,i,o,n){const s=[];let r=0;for(let e=t;e<=i;e++)s[r++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const t=e.lines[i].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,o,n){const s=[];let r=0;for(let e=t;e<=i;e++)s[r++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let o=0;o<t;o++){const t=e.lines[i+o].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,o){a._ttPolicy&&(i=a._ttPolicy.createHTML(i));const n=this.domNode.lastChild;t||!n?this.domNode.innerHTML=i:n.insertAdjacentHTML("afterend",i);let s=this.domNode.lastChild;for(let t=e.linesLength-1;t>=0;t--){const i=e.lines[t];o[t]&&(i.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const o=document.createElement("div");a._ttPolicy&&(t=a._ttPolicy.createHTML(t)),o.innerHTML=t;for(let t=0;t<e.linesLength;t++){const n=e.lines[t];if(i[t]){const e=o.firstChild,t=n.getDomNode();t.parentNode.replaceChild(e,t),n.setDomNode(e)}}}_finishRendering(e,t,i){const o=a._sb,n=e.linesLength,s=e.lines,r=e.rendLineNumberStart,d=[];{o.reset();let a=!1;for(let e=0;e<n;e++){const t=s[e];d[e]=!1;if(t.getDomNode())continue;t.renderLine(e+r,i[e],this.viewportData,o)&&(d[e]=!0,a=!0)}a&&this._finishRenderingNewLines(e,t,o.build(),d)}{o.reset();let t=!1;const a=[];for(let e=0;e<n;e++){const n=s[e];if(a[e]=!1,d[e])continue;n.renderLine(e+r,i[e],this.viewportData,o)&&(a[e]=!0,t=!0)}t&&this._finishRenderingInvalidLines(e,o.build(),a)}}}a._ttPolicy=null===(o=window.trustedTypes)||void 0===o?void 0:o.createPolicy("editorViewLayer",{createHTML:e=>e}),a._sb=(0,s.l$)(1e5)},86130:(e,t,i)=>{i.d(t,{E:()=>s,K:()=>r});var o=i(38626),n=i(15679);class s extends n.O{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class r{static write(e,t){o.Z,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return null===t?0:parseInt(t,10)}static collect(e,t){let i=[],o=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[o++]=this.read(e)),e=e.parentElement;const n=new Uint8Array(o);for(let e=0;e<o;e++)n[e]=i[o-e-1];return n}}},57354:(e,t,i)=>{i.d(t,{Gm:()=>ye});i(33085);var o=i(63580),n=i(65321),s=i(17301),r=i(4669),d=i(9917),a=i(66663),h=i(89052),l=i(16830),u=i(11640),c=i(16268),g=i(3860),m=i(38626),_=i(77145),f=i(9848),p=i(71513),v=i(50187),w=i(1432);class C{constructor(e,t,i,o){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=o}paste(e,t,i,o){this.commandDelegate.paste(e,t,i,o)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,o){this.commandDelegate.compositionType(e,t,i,o)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){p.Ox.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new v.L(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=w.IJ&&t.get(95),o=t.get(18);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):2===e.mouseDownCount?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||o?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){p.Ox.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){p.Ox.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,i){e=this._validateViewColumn(e),p.Ox.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),p.Ox.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){p.Ox.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){p.Ox.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){p.Ox.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){p.Ox.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){p.Ox.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){p.Ox.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){p.Ox.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){p.Ox.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){p.Ox.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}var D=i(97650);class b{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return b.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new L(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class L{constructor(e,t,i,o,n,s){this.element=e,this.type=t,this.mouseColumn=i,this.position=o,this.range=n,this.detail=s}toString(){return D.ZP.toString(this)}}var N=i(37208),S=i(86130);class E extends S.E{constructor(e){super(e),this._visibleLines=new N.G(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new y(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=t;o<=i;o++){this._visibleLines.getVisibleLine(o).onConfigurationChanged(e)}return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(e=>e.shouldRender());for(let i=0,o=t.length;i<o;i++){const o=t[i];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class y{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=(0,m.X)(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,i,o){let n="";for(let t=0,o=this._dynamicOverlays.length;t<o;t++){n+=this._dynamicOverlays[t].render(i.startLineNumber,e)}return this._renderedContent!==n&&(this._renderedContent=n,o.appendASCIIString('<div style="position:absolute;top:'),o.appendASCIIString(String(t)),o.appendASCIIString("px;width:100%;height:"),o.appendASCIIString(String(this._lineHeight)),o.appendASCIIString('px;">'),o.appendASCIIString(n),o.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class M extends E{constructor(e){super(e);const t=this._context.configuration.options.get(130);this._contentWidth=t.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const t=this._context.configuration.options.get(130);return this._contentWidth=t.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class R extends E{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(130);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),h.V.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){const t=this._context.configuration.options;h.V.applyFontInfo(this.domNode,t.get(43));const i=t.get(130);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}var x=i(62682),I=i(27270),T=i(10511),O=i(66406),W=i(1732),P=i(7094),V=i(97270),F=i(46417),A=i(20264),H=i(66527),k=i(52371),U=i(25079),z=i(63731),Z=i(80965),B=i(55170),K=i(74550),q=i(19563),$=i(47028),j=i(22007),Q=i(8108),G=i(24314),X=i(53890),J=i(31923),Y=i(63664),ee=i(15679),te=i(97781);class ie extends ee.O{constructor(e,t,i,o,n,s){super(),this._selections=[new g.Y(1,1,1,1)],this._renderAnimationFrame=null;const r=new C(t,o,n,e);this._context=new J.A(t,i.getColorTheme(),o),this._configPixelRatio=this._context.configuration.options.get(128),this._context.addEventHandler(this),this._register(i.onDidColorThemeChange(e=>{this._context.theme.update(e),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new f.H(this._context,r,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=(0,m.X)(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=(0,m.X)(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=(0,m.X)(document.createElement("div")),S.K.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new O.E(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new F.U(this._context,this._linesContent),this._viewZones=new Q.q(this._context),this._viewParts.push(this._viewZones);const d=new Z.p(this._context);this._viewParts.push(d);const a=new q.X(this._context);this._viewParts.push(a);const h=new M(this._context);this._viewParts.push(h),h.addDynamicOverlay(new I.BX(this._context)),h.addDynamicOverlay(new $.K(this._context)),h.addDynamicOverlay(new P.R(this._context)),h.addDynamicOverlay(new T.r(this._context));const l=new R(this._context);this._viewParts.push(l),l.addDynamicOverlay(new I.gM(this._context)),l.addDynamicOverlay(new W.c4(this._context)),l.addDynamicOverlay(new k.X(this._context)),l.addDynamicOverlay(new A.U(this._context)),l.addDynamicOverlay(new V.x(this._context));const u=new H.Z(this._context);u.getDomNode().appendChild(this._viewZones.marginDomNode),u.getDomNode().appendChild(l.getDomNode()),this._viewParts.push(u),this._contentWidgets=new x.Y(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new j.o(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new z.c(this._context),this._viewParts.push(this._overlayWidgets);const c=new K.b(this._context);this._viewParts.push(c);const p=new U.N(this._context);if(this._viewParts.push(p),d){const e=this._scrollbar.getOverviewRulerLayoutInfo();e.parent.insertBefore(d.getDomNode(),e.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(c.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(a.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),s?s.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new _.a(this._context,r,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new D.sB(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new v.L(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new v.L(e,t)))}}_applyLayout(){const e=this._context.configuration.options.get(130);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(127)+" "+(0,te.m6)(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(128),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){null===this._renderAnimationFrame&&(this._renderAnimationFrame=n.lI(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){!function(e){try{e()}catch(e){(0,s.dL)(e)}}(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_actualRender(){if(!n.Uw(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&0===e.length)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new Y.x(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const o=new X.xh(this._context.viewLayout,i,this._viewLines);for(const t of e)t.prepareRender(o);for(const t of e)t.render(o),t.onDidRender();Math.abs(c.getPixelRatio()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const i=this._context.model.validateModelPosition({lineNumber:e,column:t}),o=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const n=this._viewLines.visibleRangeForPosition(new v.L(o.lineNumber,o.column));return n?n.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?b.convertViewToModelMouseTarget(i,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new B.V(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const e of this._viewParts)e.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(null===t){const i=e.position?e.position.position:null;null!==i&&(t=new G.e(i.lineNumber,i.column,i.lineNumber,i.column))}const i=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,i),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}var oe=i(64141),ne=i(48006),se=i(33181),re=i(30653),de=i(96518),ae=i(29102),he=i(44101),le=i(27869),ue=i(73910),ce=i(50931),ge=i(94565),me=i(38819),_e=i(72065),fe=i(60972),pe=i(59422),ve=i(31106),we=i(98401),Ce=i(68263),De=i(22525),be=i(5795),Le=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Ne=function(e,t){return function(i,o){t(i,o,e)}};let Se=0;class Ee{constructor(e,t,i,o,n){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=o,this.listenersToRemove=n}dispose(){(0,d.B9)(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let ye=class e extends d.JT{constructor(e,t,i,o,n,d,a,h,u,c){super(),this._onDidDispose=this._register(new r.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new r.Q5),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new r.Q5),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new r.Q5),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new r.Q5),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new r.Q5),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new r.Q5),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new r.Q5),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new r.Q5),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new r.Q5),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new r.Q5),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new r.Q5),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Me),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Me),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new r.Q5),this.onWillType=this._onWillType.event,this._onDidType=this._register(new r.Q5),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new r.Q5),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new r.Q5),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new r.Q5),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new r.Q5),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new r.Q5),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new r.Q5),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new r.Q5),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new r.Q5),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new r.Q5),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new r.Q5),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new r.Q5),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new r.Q5),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new r.Q5),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new r.Q5),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new r.Q5),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new r.Q5),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new r.Q5),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new r.Q5),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null;const g=Object.assign({},t);let m;this._domElement=e,this._overflowWidgetsDomNode=g.overflowWidgetsDomNode,delete g.overflowWidgetsDomNode,this._id=++Se,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=i.isSimpleWidget||!1,this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(g,c)),this._register(this._configuration.onDidChange(e=>{this._onDidChangeConfiguration.fire(e);const t=this._configuration.options;if(e.hasChanged(130)){const e=t.get(130);this._onDidLayoutChange.fire(e)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=u,this._codeEditorService=n,this._commandService=d,this._themeService=h,this._register(new Re(this,this._contextKeyService)),this._register(new xe(this,this._contextKeyService)),this._instantiationService=o.createChild(new fe.y([me.i6,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new Ie(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},m=Array.isArray(i.contributions)?i.contributions:l.Uc.getEditorContributions();for(const e of m)if(this._contributions[e.id])(0,s.dL)(new Error("Cannot have two contributions with the same id "+e.id));else try{const t=this._instantiationService.createInstance(e.ctor,this);this._contributions[e.id]=t}catch(e){(0,s.dL)(e)}l.Uc.getEditorActions().forEach(e=>{if(this._actions[e.id])return void(0,s.dL)(new Error("Cannot have two actions with the same id "+e.id));const t=new re.p(e.id,e.label,e.alias,(0,we.f6)(e.precondition),()=>this._instantiationService.invokeFunction(t=>Promise.resolve(e.runEditorCommand(t,this,null))),this._contextKeyService);this._actions[t.id]=t}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new h.V(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return de.g.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,i=e.length;t<i;t++){const i=e[t];this._contributions[i].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?be.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(116),e):null}getValue(e=null){if(!this._modelData)return"";const t=!(!e||!e.preserveBOM);let i=0;return e&&e.lineEnding&&"\n"===e.lineEnding?i=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(null===this._modelData&&null===t)return;if(this._modelData&&this._modelData.model===t)return;const i=this.hasTextFocus(),o=this._detachModel();this._attachModel(t),i&&this.hasModel()&&this.focus();const n={oldModelUrl:o?o.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(n),this._postDetachModelCleanup(o)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,i){const o=e.model.validatePosition({lineNumber:t,column:i}),n=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)}getTopForLineNumber(t){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,t,1):-1}getTopForPosition(t,i){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,t,i):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(e=>G.e.lift(e)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return se.io.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!v.L.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,o){if(!this._modelData)return;if(!G.e.isIRange(e))throw new Error("Invalid arguments");const n=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(n);this._modelData.viewModel.revealRange("api",i,s,t,o)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if("number"!=typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new G.e(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,o){if(!v.L.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new G.e(e.lineNumber,e.column,e.lineNumber,e.column),t,i,o)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=g.Y.isISelection(e),i=G.e.isIRange(e);if(!t&&!i)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(i){const t={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(t)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new g.Y(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,o){if("number"!=typeof e||"number"!=typeof t)throw new Error("Invalid arguments");this._sendRevealRange(new G.e(e,1,t,1),i,!1,o)}revealRange(e,t=0,i=!1,o=!0){this._revealRange(e,i?1:0,o,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,o){if(!G.e.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(G.e.lift(e),t,i,o)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(let t=0,i=e.length;t<i;t++)if(!g.Y.isISelection(e[t]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if("number"!=typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if("number"!=typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const i of t){const t=this._contributions[i];"function"==typeof t.saveViewState&&(e[i]=t.saveViewState())}return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const e=t.cursorState;Array.isArray(e)?this._modelData.viewModel.restoreCursorState(e):this._modelData.viewModel.restoreCursorState([e]);const i=t.contributionsState||{},o=Object.keys(this._contributions);for(let e=0,t=o.length;e<t;e++){const t=o[e],n=this._contributions[t];"function"==typeof n.restoreViewState&&n.restoreViewState(i[t])}const n=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(n)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let i=0,o=t.length;i<o;i++){const o=t[i];e.push(this._actions[o])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(e=>e.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,i){switch(i=i||{},t){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":{const t=i;return void this._type(e,t.text||"")}case"replacePreviousChar":{const t=i;return void this._compositionType(e,t.text||"",t.replaceCharCnt||0,0,0)}case"compositionType":{const t=i;return void this._compositionType(e,t.text||"",t.replacePrevCharCnt||0,t.replaceNextCharCnt||0,t.positionDelta||0)}case"paste":{const t=i;return void this._paste(e,t.text||"",t.pasteOnNewLine||!1,t.multicursorText||null,t.mode||null)}case"cut":return void this._cut(e)}const o=this.getAction(t);o?Promise.resolve(o.run()).then(void 0,s.dL):this._modelData&&(this._triggerEditorCommand(e,t,i)||this._triggerCommand(t,i))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){this._modelData&&0!==t.length&&("keyboard"===e&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),"keyboard"===e&&this._onDidType.fire(t))}_compositionType(e,t,i,o,n){this._modelData&&this._modelData.viewModel.compositionType(t,i,o,n,e)}_paste(e,t,i,o,n){if(!this._modelData||0===t.length)return;const s=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,i,o,e);const r=this._modelData.viewModel.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new G.e(s.lineNumber,s.column,r.lineNumber,r.column),languageId:n})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const o=l.Uc.getEditorCommand(t);return!!o&&((i=i||{}).source=e,this._instantiationService.invokeFunction(e=>{Promise.resolve(o.runEditorCommand(e,this,i)).then(void 0,s.dL)}),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&(!this._configuration.options.get(80)&&(this._modelData.model.pushStackElement(),!0))}popUndoStop(){return!!this._modelData&&(!this._configuration.options.get(80)&&(this._modelData.model.popStackElement(),!0))}executeEdits(e,t,i){if(!this._modelData)return!1;if(this._configuration.options.get(80))return!1;let o;return o=i?Array.isArray(i)?()=>i:i:()=>null,this._modelData.viewModel.executeEdits(e,t,o),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,oe.$J)(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?0===e.length&&0===t.length?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(130)}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarMouseDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const e=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId()),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const e=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,t):null}getScrolledVisiblePosition(t){if(!this._modelData||!this._modelData.hasRealView)return null;const i=this._modelData.model.validatePosition(t),o=this._configuration.options,n=o.get(130);return{top:e._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft(),height:o.get(58)}}getOffsetForColumn(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,t):-1}render(e=!1){this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){h.V.applyFontInfoSlow(e,this._configuration.options.get(43))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.reserveHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e)return void(this._modelData=null);const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const i=new ce.j(this._id,this._configuration,e,De.C.create(),Ce.p.create(this._configuration.options),e=>n.jL(e));t.push(e.onDidChangeDecorations(e=>this._onDidChangeModelDecorations.fire(e))),t.push(e.onDidChangeLanguage(t=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(t)})),t.push(e.onDidChangeLanguageConfiguration(e=>this._onDidChangeModelLanguageConfiguration.fire(e))),t.push(e.onDidChangeContent(e=>this._onDidChangeModelContent.fire(e))),t.push(e.onDidChangeOptions(e=>this._onDidChangeModelOptions.fire(e))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(i.onEvent(e=>{switch(e.kind){case 0:this._onDidContentSizeChange.fire(e);break;case 1:this._editorTextFocus.setValue(e.hasFocus);break;case 2:this._onDidScrollChange.fire(e);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{e.reachedMaxCursorCount&&this._notificationService.warn(o.N("cursors.maximum","The number of cursors has been limited to {0}.",ne.U.MAX_CURSOR_COUNT));const t=[];for(let i=0,o=e.selections.length;i<o;i++)t[i]=e.selections[i].getPosition();const i={position:t[0],secondaryPositions:t.slice(1),reason:e.reason,source:e.source};this._onDidChangeCursorPosition.fire(i);const n={selection:e.selections[0],secondarySelections:e.selections.slice(1),modelVersionId:e.modelVersionId,oldSelections:e.oldSelections,oldModelVersionId:e.oldModelVersionId,source:e.source,reason:e.reason};this._onDidChangeCursorSelection.fire(n);break}}}));const[s,r]=this._createView(i);if(r){this._domElement.appendChild(s.domNode.domNode);let t=Object.keys(this._contentWidgets);for(let e=0,i=t.length;e<i;e++){const i=t[e];s.addContentWidget(this._contentWidgets[i])}t=Object.keys(this._overlayWidgets);for(let e=0,i=t.length;e<i;e++){const i=t[e];s.addOverlayWidget(this._overlayWidgets[i])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new Ee(e,i,s,r,t)}_createView(e){let t;t=this.isSimpleWidget?{paste:(e,t,i,o)=>{this._paste("keyboard",e,t,i,o)},type:e=>{this._type("keyboard",e)},compositionType:(e,t,i,o)=>{this._compositionType("keyboard",e,t,i,o)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,t,i,o)=>{const n={text:e,pasteOnNewLine:t,multicursorText:i,mode:o};this._commandService.executeCommand("paste",n)},type:e=>{const t={text:e};this._commandService.executeCommand("type",t)},compositionType:(e,t,i,o)=>{if(i||o){const n={text:e,replacePrevCharCnt:t,replaceNextCharCnt:i,positionDelta:o};this._commandService.executeCommand("compositionType",n)}else{const i={text:e,replaceCharCnt:t};this._commandService.executeCommand("replacePreviousChar",i)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new b(e.coordinatesConverter);i.onKeyDown=e=>this._onKeyDown.fire(e),i.onKeyUp=e=>this._onKeyUp.fire(e),i.onContextMenu=e=>this._onContextMenu.fire(e),i.onMouseMove=e=>this._onMouseMove.fire(e),i.onMouseLeave=e=>this._onMouseLeave.fire(e),i.onMouseDown=e=>this._onMouseDown.fire(e),i.onMouseUp=e=>this._onMouseUp.fire(e),i.onMouseDrag=e=>this._onMouseDrag.fire(e),i.onMouseDrop=e=>this._onMouseDrop.fire(e),i.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),i.onMouseWheel=e=>this._onMouseWheel.fire(e);return[new ie(t,this._configuration,this._themeService,e,i,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}};ye=Le([Ne(3,_e.TG),Ne(4,u.$),Ne(5,ge.Hy),Ne(6,me.i6),Ne(7,te.XE),Ne(8,pe.lT),Ne(9,ve.F)],ye);class Me extends d.JT{constructor(){super(),this._onDidChangeToTrue=this._register(new r.Q5),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new r.Q5),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}class Re extends d.JT{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=ae.u.editorSimpleInput.bindTo(t),this._editorFocus=ae.u.focus.bindTo(t),this._textInputFocus=ae.u.textInputFocus.bindTo(t),this._editorTextFocus=ae.u.editorTextFocus.bindTo(t),this._editorTabMovesFocus=ae.u.tabMovesFocus.bindTo(t),this._editorReadonly=ae.u.readOnly.bindTo(t),this._inDiffEditor=ae.u.inDiffEditor.bindTo(t),this._editorColumnSelection=ae.u.columnSelection.bindTo(t),this._hasMultipleSelections=ae.u.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=ae.u.hasNonEmptySelection.bindTo(t),this._canUndo=ae.u.canUndo.bindTo(t),this._canRedo=ae.u.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(129)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(e=>!e.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class xe extends d.JT{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=ae.u.languageId.bindTo(t),this._hasCompletionItemProvider=ae.u.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=ae.u.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=ae.u.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=ae.u.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=ae.u.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=ae.u.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=ae.u.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=ae.u.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=ae.u.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=ae.u.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=ae.u.hasReferenceProvider.bindTo(t),this._hasRenameProvider=ae.u.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=ae.u.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=ae.u.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=ae.u.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=ae.u.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=ae.u.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=ae.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=ae.u.isInWalkThroughSnippet.bindTo(t);const i=()=>this._update();this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(he.KZ.onDidChange(i)),this._register(he.H9.onDidChange(i)),this._register(he.He.onDidChange(i)),this._register(he.Ct.onDidChange(i)),this._register(he.RN.onDidChange(i)),this._register(he.vI.onDidChange(i)),this._register(he.tA.onDidChange(i)),this._register(he.xp.onDidChange(i)),this._register(he.vH.onDidChange(i)),this._register(he.vJ.onDidChange(i)),this._register(he.FL.onDidChange(i)),this._register(he.G0.onDidChange(i)),this._register(he.Az.onDidChange(i)),this._register(he.vN.onDidChange(i)),this._register(he.nD.onDidChange(i)),this._register(he.mX.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();e?this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(he.KZ.has(e)),this._hasCodeActionsProvider.set(he.H9.has(e)),this._hasCodeLensProvider.set(he.He.has(e)),this._hasDefinitionProvider.set(he.Ct.has(e)),this._hasDeclarationProvider.set(he.RN.has(e)),this._hasImplementationProvider.set(he.vI.has(e)),this._hasTypeDefinitionProvider.set(he.tA.has(e)),this._hasHoverProvider.set(he.xp.has(e)),this._hasDocumentHighlightProvider.set(he.vH.has(e)),this._hasDocumentSymbolProvider.set(he.vJ.has(e)),this._hasReferenceProvider.set(he.FL.has(e)),this._hasRenameProvider.set(he.G0.has(e)),this._hasSignatureHelpProvider.set(he.nD.has(e)),this._hasInlayHintsProvider.set(he.mX.has(e)),this._hasDocumentFormattingProvider.set(he.Az.has(e)||he.vN.has(e)),this._hasDocumentSelectionFormattingProvider.set(he.vN.has(e)),this._hasMultipleDocumentFormattingProvider.set(he.Az.all(e).length+he.vN.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(he.vN.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===a.lg.walkThroughSnippet)}):this.reset()}}class Ie extends d.JT{constructor(e){super(),this._onChange=this._register(new r.Q5),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(n.go(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const Te=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Oe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function We(e){return Te+encodeURIComponent(e.toString())+Oe}const Pe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),Ve=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,te.Ic)((e,t)=>{const i=e.getColor(ue.b6y);i&&t.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${i}; }`);const o=e.getColor(ue.lXJ);o&&t.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${We(o)}") repeat-x bottom left; }`);const n=e.getColor(ue.L_H);n&&t.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${n}; }`);const s=e.getColor(ue.pW3);s&&t.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${s}; }`);const r=e.getColor(ue.uoC);r&&t.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${We(r)}") repeat-x bottom left; }`);const d=e.getColor(ue.gpD);d&&t.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${d}; }`);const a=e.getColor(ue.T83);a&&t.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${a}; }`);const h=e.getColor(ue.c63);h&&t.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${We(h)}") repeat-x bottom left; }`);const l=e.getColor(ue.few);l&&t.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${l}; }`);const u=e.getColor(ue.fEB);u&&t.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${u}; }`);const c=e.getColor(ue.Dut);var g;c&&t.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${g=c,Pe+encodeURIComponent(g.toString())+Ve}") no-repeat bottom left; }`);const m=e.getColor(le.zu);m&&t.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${m.rgba.a}; }`);const _=e.getColor(le.kp);_&&t.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${_}; }`);const f=e.getColor(ue.NOs)||"inherit";t.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${f}}`)})},68143:(e,t,i)=>{i.d(t,{p:()=>_e});var o,n=i(63580),s=i(65321),r=i(38626),d=i(73098),a=i(15393),h=i(4669),l=i(9917),u=i(89052),c=i(39925),g=i(11640),m=i(57354),_=i(90317),f=i(9802),p=i(74741),v=i(16830),w=i(64141),C=i(78411),D=i(50187),b=i(27869),L=i(77736),N=i(13824),S=i(38819),E=i(73910),y=i(97781),M=i(73046),R=i(59554),x=i(71531),I=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},T=function(e,t){return function(i,o){t(i,o,e)}},O=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function d(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,d)}a((o=o.apply(e,t||[])).next())}))};class W{constructor(e,t,i,o){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=i,this.modifiedLineEnd=o}getType(){return 0===this.originalLineStart?1:0===this.modifiedLineStart?2:0}}class P{constructor(e){this.entries=e}}const V=(0,R.q5)("diff-review-insert",M.lA.add,n.N("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),F=(0,R.q5)("diff-review-remove",M.lA.remove,n.N("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),A=(0,R.q5)("diff-review-close",M.lA.close,n.N("diffReviewCloseIcon","Icon for 'Close' in diff review."));let H=class e extends l.JT{constructor(e,t){super(),this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=(0,r.X)(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=(0,r.X)(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new _.o(this.actionBarContainer.domNode)),this._actionBar.push(new p.aU("diffreview.close",n.N("label.close","Close"),"close-diff-review "+y.kS.asClassName(A),!0,()=>O(this,void 0,void 0,(function*(){return this.hide()}))),{label:!1,icon:!0}),this.domNode=(0,r.X)(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=(0,r.X)(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new f.s$(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(s.mu(this.domNode.domNode,"click",e=>{e.preventDefault();let t=s.Fx(e.target,"diff-review-row");t&&this._goToRow(t)})),this._register(s.mu(this.domNode.domNode,"keydown",e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._goToRow(this._getNextRow())),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._goToRow(this._getPrevRow())),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this.hide()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let t=-1;for(let e=0,i=this._diffs.length;e<i;e++)if(this._diffs[e]===this._currentDiff){t=e;break}e=this._diffs.length+t-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0===this._diffs.length)return;e%=this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new D.L(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let t=-1;for(let e=0,i=this._diffs.length;e<i;e++)if(this._diffs[e]===this._currentDiff){t=e;break}e=t+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0===this._diffs.length)return;e%=this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new D.L(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let i=parseInt(t.getAttribute("data-line"),10);isNaN(i)||(e=i)}this.hide(),-1!==e&&(this._diffEditor.setPosition(new D.L(e,1)),this._diffEditor.revealPosition(new D.L(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,i){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(i),this._content.setHeight(i),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const t=this._diffEditor.getLineChanges();if(!t||0===t.length)return[];const i=this._diffEditor.getOriginalEditor().getModel(),o=this._diffEditor.getModifiedEditor().getModel();return i&&o?e._mergeAdjacent(t,i.getLineCount(),o.getLineCount()):[]}static _mergeAdjacent(e,t,i){if(!e||0===e.length)return[];let o=[],n=0;for(let s=0,r=e.length;s<r;s++){const d=e[s],a=d.originalStartLineNumber,h=d.originalEndLineNumber,l=d.modifiedStartLineNumber,u=d.modifiedEndLineNumber;let c=[],g=0;{const t=0===h?a:a-1,i=0===u?l:l-1;let o=1,n=1;if(s>0){const t=e[s-1];o=0===t.originalEndLineNumber?t.originalStartLineNumber+1:t.originalEndLineNumber+1,n=0===t.modifiedEndLineNumber?t.modifiedStartLineNumber+1:t.modifiedEndLineNumber+1}let r=t-3+1,d=i-3+1;if(r<o){const e=o-r;r+=e,d+=e}if(d<n){const e=n-d;r+=e,d+=e}c[g++]=new W(r,t,d,i)}0!==h&&(c[g++]=new W(a,h,0,0)),0!==u&&(c[g++]=new W(0,0,l,u));{const o=0===h?a+1:h+1,n=0===u?l+1:u+1;let d=t,m=i;if(s+1<r){const t=e[s+1];d=0===t.originalEndLineNumber?t.originalStartLineNumber:t.originalStartLineNumber-1,m=0===t.modifiedEndLineNumber?t.modifiedStartLineNumber:t.modifiedStartLineNumber-1}let _=o+3-1,f=n+3-1;if(_>d){const e=d-_;_+=e,f+=e}if(f>m){const e=m-f;_+=e,f+=e}c[g++]=new W(o,_,n,f)}o[n++]=new P(c)}let s=o[0].entries,r=[],d=0;for(let e=1,t=o.length;e<t;e++){const t=o[e].entries,i=s[s.length-1],n=t[0];0===i.getType()&&0===n.getType()&&n.originalLineStart<=i.originalLineEnd?(s[s.length-1]=new W(i.originalLineStart,n.originalLineEnd,i.modifiedLineStart,n.modifiedLineEnd),s=s.concat(t.slice(1))):(r[d++]=new P(s),s=t)}return r[d++]=new P(s),r}_findDiffIndex(e){const t=e.lineNumber;for(let e=0,i=this._diffs.length;e<i;e++){const i=this._diffs[e].entries;if(t<=i[i.length-1].modifiedLineEnd)return e}return 0}_render(){const t=this._diffEditor.getOriginalEditor().getOptions(),i=this._diffEditor.getModifiedEditor().getOptions(),o=this._diffEditor.getOriginalEditor().getModel(),r=this._diffEditor.getModifiedEditor().getModel(),d=o.getOptions(),a=r.getOptions();if(!this._isVisible||!o||!r)return s.PO(this._content.domNode),this._currentDiff=null,void this.scrollbar.scanDomNode();this._diffEditor.updateOptions({readOnly:!0});const h=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[h]===this._currentDiff)return;this._currentDiff=this._diffs[h];const l=this._diffs[h].entries;let c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),u.V.applyFontInfoSlow(c,i.get(43));let g=0,m=0,_=0,f=0;for(let e=0,t=l.length;e<t;e++){const t=l[e],i=t.originalLineStart,o=t.originalLineEnd,n=t.modifiedLineStart,s=t.modifiedLineEnd;0!==i&&(0===g||i<g)&&(g=i),0!==o&&(0===m||o>m)&&(m=o),0!==n&&(0===_||n<_)&&(_=n),0!==s&&(0===f||s>f)&&(f=s)}let p=document.createElement("div");p.className="diff-review-row";let v=document.createElement("div");v.className="diff-review-cell diff-review-summary";const w=m-g+1,C=f-_+1;v.appendChild(document.createTextNode(`${h+1}/${this._diffs.length}: @@ -${g},${w} +${_},${C} @@`)),p.setAttribute("data-line",String(_));const D=e=>0===e?n.N("no_lines_changed","no lines changed"):1===e?n.N("one_line_changed","1 line changed"):n.N("more_lines_changed","{0} lines changed",e),b=D(w),L=D(C);p.setAttribute("aria-label",n.N({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",h+1,this._diffs.length,g,b,_,L)),p.appendChild(v),p.setAttribute("role","listitem"),c.appendChild(p);const N=i.get(58);let S=_;for(let n=0,s=l.length;n<s;n++){const s=l[n];e._renderSection(c,s,S,N,this._width,t,o,d,i,r,a,this._modeService.languageIdCodec),0!==s.modifiedLineStart&&(S=s.modifiedLineEnd)}s.PO(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(t,i,o,s,r,d,a,h,l,u,c,g){const m=i.getType();let _="diff-review-row",f="";let p=null;switch(m){case 1:_="diff-review-row line-insert",f=" char-insert",p=V;break;case 2:_="diff-review-row line-delete",f=" char-delete",p=F}const v=i.originalLineStart,w=i.originalLineEnd,C=i.modifiedLineStart,D=i.modifiedLineEnd,b=Math.max(D-C,w-v),L=d.get(130),N=L.glyphMarginWidth+L.lineNumbersWidth,S=l.get(130),E=10+S.glyphMarginWidth+S.lineNumbersWidth;for(let i=0;i<=b;i++){const w=0===v?0:v+i,D=0===C?0:C+i,b=document.createElement("div");b.style.minWidth=r+"px",b.className=_,b.setAttribute("role","listitem"),0!==D&&(o=D),b.setAttribute("data-line",String(o));let L=document.createElement("div");L.className="diff-review-cell",L.style.height=s+"px",b.appendChild(L);const S=document.createElement("span");S.style.width=N+"px",S.style.minWidth=N+"px",S.className="diff-review-line-number"+f,0!==w?S.appendChild(document.createTextNode(String(w))):S.innerText=" ",L.appendChild(S);const M=document.createElement("span");M.style.width=E+"px",M.style.minWidth=E+"px",M.style.paddingRight="10px",M.className="diff-review-line-number"+f,0!==D?M.appendChild(document.createTextNode(String(D))):M.innerText=" ",L.appendChild(M);const R=document.createElement("span");if(R.className="diff-review-spacer",p){const e=document.createElement("span");e.className=y.kS.asClassName(p),e.innerText="  ",R.appendChild(e)}else R.innerText="  ";let x;if(L.appendChild(R),0!==D){let t=this._renderLine(u,l,c.tabSize,D,g);e._ttPolicy&&(t=e._ttPolicy.createHTML(t)),L.insertAdjacentHTML("beforeend",t),x=u.getLineContent(D)}else{let t=this._renderLine(a,d,h.tabSize,w,g);e._ttPolicy&&(t=e._ttPolicy.createHTML(t)),L.insertAdjacentHTML("beforeend",t),x=a.getLineContent(w)}0===x.length&&(x=n.N("blankLine","blank"));let I="";switch(m){case 0:I=w===D?n.N({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",x,w):n.N("equalLine","{0} original line {1} modified line {2}",x,w,D);break;case 1:I=n.N("insertLine","+ {0} modified line {1}",x,D);break;case 2:I=n.N("deleteLine","- {0} original line {1}",x,w)}b.setAttribute("aria-label",I),t.appendChild(b)}}static _renderLine(e,t,i,o,n){const s=e.getLineContent(o),r=t.get(43),d=C.A.createEmpty(s,n),a=N.wA.isBasicASCII(s,e.mightContainNonBasicASCII()),h=N.wA.containsRTL(s,a,e.mightContainRTL());return(0,L.tF)(new L.IJ(r.isMonospace&&!t.get(29),r.canUseHalfwidthRightwardsArrow,s,!1,a,h,0,d,[],i,0,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==w.n0.OFF,null)).html}};H._ttPolicy=null===(o=window.trustedTypes)||void 0===o?void 0:o.createPolicy("diffReview",{createHTML:e=>e}),H=I([T(1,x.h)],H),(0,y.Ic)((e,t)=>{const i=e.getColor(b.hw);i&&t.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${i}; }`);const o=e.getColor(E._wn);o&&t.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${o} 0 -6px 6px -6px inset; }`)});class k extends v.R6{constructor(){super({id:"editor.action.diffReview.next",label:n.N("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:S.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const i=z(e);i&&i.diffReviewNext()}}class U extends v.R6{constructor(){super({id:"editor.action.diffReview.prev",label:n.N("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:S.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const i=z(e);i&&i.diffReviewPrev()}}function z(e){const t=e.get(g.$),i=t.listDiffEditors(),o=t.getActiveCodeEditor();if(!o)return null;for(let e=0,t=i.length;e<t;e++){const t=i[e];if(t.getModifiedEditor().getId()===o.getId()||t.getOriginalEditor().getId()===o.getId())return t}return null}(0,v.Qr)(k),(0,v.Qr)(U);var Z=i(24314),B=i(50072),K=i(96518),q=i(75425),$=i(90469),j=i(92003),Q=i(92550),G=i(72065),X=i(60972),J=i(59422),Y=i(5606),ee=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function d(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,d)}a((o=o.apply(e,t||[])).next())}))};class te extends l.JT{constructor(e,t,i,o,r,d){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=i,this.diff=o,this._contextMenuService=r,this._clipboardService=d,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=M.lA.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=i.getOption(58),h=i.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=a+"px",this._diffActions.style.lineHeight=a+"px",this._marginDomNode.appendChild(this._diffActions);const l=[],u=0===o.modifiedEndLineNumber;l.push(new p.aU("diff.clipboard.copyDeletedContent",u?o.originalEndLineNumber>o.modifiedStartLineNumber?n.N("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):n.N("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):o.originalEndLineNumber>o.modifiedStartLineNumber?n.N("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):n.N("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>ee(this,void 0,void 0,(function*(){const e=new Z.e(o.originalStartLineNumber,1,o.originalEndLineNumber+1,1),t=o.originalModel.getValueInRange(e);yield this._clipboardService.writeText(t)}))));let c=0,g=void 0;o.originalEndLineNumber>o.modifiedStartLineNumber&&(g=new p.aU("diff.clipboard.copyDeletedLineContent",u?n.N("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",o.originalStartLineNumber):n.N("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",o.originalStartLineNumber),void 0,!0,()=>ee(this,void 0,void 0,(function*(){const e=o.originalModel.getLineContent(o.originalStartLineNumber+c);if(""===e){const e=o.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(0===e?"\n":"\r\n")}else yield this._clipboardService.writeText(e)}))),l.push(g));i.getOption(80)||l.push(new p.aU("diff.inline.revertChange",n.N("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>ee(this,void 0,void 0,(function*(){const e=new Z.e(o.originalStartLineNumber,1,o.originalEndLineNumber,o.originalModel.getLineMaxColumn(o.originalEndLineNumber)),t=o.originalModel.getValueInRange(e);if(0===o.modifiedEndLineNumber){const e=i.getModel().getLineMaxColumn(o.modifiedStartLineNumber);i.executeEdits("diffEditor",[{range:new Z.e(o.modifiedStartLineNumber,e,o.modifiedStartLineNumber,e),text:h+t}])}else{const e=i.getModel().getLineMaxColumn(o.modifiedEndLineNumber);i.executeEdits("diffEditor",[{range:new Z.e(o.modifiedStartLineNumber,1,o.modifiedEndLineNumber,e),text:t}])}}))));const m=(e,t)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:e,y:t}),getActions:()=>(g&&(g.label=u?n.N("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",o.originalStartLineNumber+c):n.N("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",o.originalStartLineNumber+c)),l),autoSelectFirstItem:!0})};this._register(s.mu(this._diffActions,"mousedown",e=>{const{top:t,height:i}=s.i(this._diffActions);let o=Math.floor(a/3);e.preventDefault(),m(e.posx,t+i+o)})),this._register(i.onMouseMove(e=>{if(8===e.target.type||5===e.target.type){e.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,c=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,a)):this.visibility=!1}else this.visibility=!1})),this._register(i.onMouseDown(e=>{if(e.event.rightButton&&(8===e.target.type||5===e.target.type)){e.target.detail.viewZoneId===this._viewZoneId&&(e.event.preventDefault(),c=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,a),m(e.event.posx,e.event.posy+a))}}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}_updateLightBulbPosition(e,t,i){const{top:o}=s.i(e),n=t-o,r=Math.floor(n/i),d=r*i;if(this._diffActions.style.top=d+"px",this.diff.viewLineCounts){let e=0;for(let t=0;t<this.diff.viewLineCounts.length;t++)if(e+=this.diff.viewLineCounts[t],r<e)return t}return r}}var ie,oe=i(84972),ne=i(17301),se=i(90535),re=i(54534),de=i(96542),ae=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},he=function(e,t){return function(i,o){t(i,o,e)}};class le{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(e=>!this._zonesMap[String(e.id)])}clean(e){this._zones.length>0&&e.changeViewZones(e=>{for(const t of this._zones)e.removeZone(t)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,i,o){const n=o?c.ZF.capture(e):null;e.changeViewZones(t=>{var o;for(const e of this._zones)t.removeZone(e);for(const e of this._inlineDiffMargins)e.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let n=0,s=i.zones.length;n<s;n++){const s=i.zones[n];s.suppressMouseDown=!0;const r=t.addZone(s);this._zones.push(r),this._zonesMap[String(r)]=!0,i.zones[n].diff&&s.marginDomNode&&(s.suppressMouseDown=!1,0!==(null===(o=i.zones[n].diff)||void 0===o?void 0:o.originalModel.getValueLength())&&this._inlineDiffMargins.push(new te(r,s.marginDomNode,e,i.zones[n].diff,this._contextMenuService,this._clipboardService)))}}),n&&n.restore(e),this._decorations=e.deltaDecorations(this._decorations,i.decorations),t&&t.setZones(i.overviewZones)}}let ue=0;const ce=(0,R.q5)("diff-insert",M.lA.add,n.N("diffInsertIcon","Line decoration for inserts in the diff editor.")),ge=(0,R.q5)("diff-remove",M.lA.remove,n.N("diffRemoveIcon","Line decoration for removals in the diff editor.")),me=null===(ie=window.trustedTypes)||void 0===ie?void 0:ie.createPolicy("diffEditorWidget",{createHTML:e=>e});let _e=class e extends l.JT{constructor(t,i,o,n,d,l,u,c,g,m,_,f){super(),this._editorProgressService=f,this._onDidDispose=this._register(new h.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new h.Q5),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new h.Q5),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=d,this._codeEditorService=c,this._contextKeyService=this._register(l.createScoped(t)),this._instantiationService=u.createChild(new X.y([S.i6,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=g,this._notificationService=m,this._id=++ue,this._state=0,this._updatingDiffProgress=null,this._domElement=t,i=i||{},this._options=Re(i,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),void 0!==i.isInEmbeddedEditor?this._contextKeyService.createKey("isInEmbeddedDiffEditor",i.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new a.pY(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=(0,r.X)(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(s.mu(this._overviewDomElement,"mousedown",e=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(e)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new le(_,n),this._modifiedEditorState=new le(_,n),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new re.I(this._containerDomElement,i.dimension,()=>this._onDidContainerSizeChanged())),i.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(i,o.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(i,o.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=u.createInstance(H,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new De(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new Le(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(g.onDidColorThemeChange(t=>{this._strategy&&this._strategy.applyColors(t)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const p=v.Uc.getDiffEditorContributions();for(const e of p)try{this._register(u.createInstance(e.ctor,this))}catch(e){(0,ne.dL)(e)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),1===this._state&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let i="monaco-diff-editor monaco-editor-background ";return t&&(i+="side-by-side "),i+=(0,y.m6)(e.type),i}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(t,i){const o=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(t),i);this._register(o.onDidScrollChange(e=>{this._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(o.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(o.onDidChangeConfiguration(e=>{o.getModel()&&(e.hasChanged(43)&&this._updateDecorationsRunner.schedule(),e.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(o.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(o.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const n=this._contextKeyService.createKey("isInDiffLeftEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget(()=>n.set(!0))),this._register(o.onDidBlurEditorWidget(()=>n.set(!1))),this._register(o.onDidContentSizeChange(t=>{const i=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+e.ONE_OVERVIEW_WIDTH,o=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:o,contentWidth:i,contentHeightChanged:t.contentHeightChanged,contentWidthChanged:t.contentWidthChanged})})),o}_createRightHandSideEditor(t,i){const o=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(t),i);this._register(o.onDidScrollChange(e=>{this._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(o.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(o.onDidChangeConfiguration(e=>{o.getModel()&&(e.hasChanged(43)&&this._updateDecorationsRunner.schedule(),e.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(o.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(o.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(o.onDidChangeModelOptions(e=>{e.tabSize&&this._updateDecorationsRunner.schedule()}));const n=this._contextKeyService.createKey("isInDiffRightEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget(()=>n.set(!0))),this._register(o.onDidBlurEditorWidget(()=>n.set(!1))),this._register(o.onDidContentSizeChange(t=>{const i=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+e.ONE_OVERVIEW_WIDTH,o=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:o,contentWidth:i,contentHeightChanged:t.contentHeightChanged,contentWidthChanged:t.contentWidthChanged})})),o}_createInnerEditor(e,t,i,o){return e.createInstance(m.Gm,t,i,o)}dispose(){this._codeEditorService.removeDiffEditor(this),-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return K.g.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(t){const i=Re(t,this._options),o=(n=this._options,s=i,{enableSplitViewResizing:n.enableSplitViewResizing!==s.enableSplitViewResizing,renderSideBySide:n.renderSideBySide!==s.renderSideBySide,maxComputationTime:n.maxComputationTime!==s.maxComputationTime,maxFileSize:n.maxFileSize!==s.maxFileSize,ignoreTrimWhitespace:n.ignoreTrimWhitespace!==s.ignoreTrimWhitespace,renderIndicators:n.renderIndicators!==s.renderIndicators,originalEditable:n.originalEditable!==s.originalEditable,diffCodeLens:n.diffCodeLens!==s.diffCodeLens,renderOverviewRuler:n.renderOverviewRuler!==s.renderOverviewRuler,diffWordWrap:n.diffWordWrap!==s.diffWordWrap});var n,s;this._options=i;const r=o.ignoreTrimWhitespace||o.renderIndicators,d=this._isVisible&&(o.maxComputationTime||o.maxFileSize);r?this._beginUpdateDecorations():d&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(t)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(t)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),o.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new De(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new Le(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),o.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,i=0){this._modifiedEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._modifiedEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._modifiedEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,o=!0){this._modifiedEditor.revealRange(e,t,i,o)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){return{original:this._originalEditor.saveViewState(),modified:this._modifiedEditor.saveViewState()}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,i){this._modifiedEditor.trigger(e,t,i)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler)return;if(!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const t=this._elementSizeObserver.getHeight(),i=this._getReviewHeight(),o=e.ENTIRE_DIFF_OVERVIEW_WIDTH-2*e.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:e.ONE_OVERVIEW_WIDTH,right:o+e.ONE_OVERVIEW_WIDTH,height:t-i}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:e.ONE_OVERVIEW_WIDTH,height:t-i}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),e.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t||!(!e||!t)&&e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const t=this._originalEditor.getModel(),i=this._modifiedEditor.getModel();if(!t||!i)return;this._diffComputationToken++;const o=this._diffComputationToken,s=1024*this._options.maxFileSize*1024,r=e=>{const t=e.getValueLength();return 0===s||t<=s};r(t)&&r(i)?(this._setState(1),this._editorWorkerService.computeDiff(t.uri,i.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(e=>{o===this._diffComputationToken&&t===this._originalEditor.getModel()&&i===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=e,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},e=>{o===this._diffComputationToken&&t===this._originalEditor.getModel()&&i===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})):e._equals(t.uri,this._lastOriginalWarning)&&e._equals(i.uri,this._lastModifiedWarning)||(this._lastOriginalWarning=t.uri,this._lastModifiedWarning=i.uri,this._notificationService.warn(n.N("diff.tooLarge","Cannot compare files because one file is too large.")))}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),i=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),o=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,i);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,o.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,o.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.wordWrapOverride1=this._options.diffWordWrap,i.revealHorizontalRightPadding=w.BH.revealHorizontalRightPadding.defaultValue+e.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},i),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const t=this._elementSizeObserver.getWidth(),i=this._elementSizeObserver.getHeight(),o=this._getReviewHeight(),n=this._strategy.layout();this._originalDomNode.style.width=n+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=t-n+"px",this._modifiedDomNode.style.left=n+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=i-o+"px",this._overviewDomElement.style.width=e.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=t-e.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(e.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:n,height:i-o}),this._modifiedEditor.layout({width:t-n-(this._options.renderOverviewRuler?e.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:i-o}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(i-o,t,o),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),i=this._modifiedEditor.getScrollHeight(),o=Math.max(0,e.height),n=Math.max(0,o-0),s=i>0?n/i:0;return{height:Math.max(0,Math.floor(e.height*s)),top:Math.floor(t*s)}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const i=this._diffComputationResult?this._diffComputationResult.changes:[];if(0===i.length||e<t(i[0]))return null;let o=0,n=i.length-1;for(;o<n;){const s=Math.floor((o+n)/2),r=t(i[s]),d=s+1<=n?t(i[s+1]):1073741824;e<r?n=s-1:e>=d?o=s+1:(o=s,n=s)}return i[o]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,e=>e.originalStartLineNumber);if(!t)return e;const i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),o=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),n=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,r=e-i;return r<=n?o+Math.min(r,s):o+s-n+r}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,e=>e.modifiedStartLineNumber);if(!t)return e;const i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),o=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),n=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,r=e-o;return r<=s?i+Math.min(r,n):i+n-s+r}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};_e.ONE_OVERVIEW_WIDTH=15,_e.ENTIRE_DIFF_OVERVIEW_WIDTH=30,_e.UPDATE_DIFF_DECORATIONS_DELAY=200,_e=ae([he(3,oe.p),he(4,$.p),he(5,S.i6),he(6,G.TG),he(7,g.$),he(8,y.XE),he(9,J.lT),he(10,Y.i),he(11,se.ek)],_e);class fe extends l.JT{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(E.ypS)||E.CzK).transparent(2),i=(e.getColor(E.P4M)||E.keg).transparent(2),o=!t.equals(this._insertColor)||!i.equals(this._removeColor);return this._insertColor=t,this._removeColor=i,o}getEditorsDiffDecorations(e,t,i,o,n){n=n.sort((e,t)=>e.afterLineNumber-t.afterLineNumber),o=o.sort((e,t)=>e.afterLineNumber-t.afterLineNumber);const s=this._getViewZones(e,o,n,i),r=this._getOriginalEditorDecorations(e,t,i),d=this._getModifiedEditorDecorations(e,t,i);return{original:{decorations:r.decorations,overviewZones:r.overviewZones,zones:s.original},modified:{decorations:d.decorations,overviewZones:d.overviewZones,zones:s.modified}}}}class pe{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class ve{constructor(e,t,i,o,n){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=i,this._originalEditor=o,this._modifiedEditor=n}static _getViewLineCount(e,t,i){const o=e.getModel(),n=e._getViewModel();if(o&&n){const e=Me(o,n,t,i);return e.endLineNumber-e.startLineNumber+1}return i-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),i=-1!==this._originalEditor.getOption(131).wrappingColumn,o=-1!==this._modifiedEditor.getOption(131).wrappingColumn,n=i||o,s=this._originalEditor.getModel(),r=this._originalEditor._getViewModel().coordinatesConverter,d=this._modifiedEditor._getViewModel().coordinatesConverter,a=[],h=[];let l=0,u=0,c=0,g=0,m=0,_=0;const f=(e,t)=>e.afterLineNumber-t.afterLineNumber,p=(e,t)=>{if(null===t.domNode&&e.length>0){const i=e[e.length-1];if(i.afterLineNumber===t.afterLineNumber&&null===i.domNode)return void(i.heightInLines+=t.heightInLines)}e.push(t)},v=new pe(this._modifiedForeignVZ),w=new pe(this._originalForeignVZ);let C=1,D=1;for(let i=0,o=this._lineChanges.length;i<=o;i++){const b=i<o?this._lineChanges[i]:null;null!==b?(c=b.originalStartLineNumber+(b.originalEndLineNumber>0?-1:0),g=b.modifiedStartLineNumber+(b.modifiedEndLineNumber>0?-1:0),u=b.originalEndLineNumber>0?ve._getViewLineCount(this._originalEditor,b.originalStartLineNumber,b.originalEndLineNumber):0,l=b.modifiedEndLineNumber>0?ve._getViewLineCount(this._modifiedEditor,b.modifiedStartLineNumber,b.modifiedEndLineNumber):0,m=Math.max(b.originalStartLineNumber,b.originalEndLineNumber),_=Math.max(b.modifiedStartLineNumber,b.modifiedEndLineNumber)):(c+=1e7+u,g+=1e7+l,m=c,_=g);let L=[],N=[];if(n){let e;e=b?b.originalEndLineNumber>0?b.originalStartLineNumber-C:b.modifiedStartLineNumber-D:s.getLineCount()-C;for(let t=0;t<e;t++){const e=C+t,i=D+t,o=r.getModelLineViewLineCount(e),n=d.getModelLineViewLineCount(i);o<n?L.push({afterLineNumber:e,heightInLines:n-o,domNode:null,marginDomNode:null}):o>n&&N.push({afterLineNumber:i,heightInLines:o-n,domNode:null,marginDomNode:null})}b&&(C=(b.originalEndLineNumber>0?b.originalEndLineNumber:b.originalStartLineNumber)+1,D=(b.modifiedEndLineNumber>0?b.modifiedEndLineNumber:b.modifiedStartLineNumber)+1)}for(;v.current&&v.current.afterLineNumber<=_;){let e;e=v.current.afterLineNumber<=g?c-g+v.current.afterLineNumber:m;let i=null;b&&b.modifiedStartLineNumber<=v.current.afterLineNumber&&v.current.afterLineNumber<=b.modifiedEndLineNumber&&(i=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),L.push({afterLineNumber:e,heightInLines:v.current.height/t,domNode:null,marginDomNode:i}),v.advance()}for(;w.current&&w.current.afterLineNumber<=m;){let t;t=w.current.afterLineNumber<=c?g-c+w.current.afterLineNumber:_,N.push({afterLineNumber:t,heightInLines:w.current.height/e,domNode:null}),w.advance()}if(null!==b&&Se(b)){const e=this._produceOriginalFromDiff(b,u,l);e&&L.push(e)}if(null!==b&&Ee(b)){const e=this._produceModifiedFromDiff(b,u,l);e&&N.push(e)}let S=0,E=0;for(L=L.sort(f),N=N.sort(f);S<L.length&&E<N.length;){const e=L[S],t=N[E],i=e.afterLineNumber-c,o=t.afterLineNumber-g;i<o?(p(a,e),S++):o<i?(p(h,t),E++):e.shouldNotShrink?(p(a,e),S++):t.shouldNotShrink?(p(h,t),E++):e.heightInLines>=t.heightInLines?(e.heightInLines-=t.heightInLines,E++):(t.heightInLines-=e.heightInLines,S++)}for(;S<L.length;)p(a,L[S]),S++;for(;E<N.length;)p(h,N[E]),E++}return{original:ve._ensureDomNodes(a),modified:ve._ensureDomNodes(h)}}static _ensureDomNodes(e){return e.map(e=>(e.domNode||(e.domNode=ye()),e))}}function we(e,t,i,o,n){return{range:new Z.e(e,t,i,o),options:n}}const Ce={charDelete:q.qx.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:q.qx.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:q.qx.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:q.qx.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:q.qx.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:q.qx.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+y.kS.asClassName(ce),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:q.qx.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:q.qx.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+y.kS.asClassName(ge),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:q.qx.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class De extends fe{constructor(e,t){super(e),this._disableSash=!1===t,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new d.g(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(e=>this._onSashDrag(e)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=!1===e;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const t=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?_e.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let i=Math.floor((e||.5)*t);const o=Math.floor(.5*t);return i=this._disableSash?o:i||o,t>2*De.MINIMUM_EDITOR_WIDTH?(i<De.MINIMUM_EDITOR_WIDTH&&(i=De.MINIMUM_EDITOR_WIDTH),i>t-De.MINIMUM_EDITOR_WIDTH&&(i=t-De.MINIMUM_EDITOR_WIDTH)):i=o,this._sashPosition!==i&&(this._sashPosition=i,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const t=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?_e.ENTIRE_DIFF_OVERVIEW_WIDTH:0),i=this.layout((this._startSashPosition+(e.currentX-e.startX))/t);this._sashRatio=i/t,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,i){const o=this._dataSource.getOriginalEditor(),n=this._dataSource.getModifiedEditor();return new be(e,t,i,o,n).getViewZones()}_getOriginalEditorDecorations(e,t,i){const o=this._dataSource.getOriginalEditor(),n=String(this._removeColor),s={decorations:[],overviewZones:[]},r=o.getModel(),d=o._getViewModel();for(const o of e)if(Ee(o)){s.decorations.push({range:new Z.e(o.originalStartLineNumber,1,o.originalEndLineNumber,1073741824),options:i?Ce.lineDeleteWithSign:Ce.lineDelete}),Se(o)&&o.charChanges||s.decorations.push(we(o.originalStartLineNumber,1,o.originalEndLineNumber,1073741824,Ce.charDeleteWholeLine));const e=Me(r,d,o.originalStartLineNumber,o.originalEndLineNumber);if(s.overviewZones.push(new j.EY(e.startLineNumber,e.endLineNumber,n)),o.charChanges)for(const e of o.charChanges)if(Ee(e))if(t)for(let t=e.originalStartLineNumber;t<=e.originalEndLineNumber;t++){let i,o;i=t===e.originalStartLineNumber?e.originalStartColumn:r.getLineFirstNonWhitespaceColumn(t),o=t===e.originalEndLineNumber?e.originalEndColumn:r.getLineLastNonWhitespaceColumn(t),s.decorations.push(we(t,i,t,o,Ce.charDelete))}else s.decorations.push(we(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn,Ce.charDelete))}return s}_getModifiedEditorDecorations(e,t,i){const o=this._dataSource.getModifiedEditor(),n=String(this._insertColor),s={decorations:[],overviewZones:[]},r=o.getModel(),d=o._getViewModel();for(const o of e)if(Se(o)){s.decorations.push({range:new Z.e(o.modifiedStartLineNumber,1,o.modifiedEndLineNumber,1073741824),options:i?Ce.lineInsertWithSign:Ce.lineInsert}),Ee(o)&&o.charChanges||s.decorations.push(we(o.modifiedStartLineNumber,1,o.modifiedEndLineNumber,1073741824,Ce.charInsertWholeLine));const e=Me(r,d,o.modifiedStartLineNumber,o.modifiedEndLineNumber);if(s.overviewZones.push(new j.EY(e.startLineNumber,e.endLineNumber,n)),o.charChanges)for(const e of o.charChanges)if(Se(e))if(t)for(let t=e.modifiedStartLineNumber;t<=e.modifiedEndLineNumber;t++){let i,o;i=t===e.modifiedStartLineNumber?e.modifiedStartColumn:r.getLineFirstNonWhitespaceColumn(t),o=t===e.modifiedEndLineNumber?e.modifiedEndColumn:r.getLineLastNonWhitespaceColumn(t),s.decorations.push(we(t,i,t,o,Ce.charInsert))}else s.decorations.push(we(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn,Ce.charInsert))}return s}}De.MINIMUM_EDITOR_WIDTH=100;class be extends ve{constructor(e,t,i,o,n){super(e,t,i,o,n)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,i){return i>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i-t,domNode:null}:null}_produceModifiedFromDiff(e,t,i){return t>i?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-i,domNode:null}:null}}class Le extends fe{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(t=>{this._decorationsLeft!==t.decorationsLeft&&(this._decorationsLeft=t.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,i,o){const n=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new Ne(e,t,i,n,s,o).getViewZones()}_getOriginalEditorDecorations(e,t,i){const o=String(this._removeColor),n={decorations:[],overviewZones:[]},s=this._dataSource.getOriginalEditor(),r=s.getModel(),d=s._getViewModel();for(const t of e)if(Ee(t)){n.decorations.push({range:new Z.e(t.originalStartLineNumber,1,t.originalEndLineNumber,1073741824),options:Ce.lineDeleteMargin});const e=Me(r,d,t.originalStartLineNumber,t.originalEndLineNumber);n.overviewZones.push(new j.EY(e.startLineNumber,e.endLineNumber,o))}return n}_getModifiedEditorDecorations(e,t,i){const o=this._dataSource.getModifiedEditor(),n=String(this._insertColor),s={decorations:[],overviewZones:[]},r=o.getModel(),d=o._getViewModel();for(const o of e)if(Se(o)){s.decorations.push({range:new Z.e(o.modifiedStartLineNumber,1,o.modifiedEndLineNumber,1073741824),options:i?Ce.lineInsertWithSign:Ce.lineInsert});const e=Me(r,d,o.modifiedStartLineNumber,o.modifiedEndLineNumber);if(s.overviewZones.push(new j.EY(e.startLineNumber,e.endLineNumber,n)),o.charChanges){for(const e of o.charChanges)if(Se(e))if(t)for(let t=e.modifiedStartLineNumber;t<=e.modifiedEndLineNumber;t++){let i,o;i=t===e.modifiedStartLineNumber?e.modifiedStartColumn:r.getLineFirstNonWhitespaceColumn(t),o=t===e.modifiedEndLineNumber?e.modifiedEndColumn:r.getLineLastNonWhitespaceColumn(t),s.decorations.push(we(t,i,t,o,Ce.charInsert))}else s.decorations.push(we(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn,Ce.charInsert))}else s.decorations.push(we(o.modifiedStartLineNumber,1,o.modifiedEndLineNumber,1073741824,Ce.charInsertWholeLine))}return s}layout(){return Math.max(5,this._decorationsLeft)}}class Ne extends ve{constructor(e,t,i,o,n,s){super(e,t,i,o,n),this._originalModel=o.getModel(),this._renderIndicators=s,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,i){const o=document.createElement("div");return o.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i,domNode:document.createElement("div"),marginDomNode:o}}_produceModifiedFromDiff(e,t,i){const o=document.createElement("div");o.className="view-lines line-delete "+de.S;const n=document.createElement("div");n.className="inline-deleted-margin-view-zone";const s={shouldNotShrink:!0,afterLineNumber:0===e.modifiedEndLineNumber?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:o,marginDomNode:n,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let t=e.originalStartLineNumber;t<=e.originalEndLineNumber;t++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(t),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(s),s}_finalize(e){const t=this._modifiedEditor.getOptions(),i=this._modifiedEditor.getModel().getOptions().tabSize,o=t.get(43),n=t.get(29),s=o.typicalHalfwidthCharacterWidth,r=t.get(92),d=this._originalModel.mightContainNonBasicASCII(),a=this._originalModel.mightContainRTL(),h=t.get(58),l=t.get(130).decorationsWidth,c=t.get(104),g=t.get(87),m=t.get(82),_=t.get(44),f=this._lineBreaksComputer.finalize();let p=0;for(let t=0;t<this._pendingLineChange.length;t++){const v=this._pendingLineChange[t],w=this._pendingViewZones[t],C=w.domNode;u.V.applyFontInfoSlow(C,o);const D=w.marginDomNode;u.V.applyFontInfoSlow(D,o);const b=[];if(v.charChanges)for(const e of v.charChanges)Ee(e)&&b.push(new N.$t(new Z.e(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),"char-delete",0));const L=b.length>0,S=(0,B.l$)(1e4);let E=0,y=0,M=null;for(let t=v.originalStartLineNumber;t<=v.originalEndLineNumber;t++){const s=t-v.originalStartLineNumber,r=this._originalModel.getLineTokens(t),u=r.getLineContent(),C=f[p++],N=Q.Kp.filter(b,t,1,u.length+1);if(C){let f=0;for(const e of C.breakOffsets){const t=r.sliceAndInflate(f,e,0),s=u.substring(f,e);E=Math.max(E,this._renderOriginalLine(y++,s,t,Q.Kp.extractWrapped(N,f,e),L,d,a,o,n,h,l,c,g,m,_,i,S,D)),f=e}for(M||(M=[]);M.length<s;)M[M.length]=1;M[s]=C.breakOffsets.length,w.heightInLines+=C.breakOffsets.length-1;const p=document.createElement("div");p.className="line-delete",e.original.push({afterLineNumber:t,afterColumn:0,heightInLines:C.breakOffsets.length-1,domNode:ye(),marginDomNode:p})}else E=Math.max(E,this._renderOriginalLine(y++,u,r,N,L,d,a,o,n,h,l,c,g,m,_,i,S,D))}E+=r;const R=S.build(),x=me?me.createHTML(R):R;if(C.innerHTML=x,w.minWidthInPx=E*s,M){const e=v.originalEndLineNumber-v.originalStartLineNumber;for(;M.length<=e;)M[M.length]=1}w.diff.viewLineCounts=M}e.original.sort((e,t)=>e.afterLineNumber-t.afterLineNumber)}_renderOriginalLine(e,t,i,o,n,s,r,d,a,h,l,u,c,g,m,_,f,p){f.appendASCIIString('<div class="view-line'),n||f.appendASCIIString(" char-delete"),f.appendASCIIString('" style="top:'),f.appendASCIIString(String(e*h)),f.appendASCIIString('px;width:1000000px;">');const v=N.wA.isBasicASCII(t,s),C=N.wA.containsRTL(t,v,r),D=(0,L.d1)(new L.IJ(d.isMonospace&&!a,d.canUseHalfwidthRightwardsArrow,t,!1,v,C,0,i,o,_,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,u,c,g,m!==w.n0.OFF,null),f);if(f.appendASCIIString("</div>"),this._renderIndicators){const t=document.createElement("div");t.className="delete-sign "+y.kS.asClassName(ge),t.setAttribute("style",`position:absolute;top:${e*h}px;width:${l}px;height:${h}px;right:0;`),p.appendChild(t)}return D.characterMapping.getAbsoluteOffset(D.characterMapping.length)}}function Se(e){return e.modifiedEndLineNumber>0}function Ee(e){return e.originalEndLineNumber>0}function ye(){const e=document.createElement("div");return e.className="diagonal-fill",e}function Me(e,t,i,o){const n=e.getLineCount();return i=Math.min(n,Math.max(1,i)),o=Math.min(n,Math.max(1,o)),t.coordinatesConverter.convertModelRangeToViewRange(new Z.e(i,e.getLineMinColumn(i),o,e.getLineMaxColumn(o)))}function Re(e,t){return{enableSplitViewResizing:(0,w.O7)(e.enableSplitViewResizing,t.enableSplitViewResizing),renderSideBySide:(0,w.O7)(e.renderSideBySide,t.renderSideBySide),maxComputationTime:(0,w.Zc)(e.maxComputationTime,t.maxComputationTime,0,1073741824),maxFileSize:(0,w.Zc)(e.maxFileSize,t.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,w.O7)(e.ignoreTrimWhitespace,t.ignoreTrimWhitespace),renderIndicators:(0,w.O7)(e.renderIndicators,t.renderIndicators),originalEditable:(0,w.O7)(e.originalEditable,t.originalEditable),diffCodeLens:(0,w.O7)(e.diffCodeLens,t.diffCodeLens),renderOverviewRuler:(0,w.O7)(e.renderOverviewRuler,t.renderOverviewRuler),diffWordWrap:(i=e.diffWordWrap,o=t.diffWordWrap,(0,w.NY)(i,o,["off","on","inherit"]))};var i,o}(0,y.Ic)((e,t)=>{const i=e.getColor(E.ypS);i&&(t.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${i}; }`),t.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${i}; }`),t.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${i}; }`));const o=e.getColor(E.P4M);o&&(t.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${o}; }`),t.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${o}; }`),t.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${o}; }`));const n=e.getColor(E.XL$);n&&t.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${"hc"===e.type?"dashed":"solid"} ${n}; }`);const s=e.getColor(E.mHy);s&&t.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${"hc"===e.type?"dashed":"solid"} ${s}; }`);const r=e.getColor(E._wn);r&&t.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${r}; }`);const d=e.getColor(E.LLc);d&&t.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${d}; }`);const a=e.getColor(E.etL);a&&t.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport {\n\t\t\t\tbackground: ${a};\n\t\t\t}\n\t\t`);const h=e.getColor(E.ABB);h&&t.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:hover {\n\t\t\t\tbackground: ${h};\n\t\t\t}\n\t\t`);const l=e.getColor(E.ynu);l&&t.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:active {\n\t\t\t\tbackground: ${l};\n\t\t\t}\n\t\t`);const u=e.getColor(E.L_t);t.addRule(`\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${u} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${u} 50%, ${u} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`)})},75623:(e,t,i)=>{i.d(t,{F:()=>h});var o=i(35146),n=i(4669),s=i(9917),r=i(36248),d=i(24314);const a={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class h extends s.JT{constructor(e,t={}){super(),this._onDidUpdate=this._register(new n.Q5),this._editor=e,this._options=r.jB(t,a,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(e=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(e=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&null!==this._editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(e=>{!this._options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach(e=>{this.ranges.push({rhs:!0,range:new d.e(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})}):0===e.modifiedEndLineNumber?this.ranges.push({rhs:!0,range:new d.e(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new d.e(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber+1,1)})}),this.ranges.sort((e,t)=>d.e.compareRangesUsingStarts(e.range,t.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,i=this._editor.getPosition();if(i){for(let o=0,n=this.ranges.length;o<n&&!t;o++){let n=this.ranges[o].range;i.isBeforeOrEqual(n.getStartPosition())&&(this.nextIdx=o+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}else this.nextIdx=0}_move(e,t){if(o.ok(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;-1===this.nextIdx?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let i=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let e=i.range.getStartPosition();this._editor.setPosition(e),this._editor.revealRangeInCenter(i.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}},84527:(e,t,i)=>{i.d(t,{H:()=>m});var o=i(36248),n=i(11640),s=i(57354),r=i(94565),d=i(38819),a=i(72065),h=i(59422),l=i(97781),u=i(31106),c=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},g=function(e,t){return function(i,o){t(i,o,e)}};let m=class extends s.Gm{constructor(e,t,i,o,n,s,r,d,a,h){super(e,Object.assign(Object.assign({},i.getRawOptions()),{overflowWidgetsDomNode:i.getOverflowWidgetsDomNode()}),{},o,n,s,r,d,a,h),this._parentEditor=i,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(i.onDidChangeConfiguration(e=>this._onParentConfigurationChanged(e)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){o.jB(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};m=c([g(3,a.TG),g(4,n.$),g(5,r.Hy),g(6,d.i6),g(7,l.XE),g(8,h.lT),g(9,u.F)],m)}}]);