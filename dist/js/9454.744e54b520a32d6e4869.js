(self.webpackChunkdt_em_front=self.webpackChunkdt_em_front||[]).push([[9454],{52755:(e,t,a)=>{var o=a(70492);a(6344),a(11243);var i=a(34586),n=a(21149);o.registerVisual(i("effectScatter","circle")),o.registerLayout(n("effectScatter"))},6344:(e,t,a)=>{var o=a(40488),i=a(93321).extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(e,t){return o(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});e.exports=i},11243:(e,t,a)=>{var o=a(70492),i=a(68162),n=a(53036),r=a(32892),s=a(21149),l=o.extendChartView({type:"effectScatter",init:function(){this._symbolDraw=new i(n)},render:function(e,t,a){var o=e.getData(),i=this._symbolDraw;i.updateData(o),this.group.add(i.group)},updateTransform:function(e,t,a){var o=e.getData();this.group.dirty();var i=s().reset(e);i.progress&&i.progress({start:0,end:o.count()},o),this._symbolDraw.updateLayout(o)},_updateGroupTransform:function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=r.clone(t.getRoamTransform()),this.group.decomposeTransform())},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(t)},dispose:function(){}});e.exports=l},66614:(e,t,a)=>{var o=a(70492);a(51711),a(54260);var i=a(69274),n=a(95378),r=a(22528);o.registerVisual(i("funnel")),o.registerLayout(n),o.registerProcessor(r("funnel"))},51711:(e,t,a)=>{var o=a(70492),i=a(33051),n=a(23263),r=a(32234).defaultEmphasis,s=a(61772).makeSeriesEncodeForNameBased,l=a(72019),u=o.extendSeriesModel({type:"series.funnel",init:function(e){u.superApply(this,"init",arguments),this.legendVisualProvider=new l(i.bind(this.getData,this),i.bind(this.getRawData,this)),this._defaultLabelLine(e)},getInitialData:function(e,t){return n(this,{coordDimensions:["value"],encodeDefaulter:i.curry(s,this)})},_defaultLabelLine:function(e){r(e,"labelLine",["show"]);var t=e.labelLine,a=e.emphasis.labelLine;t.show=t.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},getDataParams:function(e){var t=this.getData(),a=u.superCall(this,"getDataParams",e),o=t.mapDimension("value"),i=t.getSum(o);return a.percent=i?+(t.get(o,e)/i*100).toFixed(2):0,a.$vars.push("percent"),a},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}),c=u;e.exports=c},54260:(e,t,a)=>{var o=a(51177),i=a(33051),n=a(75797);function r(e,t){o.Group.call(this);var a=new o.Polygon,i=new o.Polyline,n=new o.Text;this.add(a),this.add(i),this.add(n),this.highDownOnUpdate=function(e,t){"emphasis"===t?(i.ignore=i.hoverIgnore,n.ignore=n.hoverIgnore):(i.ignore=i.normalIgnore,n.ignore=n.normalIgnore)},this.updateData(e,t,!0)}var s=r.prototype,l=["itemStyle","opacity"];s.updateData=function(e,t,a){var n=this.childAt(0),r=e.hostModel,s=e.getItemModel(t),u=e.getItemLayout(t),c=e.getItemModel(t).get(l);c=null==c?1:c,n.useStyle({}),a?(n.setShape({points:u.points}),n.setStyle({opacity:0}),o.initProps(n,{style:{opacity:c}},r,t)):o.updateProps(n,{style:{opacity:c},shape:{points:u.points}},r,t);var d=s.getModel("itemStyle"),h=e.getItemVisual(t,"color");n.setStyle(i.defaults({lineJoin:"round",fill:h},d.getItemStyle(["opacity"]))),n.hoverStyle=d.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),o.setHoverStyle(this)},s._updateLabel=function(e,t){var a=this.childAt(1),i=this.childAt(2),n=e.hostModel,r=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"color");o.updateProps(a,{shape:{points:s.linePoints||s.linePoints}},n,t),o.updateProps(i,{style:{x:s.x,y:s.y}},n,t),i.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var u=r.getModel("label"),c=r.getModel("emphasis.label"),d=r.getModel("labelLine"),h=r.getModel("emphasis.labelLine");l=e.getItemVisual(t,"color");o.setLabelStyle(i.style,i.hoverStyle={},u,c,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign}),i.ignore=i.normalIgnore=!u.get("show"),i.hoverIgnore=!c.get("show"),a.ignore=a.normalIgnore=!d.get("show"),a.hoverIgnore=!h.get("show"),a.setStyle({stroke:l}),a.setStyle(d.getModel("lineStyle").getLineStyle()),a.hoverStyle=h.getModel("lineStyle").getLineStyle()},i.inherits(r,o.Group);var u=n.extend({type:"funnel",render:function(e,t,a){var o=e.getData(),i=this._data,n=this.group;o.diff(i).add((function(e){var t=new r(o,e);o.setItemGraphicEl(e,t),n.add(t)})).update((function(e,t){var a=i.getItemGraphicEl(t);a.updateData(o,e),n.add(a),o.setItemGraphicEl(e,a)})).remove((function(e){var t=i.getItemGraphicEl(e);n.remove(t)})).execute(),this._data=o},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});e.exports=u},95378:(e,t,a)=>{a(38175).__DEV__;var o=a(76172),i=a(85669),n=i.parsePercent,r=i.linearMap;e.exports=function(e,t,a){e.eachSeriesByType("funnel",(function(e){var a=e.getData(),i=a.mapDimension("value"),s=e.get("sort"),l=function(e,t){return o.getLayoutRect(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t),u=function(e,t){for(var a=e.mapDimension("value"),o=e.mapArray(a,(function(e){return e})),i=[],n="ascending"===t,r=0,s=e.count();r<s;r++)i[r]=r;return"function"==typeof t?i.sort(t):"none"!==t&&i.sort((function(e,t){return n?o[e]-o[t]:o[t]-o[e]})),i}(a,s),c=e.get("orient"),d=l.width,h=l.height,p=l.x,g=l.y,f="horizontal"===c?[n(e.get("minSize"),h),n(e.get("maxSize"),h)]:[n(e.get("minSize"),d),n(e.get("maxSize"),d)],y=a.getDataExtent(i),m=e.get("min"),v=e.get("max");null==m&&(m=Math.min(y[0],0)),null==v&&(v=y[1]);var _=e.get("funnelAlign"),S=e.get("gap"),x=(("horizontal"===c?d:h)-S*(a.count()-1))/a.count(),I=function(e,t){if("horizontal"===c){var o,n=a.get(i,e)||0,s=r(n,[m,v],f,!0);switch(_){case"top":o=g;break;case"center":o=g+(h-s)/2;break;case"bottom":o=g+(h-s)}return[[t,o],[t,o+s]]}n=a.get(i,e)||0;var l,u=r(n,[m,v],f,!0);switch(_){case"left":l=p;break;case"center":l=p+(d-u)/2;break;case"right":l=p+d-u}return[[l,t],[l+u,t]]};"ascending"===s&&(x=-x,S=-S,"horizontal"===c?p+=d:g+=h,u=u.reverse());for(var b=0;b<u.length;b++){var w=u[b],L=u[b+1],D=a.getItemModel(w);if("horizontal"===c){var A=D.get("itemStyle.width");null==A?A=x:(A=n(A,d),"ascending"===s&&(A=-A));var M=I(w,p),C=I(L,p+A);p+=A+S,a.setItemLayout(w,{points:M.concat(C.slice().reverse())})}else{var N=D.get("itemStyle.height");null==N?N=x:(N=n(N,h),"ascending"===s&&(N=-N));M=I(w,"horizontal"===c?p:g),C=I(L,"horizontal"===c?p+A:g+N);g+=N+S,a.setItemLayout(w,{points:M.concat(C.slice().reverse())})}}!function(e){e.each((function(t){var a,o,i,n,r=e.getItemModel(t),s=r.getModel("label").get("position"),l=r.get("orient"),u=r.getModel("labelLine"),c=e.getItemLayout(t),d=c.points,h="inner"===s||"inside"===s||"center"===s||"insideLeft"===s||"insideRight"===s;if(h)"insideLeft"===s?(o=(d[0][0]+d[3][0])/2+5,i=(d[0][1]+d[3][1])/2,a="left"):"insideRight"===s?(o=(d[1][0]+d[2][0])/2-5,i=(d[1][1]+d[2][1])/2,a="right"):(o=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,i=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,a="center"),n=[[o,i],[o,i]];else{var p,g,f,y,m=u.get("length");"left"===s?(p=(d[3][0]+d[0][0])/2,g=(d[3][1]+d[0][1])/2,o=(f=p-m)-5,a="right"):"right"===s?(p=(d[1][0]+d[2][0])/2,g=(d[1][1]+d[2][1])/2,o=(f=p+m)+5,a="left"):"top"===s?(p=(d[3][0]+d[0][0])/2,i=(y=(g=(d[3][1]+d[0][1])/2)-m)-5,a="center"):"bottom"===s?(p=(d[1][0]+d[2][0])/2,i=(y=(g=(d[1][1]+d[2][1])/2)+m)+5,a="center"):"rightTop"===s?(p="horizontal"===l?d[3][0]:d[1][0],g="horizontal"===l?d[3][1]:d[1][1],"horizontal"===l?(i=(y=g-m)-5,a="center"):(o=(f=p+m)+5,a="top")):"rightBottom"===s?(p=d[2][0],g=d[2][1],"horizontal"===l?(i=(y=g+m)+5,a="center"):(o=(f=p+m)+5,a="bottom")):"leftTop"===s?(p=d[0][0],g="horizontal"===l?d[0][1]:d[1][1],"horizontal"===l?(i=(y=g-m)-5,a="center"):(o=(f=p-m)-5,a="right")):"leftBottom"===s?(p="horizontal"===l?d[1][0]:d[3][0],g="horizontal"===l?d[1][1]:d[2][1],"horizontal"===l?(i=(y=g+m)+5,a="center"):(o=(f=p-m)-5,a="right")):(p=(d[1][0]+d[2][0])/2,g=(d[1][1]+d[2][1])/2,"horizontal"===l?(i=(y=g+m)+5,a="center"):(o=(f=p+m)+5,a="left")),"horizontal"===l?o=f=p:i=y=g,n=[[p,g],[f,y]]}c.label={linePoints:n,x:o,y:i,verticalAlign:"middle",textAlign:a,inside:h}}))}(a)}))}},44553:(e,t,a)=>{var o=a(70492);a(55269),a(39107),a(89562);var i=a(60548),n=a(34586),r=a(19918),s=a(86733),l=a(41241),u=a(36846),c=a(6921),d=a(53081);o.registerProcessor(i),o.registerVisual(n("graph","circle",null)),o.registerVisual(r),o.registerVisual(s),o.registerLayout(l),o.registerLayout(o.PRIORITY.VISUAL.POST_CHART_LAYOUT,u),o.registerLayout(c),o.registerCoordinateSystem("graphView",{create:d})},55269:(e,t,a)=>{var o=a(70492),i=a(87587),n=a(33051),r=a(32234).defaultEmphasis,s=a(4272),l=a(78988).encodeHTML,u=a(19638),c=a(72019),d=a(11516),h=d.initCurvenessList,p=d.createEdgeMapForCurveness,g=o.extendSeriesModel({type:"series.graph",init:function(e){g.superApply(this,"init",arguments);var t=this;function a(){return t._categoriesData}this.legendVisualProvider=new c(a,a),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){g.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){g.superApply(this,"mergeDefaultAndTheme",arguments),r(e,["edgeLabel"],["show"])},getInitialData:function(e,t){var a=e.edges||e.links||[],o=e.data||e.nodes||[],i=this;if(o&&a){h(this);var r=u(o,a,this,!0,(function(e,a){e.wrapMethod("getItemModel",(function(e){var t=i._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e}));var o=i.getModel("edgeLabel"),n=new s({label:o.option},o.parentModel,t),r=i.getModel("emphasis.edgeLabel"),l=new s({emphasis:{label:r.option}},r.parentModel,t);function u(e){return(e=this.parsePath(e))&&"label"===e[0]?n:e&&"emphasis"===e[0]&&"label"===e[1]?l:this.parentModel}a.wrapMethod("getItemModel",(function(e){return e.customizeGetParent(u),e}))}));return n.each(r.edges,(function(e){p(e.node1,e.node2,this,e.dataIndex)}),this),r.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,a){if("edge"===a){var o=this.getData(),i=this.getDataParams(e,a),n=o.graph.getEdgeByIndex(e),r=o.getName(n.node1.dataIndex),s=o.getName(n.node2.dataIndex),u=[];return null!=r&&u.push(r),null!=s&&u.push(s),u=l(u.join(" > ")),i.value&&(u+=" : "+l(i.value)),u}return g.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var e=n.map(this.option.categories||[],(function(e){return null!=e.value?e:n.extend({value:0},e)})),t=new i(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray((function(e){return t.getItemModel(e,!0)}))},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return g.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),f=g;e.exports=f},39107:(e,t,a)=>{var o=a(70492),i=a(33051),n=a(68162),r=a(47145),s=a(9176),l=a(31194),u=a(61485).onIrrelevantElement,c=a(51177),d=a(13328),h=a(47181).getNodeGlobalScale,p="__focusNodeAdjacency",g=["itemStyle","opacity"],f=["lineStyle","opacity"];function y(e,t){var a=e.getVisual("opacity");return null!=a?a:e.getModel().get(t)}function m(e,t,a){var o=e.getGraphicEl(),i=y(e,t);null!=a&&(null==i&&(i=1),i*=a),o.downplay&&o.downplay(),o.traverse((function(e){if(!e.isGroup){var t=e.lineLabelOriginalOpacity;null!=t&&null==a||(t=i),e.setStyle("opacity",t)}}))}function v(e,t){var a=y(e,t),o=e.getGraphicEl();o.traverse((function(e){!e.isGroup&&e.setStyle("opacity",a)})),o.highlight&&o.highlight()}var _=o.extendChartView({type:"graph",init:function(e,t){var a=new n,o=new r,i=this.group;this._controller=new s(t.getZr()),this._controllerHost={target:i},i.add(a.group),i.add(o.group),this._symbolDraw=a,this._lineDraw=o,this._firstRender=!0},render:function(e,t,a){var o=this,i=e.coordinateSystem;this._model=e;var n=this._symbolDraw,r=this._lineDraw,s=this.group;if("view"===i.type){var l={position:i.position,scale:i.scale};this._firstRender?s.attr(l):c.updateProps(s,l,e)}d(e.getGraph(),h(e));var u=e.getData();n.updateData(u);var g=e.getEdgeData();r.updateData(g),this._updateNodeAndLinkScale(),this._updateController(e,t,a),clearTimeout(this._layoutTimeout);var f=e.forceLayout,y=e.get("force.layoutAnimation");f&&this._startForceLayoutIteration(f,y),u.eachItemGraphicEl((function(t,i){var n=u.getItemModel(i);t.off("drag").off("dragend");var r=n.get("draggable");r&&t.on("drag",(function(){f&&(f.warmUp(),!this._layouting&&this._startForceLayoutIteration(f,y),f.setFixed(i),u.setItemLayout(i,t.position))}),this).on("dragend",(function(){f&&f.setUnfixed(i)}),this),t.setDraggable(r&&f),t[p]&&t.off("mouseover",t[p]),t.__unfocusNodeAdjacency&&t.off("mouseout",t.__unfocusNodeAdjacency),n.get("focusNodeAdjacency")&&(t.on("mouseover",t[p]=function(){o._clearTimer(),a.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:t.dataIndex})}),t.on("mouseout",t.__unfocusNodeAdjacency=function(){o._dispatchUnfocus(a)}))}),this),u.graph.eachEdge((function(t){var i=t.getGraphicEl();i[p]&&i.off("mouseover",i[p]),i.__unfocusNodeAdjacency&&i.off("mouseout",i.__unfocusNodeAdjacency),t.getModel().get("focusNodeAdjacency")&&(i.on("mouseover",i[p]=function(){o._clearTimer(),a.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:t.dataIndex})}),i.on("mouseout",i.__unfocusNodeAdjacency=function(){o._dispatchUnfocus(a)}))}));var m="circular"===e.get("layout")&&e.get("circular.rotateLabel"),v=u.getLayout("cx"),_=u.getLayout("cy");u.eachItemGraphicEl((function(e,t){var a=u.getItemModel(t).get("label.rotate")||0,o=e.getSymbolPath();if(m){var i=u.getItemLayout(t),n=Math.atan2(i[1]-_,i[0]-v);n<0&&(n=2*Math.PI+n);var r=i[0]<v;r&&(n-=Math.PI);var s=r?"left":"right";c.modifyLabelStyle(o,{textRotation:-n,textPosition:s,textOrigin:"center"},{textPosition:s})}else c.modifyLabelStyle(o,{textRotation:a*=Math.PI/180})})),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(e,t){var a=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout((function(){a._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:a._model.id})}),500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,a,o){var n=e.getData().graph,r=o.dataIndex,s=o.edgeDataIndex,l=n.getNodeByIndex(r),u=n.getEdgeByIndex(s);(l||u)&&(n.eachNode((function(e){m(e,g,.1)})),n.eachEdge((function(e){m(e,f,.1)})),l&&(v(l,g),i.each(l.edges,(function(e){e.dataIndex<0||(v(e,f),v(e.node1,g),v(e.node2,g))}))),u&&(v(u,f),v(u.node1,g),v(u.node2,g)))},unfocusNodeAdjacency:function(e,t,a,o){var i=e.getData().graph;i.eachNode((function(e){m(e,g)})),i.eachEdge((function(e){m(e,f)}))},_startForceLayoutIteration:function(e,t){var a=this;!function o(){e.step((function(e){a.updateLayout(a._model),(a._layouting=!e)&&(t?a._layoutTimeout=setTimeout(o,16):o())}))}()},_updateController:function(e,t,a){var o=this._controller,i=this._controllerHost,n=this.group;o.setPointerChecker((function(t,o,i){var r=n.getBoundingRect();return r.applyTransform(n.transform),r.contain(o,i)&&!u(t,a,e)})),"view"===e.coordinateSystem.type?(o.enable(e.get("roam")),i.zoomLimit=e.get("scaleLimit"),i.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",(function(t){l.updateViewOnPan(i,t.dx,t.dy),a.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){l.updateViewOnZoom(i,t.scale,t.originX,t.originY),a.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),this._updateNodeAndLinkScale(),d(e.getGraph(),h(e)),this._lineDraw.updateLayout()}),this)):o.disable()},_updateNodeAndLinkScale:function(){var e=this._model,t=e.getData(),a=h(e),o=[a,a];t.eachItemGraphicEl((function(e,t){e.attr("scale",o)}))},updateLayout:function(e){d(e.getGraph(),h(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}});e.exports=_},13328:(e,t,a)=>{var o=a(18554),i=a(45280),n=a(47181).getSymbolSize,r=[],s=[],l=[],u=o.quadraticAt,c=i.distSquare,d=Math.abs;function h(e,t,a){for(var o,i=e[0],n=e[1],h=e[2],p=1/0,g=a*a,f=.1,y=.1;y<=.9;y+=.1){r[0]=u(i[0],n[0],h[0],y),r[1]=u(i[1],n[1],h[1],y),(_=d(c(r,t)-g))<p&&(p=_,o=y)}for(var m=0;m<32;m++){var v=o+f;s[0]=u(i[0],n[0],h[0],o),s[1]=u(i[1],n[1],h[1],o),l[0]=u(i[0],n[0],h[0],v),l[1]=u(i[1],n[1],h[1],v);var _=c(s,t)-g;if(d(_)<.01)break;var S=c(l,t)-g;f/=2,_<0?S>=0?o+=f:o-=f:S>=0?o-=f:o+=f}return o}e.exports=function(e,t){var a=[],r=o.quadraticSubdivide,s=[[],[],[]],l=[[],[]],u=[];t/=2,e.eachEdge((function(e,o){var c=e.getLayout(),d=e.getVisual("fromSymbol"),p=e.getVisual("toSymbol");c.__original||(c.__original=[i.clone(c[0]),i.clone(c[1])],c[2]&&c.__original.push(i.clone(c[2])));var g=c.__original;if(null!=c[2]){if(i.copy(s[0],g[0]),i.copy(s[1],g[2]),i.copy(s[2],g[1]),d&&"none"!==d){var f=n(e.node1),y=h(s,g[0],f*t);r(s[0][0],s[1][0],s[2][0],y,a),s[0][0]=a[3],s[1][0]=a[4],r(s[0][1],s[1][1],s[2][1],y,a),s[0][1]=a[3],s[1][1]=a[4]}if(p&&"none"!==p){f=n(e.node2),y=h(s,g[1],f*t);r(s[0][0],s[1][0],s[2][0],y,a),s[1][0]=a[1],s[2][0]=a[2],r(s[0][1],s[1][1],s[2][1],y,a),s[1][1]=a[1],s[2][1]=a[2]}i.copy(c[0],s[0]),i.copy(c[1],s[2]),i.copy(c[2],s[1])}else{if(i.copy(l[0],g[0]),i.copy(l[1],g[1]),i.sub(u,l[1],l[0]),i.normalize(u,u),d&&"none"!==d){f=n(e.node1);i.scaleAndAdd(l[0],l[0],u,f*t)}if(p&&"none"!==p){f=n(e.node2);i.scaleAndAdd(l[1],l[1],u,-f*t)}i.copy(c[0],l[0]),i.copy(c[1],l[1])}}))}},60548:e=>{e.exports=function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",(function(e){var a=e.getCategoriesData(),o=e.getGraph().data,i=a.mapArray(a.getName);o.filterSelf((function(e){var a=o.getItemModel(e).getShallow("category");if(null!=a){"number"==typeof a&&(a=i[a]);for(var n=0;n<t.length;n++)if(!t[n].isSelected(a))return!1}return!0}))}),this)}},19918:e=>{e.exports=function(e){var t={};e.eachSeriesByType("graph",(function(e){var a=e.getCategoriesData(),o=e.getData(),i={};a.each((function(o){var n=a.getName(o);i["ec-"+n]=o;var r=a.getItemModel(o),s=r.get("itemStyle.color")||e.getColorFromPalette(n,t);a.setItemVisual(o,"color",s);for(var l=["opacity","symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++){var c=r.getShallow(l[u],!0);null!=c&&a.setItemVisual(o,l[u],c)}})),a.count()&&o.each((function(e){var t=o.getItemModel(e).getShallow("category");if(null!=t){"string"==typeof t&&(t=i["ec-"+t]);for(var n=["color","opacity","symbol","symbolSize","symbolKeepAspect"],r=0;r<n.length;r++)null==o.getItemVisual(e,n[r],!0)&&o.setItemVisual(e,n[r],a.getItemVisual(t,n[r]))}}))}))}},36846:(e,t,a)=>{var o=a(22663).circularLayout;e.exports=function(e){e.eachSeriesByType("graph",(function(e){"circular"===e.get("layout")&&o(e,"symbolSize")}))}},22663:(e,t,a)=>{var o=a(45280),i=a(47181),n=i.getSymbolSize,r=i.getNodeGlobalScale,s=a(33051),l=a(11516).getCurvenessForEdge,u=Math.PI,c=[];var d={value:function(e,t,a,o,i,n,r,s){var l=0,u=o.getSum("value"),c=2*Math.PI/(u||s);a.eachNode((function(e){var t=e.getValue("value"),a=c*(u?t:1)/2;l+=a,e.setLayout([i*Math.cos(l)+n,i*Math.sin(l)+r]),l+=a}))},symbolSize:function(e,t,a,o,i,s,l,d){var h=0;c.length=d;var p=r(e);a.eachNode((function(e){var t=n(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=p;var a=Math.asin(t/2/i);isNaN(a)&&(a=u/2),c[e.dataIndex]=a,h+=2*a}));var g=(2*u-h)/d/2,f=0;a.eachNode((function(e){var t=g+c[e.dataIndex];f+=t,e.setLayout([i*Math.cos(f)+s,i*Math.sin(f)+l]),f+=t}))}};t.circularLayout=function(e,t){var a=e.coordinateSystem;if(!a||"view"===a.type){var i=a.getBoundingRect(),n=e.getData(),r=n.graph,u=i.width/2+i.x,c=i.height/2+i.y,h=Math.min(i.width,i.height)/2,p=n.count();n.setLayout({cx:u,cy:c}),p&&(d[t](e,a,r,n,h,u,c,p),r.eachEdge((function(t,a){var i,n=s.retrieve3(t.getModel().get("lineStyle.curveness"),l(t,e,a),0),r=o.clone(t.node1.getLayout()),d=o.clone(t.node2.getLayout()),h=(r[0]+d[0])/2,p=(r[1]+d[1])/2;+n&&(i=[u*(n*=3)+h*(1-n),c*n+p*(1-n)]),t.setLayout([r,d,i])})))}}},53081:(e,t,a)=>{var o=a(23845),i=a(76172).getLayoutRect,n=a(3726);e.exports=function(e,t){var a=[];return e.eachSeriesByType("graph",(function(e){var r=e.get("coordinateSystem");if(!r||"view"===r){var s=e.getData(),l=s.mapArray((function(e){var t=s.getItemModel(e);return[+t.get("x"),+t.get("y")]})),u=[],c=[];n.fromPoints(l,u,c),c[0]-u[0]==0&&(c[0]+=1,u[0]-=1),c[1]-u[1]==0&&(c[1]+=1,u[1]-=1);var d=(c[0]-u[0])/(c[1]-u[1]),h=function(e,t,a){var o=e.getBoxLayoutParams();return o.aspect=a,i(o,{width:t.getWidth(),height:t.getHeight()})}(e,t,d);isNaN(d)&&(u=[h.x,h.y],c=[h.x+h.width,h.y+h.height]);var p=c[0]-u[0],g=c[1]-u[1],f=h.width,y=h.height,m=e.coordinateSystem=new o;m.zoomLimit=e.get("scaleLimit"),m.setBoundingRect(u[0],u[1],p,g),m.setViewRect(h.x,h.y,f,y),m.setCenter(e.get("center")),m.setZoom(e.get("zoom")),a.push(m)}})),a}},86733:e=>{function t(e){return e instanceof Array||(e=[e,e]),e}e.exports=function(e){e.eachSeriesByType("graph",(function(e){var a=e.getGraph(),o=e.getEdgeData(),i=t(e.get("edgeSymbol")),n=t(e.get("edgeSymbolSize")),r="lineStyle.color".split("."),s="lineStyle.opacity".split(".");o.setVisual("fromSymbol",i&&i[0]),o.setVisual("toSymbol",i&&i[1]),o.setVisual("fromSymbolSize",n&&n[0]),o.setVisual("toSymbolSize",n&&n[1]),o.setVisual("color",e.get(r)),o.setVisual("opacity",e.get(s)),o.each((function(e){var i=o.getItemModel(e),n=a.getEdgeByIndex(e),l=t(i.getShallow("symbol",!0)),u=t(i.getShallow("symbolSize",!0)),c=i.get(r),d=i.get(s);switch(c){case"source":c=n.node1.getVisual("color");break;case"target":c=n.node2.getVisual("color")}l[0]&&n.setVisual("fromSymbol",l[0]),l[1]&&n.setVisual("toSymbol",l[1]),u[0]&&n.setVisual("fromSymbolSize",u[0]),u[1]&&n.setVisual("toSymbolSize",u[1]),n.setVisual("color",c),n.setVisual("opacity",d)}))}))}},33586:(e,t,a)=>{var o=a(45280),i=o.scaleAndAdd;t.forceLayout=function(e,t,a){for(var n=a.rect,r=n.width,s=n.height,l=[n.x+r/2,n.y+s/2],u=null==a.gravity?.1:a.gravity,c=0;c<e.length;c++){var d=e[c];d.p||(d.p=o.create(r*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),d.pp=o.clone(d.p),d.edges=null}var h=null==a.friction?.6:a.friction,p=h;return{warmUp:function(){p=.8*h},setFixed:function(t){e[t].fixed=!0},setUnfixed:function(t){e[t].fixed=!1},step:function(a){for(var n=[],r=e.length,s=0;s<t.length;s++){var c=t[s];if(!c.ignoreForceLayout){var d=c.n1,h=c.n2;o.sub(n,h.p,d.p);var g=o.len(n)-c.d,f=h.w/(d.w+h.w);isNaN(f)&&(f=0),o.normalize(n,n),!d.fixed&&i(d.p,d.p,n,f*g*p),!h.fixed&&i(h.p,h.p,n,-(1-f)*g*p)}}for(s=0;s<r;s++){(_=e[s]).fixed||(o.sub(n,l,_.p),i(_.p,_.p,n,u*p))}for(s=0;s<r;s++){d=e[s];for(var y=s+1;y<r;y++){h=e[y];o.sub(n,h.p,d.p),0===(g=o.len(n))&&(o.set(n,Math.random()-.5,Math.random()-.5),g=1);var m=(d.rep+h.rep)/g/g;!d.fixed&&i(d.pp,d.pp,n,m),!h.fixed&&i(h.pp,h.pp,n,-m)}}var v=[];for(s=0;s<r;s++){var _;(_=e[s]).fixed||(o.sub(v,_.p,_.pp),i(_.p,_.p,v,p),o.copy(_.pp,_.p))}p*=.992,a&&a(e,t,p<.01)}}}},6921:(e,t,a)=>{var o=a(33586).forceLayout,i=a(74107).simpleLayout,n=a(22663).circularLayout,r=a(85669).linearMap,s=a(45280),l=a(33051),u=a(11516).getCurvenessForEdge;e.exports=function(e){e.eachSeriesByType("graph",(function(e){if(!(v=e.coordinateSystem)||"view"===v.type)if("force"===e.get("layout")){var t=e.preservedPoints||{},a=e.getGraph(),c=a.data,d=a.edgeData,h=e.getModel("force"),p=h.get("initLayout");e.preservedPoints?c.each((function(e){var a=c.getId(e);c.setItemLayout(e,t[a]||[NaN,NaN])})):p&&"none"!==p?"circular"===p&&n(e,"value"):i(e);var g=c.getDataExtent("value"),f=d.getDataExtent("value"),y=h.get("repulsion"),m=h.get("edgeLength");l.isArray(y)||(y=[y,y]),l.isArray(m)||(m=[m,m]),m=[m[1],m[0]];var v,_=c.mapArray("value",(function(e,t){var a=c.getItemLayout(t),o=r(e,g,y);return isNaN(o)&&(o=(y[0]+y[1])/2),{w:o,rep:o,fixed:c.getItemModel(t).get("fixed"),p:!a||isNaN(a[0])||isNaN(a[1])?null:a}})),S=d.mapArray("value",(function(t,o){var i=a.getEdgeByIndex(o),n=r(t,f,m);isNaN(n)&&(n=(m[0]+m[1])/2);var s=i.getModel(),c=l.retrieve3(s.get("lineStyle.curveness"),-u(i,e,o,!0),0);return{n1:_[i.node1.dataIndex],n2:_[i.node2.dataIndex],d:n,curveness:c,ignoreForceLayout:s.get("ignoreForceLayout")}})),x=(v=e.coordinateSystem).getBoundingRect(),I=o(_,S,{rect:x,gravity:h.get("gravity"),friction:h.get("friction")}),b=I.step;I.step=function(e){for(var o=0,i=_.length;o<i;o++)_[o].fixed&&s.copy(_[o].p,a.getNodeByIndex(o).getLayout());b((function(o,i,n){for(var r=0,l=o.length;r<l;r++)o[r].fixed||a.getNodeByIndex(r).setLayout(o[r].p),t[c.getId(r)]=o[r].p;for(r=0,l=i.length;r<l;r++){var u=i[r],d=a.getEdgeByIndex(r),h=u.n1.p,p=u.n2.p,g=d.getLayout();(g=g?g.slice():[])[0]=g[0]||[],g[1]=g[1]||[],s.copy(g[0],h),s.copy(g[1],p),+u.curveness&&(g[2]=[(h[0]+p[0])/2-(h[1]-p[1])*u.curveness,(h[1]+p[1])/2-(p[0]-h[0])*u.curveness]),d.setLayout(g)}e&&e(n)}))},e.forceLayout=I,e.preservedPoints=t,I.step()}else e.forceLayout=null}))}},89562:(e,t,a)=>{var o=a(70492),i=a(60553).updateCenterAndZoom;a(35540);o.registerAction({type:"graphRoam",event:"graphRoam",update:"none"},(function(e,t){t.eachComponent({mainType:"series",query:e},(function(t){var a=t.coordinateSystem,o=i(a,e);t.setCenter&&t.setCenter(o.center),t.setZoom&&t.setZoom(o.zoom)}))}))},47181:(e,t)=>{t.getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var a=e.option.nodeScaleRatio,o=t.scale,i=o&&o[0]||1;return((t.getZoom()-1)*a+1)/i},t.getSymbolSize=function(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}},41241:(e,t,a)=>{var o=a(33051).each,i=a(74107),n=i.simpleLayout,r=i.simpleLayoutEdge;e.exports=function(e,t){e.eachSeriesByType("graph",(function(e){var t=e.get("layout"),a=e.coordinateSystem;if(a&&"view"!==a.type){var i=e.getData(),s=[];o(a.dimensions,(function(e){s=s.concat(i.mapDimension(e,!0))}));for(var l=0;l<i.count();l++){for(var u=[],c=!1,d=0;d<s.length;d++){var h=i.get(s[d],l);isNaN(h)||(c=!0),u.push(h)}c?i.setItemLayout(l,a.dataToPoint(u)):i.setItemLayout(l,[NaN,NaN])}r(i.graph,e)}else t&&"none"!==t||n(e)}))}},74107:(e,t,a)=>{var o=a(45280),i=a(33051),n=a(11516).getCurvenessForEdge;function r(e,t){e.eachEdge((function(e,a){var r=i.retrieve3(e.getModel().get("lineStyle.curveness"),-n(e,t,a,!0),0),s=o.clone(e.node1.getLayout()),l=o.clone(e.node2.getLayout()),u=[s,l];+r&&u.push([(s[0]+l[0])/2-(s[1]-l[1])*r,(s[1]+l[1])/2-(l[0]-s[0])*r]),e.setLayout(u)}))}t.simpleLayout=function(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var a=e.getGraph();a.eachNode((function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])})),r(a,e)}},t.simpleLayoutEdge=r},40055:(e,t,a)=>{a(72404),a(55883)},93189:(e,t,a)=>{var o=a(33051);function i(){var e=o.createCanvas();this.canvas=e,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}i.prototype={update:function(e,t,a,o,i,n){var r=this._getBrush(),s=this._getGradient(e,i,"inRange"),l=this._getGradient(e,i,"outOfRange"),u=this.pointSize+this.blurSize,c=this.canvas,d=c.getContext("2d"),h=e.length;c.width=t,c.height=a;for(var p=0;p<h;++p){var g=e[p],f=g[0],y=g[1],m=o(g[2]);d.globalAlpha=m,d.drawImage(r,f-u,y-u)}if(!c.width||!c.height)return c;for(var v=d.getImageData(0,0,c.width,c.height),_=v.data,S=0,x=_.length,I=this.minOpacity,b=this.maxOpacity-I;S<x;){m=_[S+3]/256;var w=4*Math.floor(255*m);if(m>0){var L=n(m)?s:l;m>0&&(m=m*b+I),_[S++]=L[w],_[S++]=L[w+1],_[S++]=L[w+2],_[S++]=L[w+3]*m*256}else S+=4}return d.putImageData(v,0,0),c},_getBrush:function(){var e=this._brushCanvas||(this._brushCanvas=o.createCanvas()),t=this.pointSize+this.blurSize,a=2*t;e.width=a,e.height=a;var i=e.getContext("2d");return i.clearRect(0,0,a,a),i.shadowOffsetX=a,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),e},_getGradient:function(e,t,a){for(var o=this._gradientPixels,i=o[a]||(o[a]=new Uint8ClampedArray(1024)),n=[0,0,0,0],r=0,s=0;s<256;s++)t[a](s/255,!0,n),i[r++]=n[0],i[r++]=n[1],i[r++]=n[2],i[r++]=n[3];return i}};var n=i;e.exports=n},72404:(e,t,a)=>{var o=a(93321),i=a(40488),n=a(95899),r=o.extend({type:"series.heatmap",getInitialData:function(e,t){return i(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var e=n.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});e.exports=r},55883:(e,t,a)=>{a(38175).__DEV__;var o=a(70492),i=a(51177),n=a(93189),r=a(33051);var s=o.extendChartView({type:"heatmap",render:function(e,t,a){var o;t.eachComponent("visualMap",(function(t){t.eachTargetSeries((function(a){a===e&&(o=t)}))})),this.group.removeAll(),this._incrementalDisplayable=null;var i=e.coordinateSystem;"cartesian2d"===i.type||"calendar"===i.type?this._renderOnCartesianAndCalendar(e,a,0,e.getData().count()):function(e){var t=e.dimensions;return"lng"===t[0]&&"lat"===t[1]}(i)&&this._renderOnGeo(i,e,o,a)},incrementalPrepareRender:function(e,t,a){this.group.removeAll()},incrementalRender:function(e,t,a,o){t.coordinateSystem&&this._renderOnCartesianAndCalendar(t,o,e.start,e.end,!0)},_renderOnCartesianAndCalendar:function(e,t,a,o,n){var s,l,u=e.coordinateSystem;if("cartesian2d"===u.type){var c=u.getAxis("x"),d=u.getAxis("y");s=c.getBandWidth(),l=d.getBandWidth()}for(var h=this.group,p=e.getData(),g=e.getModel("itemStyle").getItemStyle(["color"]),f=e.getModel("emphasis.itemStyle").getItemStyle(),y=e.getModel("label"),m=e.getModel("emphasis.label"),v=u.type,_="cartesian2d"===v?[p.mapDimension("x"),p.mapDimension("y"),p.mapDimension("value")]:[p.mapDimension("time"),p.mapDimension("value")],S=a;S<o;S++){var x;if("cartesian2d"===v){if(isNaN(p.get(_[2],S)))continue;var I=u.dataToPoint([p.get(_[0],S),p.get(_[1],S)]);x=new i.Rect({shape:{x:Math.floor(Math.round(I[0])-s/2),y:Math.floor(Math.round(I[1])-l/2),width:Math.ceil(s),height:Math.ceil(l)},style:{fill:p.getItemVisual(S,"color"),opacity:p.getItemVisual(S,"opacity")}})}else{if(isNaN(p.get(_[1],S)))continue;x=new i.Rect({z2:1,shape:u.dataToRect([p.get(_[0],S)]).contentShape,style:{fill:p.getItemVisual(S,"color"),opacity:p.getItemVisual(S,"opacity")}})}var b=p.getItemModel(S);p.hasItemOption&&(g=b.getModel("itemStyle").getItemStyle(["color"]),f=b.getModel("emphasis.itemStyle").getItemStyle(),y=b.getModel("label"),m=b.getModel("emphasis.label"));var w=e.getRawValue(S),L="-";w&&null!=w[2]&&(L=w[2]),i.setLabelStyle(g,f,y,m,{labelFetcher:e,labelDataIndex:S,defaultText:L,isRectText:!0}),x.setStyle(g),i.setHoverStyle(x,p.hasItemOption?f:r.extend({},f)),x.incremental=n,n&&(x.useHoverLayer=!0),h.add(x),p.setItemGraphicEl(S,x)}},_renderOnGeo:function(e,t,a,o){var s=a.targetVisuals.inRange,l=a.targetVisuals.outOfRange,u=t.getData(),c=this._hmLayer||this._hmLayer||new n;c.blurSize=t.get("blurSize"),c.pointSize=t.get("pointSize"),c.minOpacity=t.get("minOpacity"),c.maxOpacity=t.get("maxOpacity");var d=e.getViewRect().clone(),h=e.getRoamTransform();d.applyTransform(h);var p=Math.max(d.x,0),g=Math.max(d.y,0),f=Math.min(d.width+d.x,o.getWidth()),y=Math.min(d.height+d.y,o.getHeight()),m=f-p,v=y-g,_=[u.mapDimension("lng"),u.mapDimension("lat"),u.mapDimension("value")],S=u.mapArray(_,(function(t,a,o){var i=e.dataToPoint([t,a]);return i[0]-=p,i[1]-=g,i.push(o),i})),x=a.getExtent(),I="visualMap.continuous"===a.type?function(e,t){var a=e[1]-e[0];return t=[(t[0]-e[0])/a,(t[1]-e[0])/a],function(e){return e>=t[0]&&e<=t[1]}}(x,a.option.range):function(e,t,a){var o=e[1]-e[0],i=(t=r.map(t,(function(t){return{interval:[(t.interval[0]-e[0])/o,(t.interval[1]-e[0])/o]}}))).length,n=0;return function(e){for(var o=n;o<i;o++){if((r=t[o].interval)[0]<=e&&e<=r[1]){n=o;break}}if(o===i)for(o=n-1;o>=0;o--){var r;if((r=t[o].interval)[0]<=e&&e<=r[1]){n=o;break}}return o>=0&&o<i&&a[o]}}(x,a.getPieceList(),a.option.selected);c.update(S,m,v,s.color.getNormalizer(),{inRange:s.color.getColorMapper(),outOfRange:l.color.getColorMapper()},I);var b=new i.Image({style:{width:m,height:v,x:p,y:g,image:c.canvas},silent:!0});this.group.add(b)},dispose:function(){}});e.exports=s},99895:(e,t,a)=>{var o=a(51177),i=a(77159),n=a(33051),r=a(41525).createSymbol,s=a(45280),l=a(18554);function u(e,t,a){o.Group.call(this),this.add(this.createLine(e,t,a)),this._updateEffectSymbol(e,t)}var c=u.prototype;c.createLine=function(e,t,a){return new i(e,t,a)},c._updateEffectSymbol=function(e,t){var a=e.getItemModel(t).getModel("effect"),o=a.get("symbolSize"),i=a.get("symbol");n.isArray(o)||(o=[o,o]);var s=a.get("color")||e.getItemVisual(t,"color"),l=this.childAt(1);this._symbolType!==i&&(this.remove(l),(l=r(i,-.5,-.5,1,1,s)).z2=100,l.culling=!0,this.add(l)),l&&(l.setStyle("shadowColor",s),l.setStyle(a.getItemStyle(["color"])),l.attr("scale",o),l.setColor(s),l.attr("scale",o),this._symbolType=i,this._symbolScale=o,this._updateEffectAnimation(e,a,t))},c._updateEffectAnimation=function(e,t,a){var o=this.childAt(1);if(o){var i=this,r=e.getItemLayout(a),s=1e3*t.get("period"),l=t.get("loop"),u=t.get("constantSpeed"),c=n.retrieve(t.get("delay"),(function(t){return t/e.count()*s/3})),d="function"==typeof c;if(o.ignore=!0,this.updateAnimationPoints(o,r),u>0&&(s=this.getLineLength(o)/u*1e3),s!==this._period||l!==this._loop){o.stopAnimation();var h=c;d&&(h=c(a)),o.__t>0&&(h=-s*o.__t),o.__t=0;var p=o.animate("",l).when(s,{__t:1}).delay(h).during((function(){i.updateSymbolPosition(o)}));l||p.done((function(){i.remove(o)})),p.start()}this._period=s,this._loop=l}},c.getLineLength=function(e){return s.dist(e.__p1,e.__cp1)+s.dist(e.__cp1,e.__p2)},c.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},c.updateData=function(e,t,a){this.childAt(0).updateData(e,t,a),this._updateEffectSymbol(e,t)},c.updateSymbolPosition=function(e){var t=e.__p1,a=e.__p2,o=e.__cp1,i=e.__t,n=e.position,r=[n[0],n[1]],u=l.quadraticAt,c=l.quadraticDerivativeAt;n[0]=u(t[0],o[0],a[0],i),n[1]=u(t[1],o[1],a[1],i);var d=c(t[0],o[0],a[0],i),h=c(t[1],o[1],a[1],i);if(e.rotation=-Math.atan2(h,d)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==e.__lastT&&e.__lastT<e.__t){var p=1.05*s.dist(r,n);e.attr("scale",[e.scale[0],p]),1===i&&(n[0]=r[0]+(n[0]-r[0])/2,n[1]=r[1]+(n[1]-r[1])/2)}else if(1===e.__lastT){p=2*s.dist(t,n);e.attr("scale",[e.scale[0],p])}else e.attr("scale",this._symbolScale);e.__lastT=e.__t,e.ignore=!1},c.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var a=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,a,t)},n.inherits(u,o.Group);var d=u;e.exports=d},69121:(e,t,a)=>{var o=a(30146),i=a(33051),n=a(99895),r=a(45280);function s(e,t,a){n.call(this,e,t,a),this._lastFrame=0,this._lastFramePercent=0}var l=s.prototype;l.createLine=function(e,t,a){return new o(e,t,a)},l.updateAnimationPoints=function(e,t){this._points=t;for(var a=[0],o=0,i=1;i<t.length;i++){var n=t[i-1],s=t[i];o+=r.dist(n,s),a.push(o)}if(0!==o){for(i=0;i<a.length;i++)a[i]/=o;this._offsets=a,this._length=o}},l.getLineLength=function(e){return this._length},l.updateSymbolPosition=function(e){var t=e.__t,a=this._points,o=this._offsets,i=a.length;if(o){var n=this._lastFrame;if(t<this._lastFramePercent){for(s=Math.min(n+1,i-1);s>=0&&!(o[s]<=t);s--);s=Math.min(s,i-2)}else{for(var s=n;s<i&&!(o[s]>t);s++);s=Math.min(s-1,i-2)}r.lerp(e.position,a[s],a[s+1],(t-o[s])/(o[s+1]-o[s]));var l=a[s+1][0]-a[s][0],u=a[s+1][1]-a[s][1];e.rotation=-Math.atan2(u,l)-Math.PI/2,this._lastFrame=s,this._lastFramePercent=t,e.ignore=!1}},i.inherits(s,n);var u=s;e.exports=u},53036:(e,t,a)=>{var o=a(33051),i=a(41525).createSymbol,n=a(51177).Group,r=a(85669).parsePercent,s=a(66351);function l(e,t){var a=t.rippleEffectColor||t.color;e.eachChild((function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?a:null,fill:"fill"===t.brushType?a:null}})}))}function u(e,t){n.call(this);var a=new s(e,t),o=new n;this.add(a),this.add(o),o.beforeUpdate=function(){this.attr(a.getScale())},this.updateData(e,t)}var c=u.prototype;c.stopEffectAnimation=function(){this.childAt(1).removeAll()},c.startEffectAnimation=function(e){for(var t=e.symbolType,a=e.color,o=this.childAt(1),n=0;n<3;n++){var r=i(t,-1,-1,2,2,a);r.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var s=-n/3*e.period+e.effectOffset;r.animate("",!0).when(e.period,{scale:[e.rippleScale/2,e.rippleScale/2]}).delay(s).start(),r.animateStyle(!0).when(e.period,{opacity:0}).delay(s).start(),o.add(r)}l(o,e)},c.updateEffectAnimation=function(e){for(var t=this._effectCfg,a=this.childAt(1),o=["symbolType","period","rippleScale"],i=0;i<o.length;i++){var n=o[i];if(t[n]!==e[n])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}l(a,e)},c.highlight=function(){this.trigger("emphasis")},c.downplay=function(){this.trigger("normal")},c.updateData=function(e,t){var a=e.hostModel;this.childAt(0).updateData(e,t);var i=this.childAt(1),n=e.getItemModel(t),s=e.getItemVisual(t,"symbol"),l=function(e){return o.isArray(e)||(e=[+e,+e]),e}(e.getItemVisual(t,"symbolSize")),u=e.getItemVisual(t,"color");i.attr("scale",l),i.traverse((function(e){e.attr({fill:u})}));var c=n.getShallow("symbolOffset");if(c){var d=i.position;d[0]=r(c[0],l[0]),d[1]=r(c[1],l[1])}var h=e.getItemVisual(t,"symbolRotate");i.rotation=(h||0)*Math.PI/180||0;var p={};if(p.showEffectOn=a.get("showEffectOn"),p.rippleScale=n.get("rippleEffect.scale"),p.brushType=n.get("rippleEffect.brushType"),p.period=1e3*n.get("rippleEffect.period"),p.effectOffset=t/e.count(),p.z=n.getShallow("z")||0,p.zlevel=n.getShallow("zlevel")||0,p.symbolType=s,p.color=u,p.rippleEffectColor=n.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===p.showEffectOn)this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p;else{this._effectCfg=null,this.stopEffectAnimation();var g=this.childAt(0),f=function(){g.highlight(),"render"!==p.showEffectOn&&this.startEffectAnimation(p)},y=function(){g.downplay(),"render"!==p.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",f,this).on("mouseout",y,this).on("emphasis",f,this).on("normal",y,this)}this._effectCfg=p},c.fadeOut=function(e){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),e&&e()},o.inherits(u,n);var d=u;e.exports=d},34148:(e,t,a)=>{var o=a(51177),i=a(91754),n=a(33640),r=a(25674),s=o.extendShape({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,t){var a=t.segs,o=t.curveness;if(t.polyline)for(var i=0;i<a.length;){var n=a[i++];if(n>0){e.moveTo(a[i++],a[i++]);for(var r=1;r<n;r++)e.lineTo(a[i++],a[i++])}}else for(i=0;i<a.length;){var s=a[i++],l=a[i++],u=a[i++],c=a[i++];if(e.moveTo(s,l),o>0){var d=(s+u)/2-(l-c)*o,h=(l+c)/2-(u-s)*o;e.quadraticCurveTo(d,h,u,c)}else e.lineTo(u,c)}},findDataIndex:function(e,t){var a=this.shape,o=a.segs,i=a.curveness;if(a.polyline)for(var s=0,l=0;l<o.length;){var u=o[l++];if(u>0)for(var c=o[l++],d=o[l++],h=1;h<u;h++){var p=o[l++],g=o[l++];if(n.containStroke(c,d,p,g))return s}s++}else for(s=0,l=0;l<o.length;){c=o[l++],d=o[l++],p=o[l++],g=o[l++];if(i>0){var f=(c+p)/2-(d-g)*i,y=(d+g)/2-(p-c)*i;if(r.containStroke(c,d,f,y,p,g))return s}else if(n.containStroke(c,d,p,g))return s;s++}return-1}});function l(){this.group=new o.Group}var u=l.prototype;u.isPersistent=function(){return!this._incremental},u.updateData=function(e){this.group.removeAll();var t=new s({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},u.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>5e5?(this._incremental||(this._incremental=new i({silent:!0})),this.group.add(this._incremental)):this._incremental=null},u.incrementalUpdate=function(e,t){var a=new s;a.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(a,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(a,!0):(a.rectHover=!0,a.cursor="default",a.__startIndex=e.start,this.group.add(a))},u.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},u._setCommon=function(e,t,a){var o=t.hostModel;e.setShape({polyline:o.get("polyline"),curveness:o.get("lineStyle.curveness")}),e.useStyle(o.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var i=t.getVisual("color");i&&e.setStyle("stroke",i),e.setStyle("fill"),a||(e.seriesIndex=o.seriesIndex,e.on("mousemove",(function(t){e.dataIndex=null;var a=e.findDataIndex(t.offsetX,t.offsetY);a>0&&(e.dataIndex=a+e.__startIndex)})))},u._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var c=l;e.exports=c},48066:(e,t,a)=>{var o=a(51177),i=a(41525).createSymbol,n=a(91754),r=o.extendShape({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(e,t){var a=t.points,o=t.size,i=this.symbolProxy,n=i.shape;if(!((e.getContext?e.getContext():e)&&o[0]<4))for(var r=0;r<a.length;){var s=a[r++],l=a[r++];isNaN(s)||isNaN(l)||(this.softClipShape&&!this.softClipShape.contain(s,l)||(n.x=s-o[0]/2,n.y=l-o[1]/2,n.width=o[0],n.height=o[1],i.buildPath(e,n,!0)))}},afterBrush:function(e){var t=this.shape,a=t.points,o=t.size;if(o[0]<4){this.setTransform(e);for(var i=0;i<a.length;){var n=a[i++],r=a[i++];isNaN(n)||isNaN(r)||(this.softClipShape&&!this.softClipShape.contain(n,r)||e.fillRect(n-o[0]/2,r-o[1]/2,o[0],o[1]))}this.restoreTransform(e)}},findDataIndex:function(e,t){for(var a=this.shape,o=a.points,i=a.size,n=Math.max(i[0],4),r=Math.max(i[1],4),s=o.length/2-1;s>=0;s--){var l=2*s,u=o[l]-n/2,c=o[l+1]-r/2;if(e>=u&&t>=c&&e<=u+n&&t<=c+r)return s}return-1}});function s(){this.group=new o.Group}var l=s.prototype;l.isPersistent=function(){return!this._incremental},l.updateData=function(e,t){this.group.removeAll();var a=new r({rectHover:!0,cursor:"default"});a.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(a,e,!1,t),this.group.add(a),this._incremental=null},l.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("symbolPoints");this.group.eachChild((function(e){if(null!=e.startIndex){var a=2*(e.endIndex-e.startIndex),o=4*e.startIndex*2;t=new Float32Array(t.buffer,o,a)}e.setShape("points",t)}))}},l.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>2e6?(this._incremental||(this._incremental=new n({silent:!0})),this.group.add(this._incremental)):this._incremental=null},l.incrementalUpdate=function(e,t,a){var o;this._incremental?(o=new r,this._incremental.addDisplayable(o,!0)):((o=new r({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(o)),o.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(o,t,!!this._incremental,a)},l._setCommon=function(e,t,a,o){var n=t.hostModel;o=o||{};var r=t.getVisual("symbolSize");e.setShape("size",r instanceof Array?r:[r,r]),e.softClipShape=o.clipShape||null,e.symbolProxy=i(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var s=e.shape.size[0]<4;e.useStyle(n.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var l=t.getVisual("color");l&&e.setColor(l),a||(e.seriesIndex=n.seriesIndex,e.on("mousemove",(function(t){e.dataIndex=null;var a=e.findDataIndex(t.offsetX,t.offsetY);a>=0&&(e.dataIndex=a+(e.startIndex||0))})))},l.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},l._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var u=s;e.exports=u},77159:(e,t,a)=>{var o=a(33051),i=a(45280),n=a(41525),r=a(93290),s=a(51177),l=a(85669).round,u=["fromSymbol","toSymbol"];function c(e){return"_"+e+"Type"}function d(e,t,a){var i=t.getItemVisual(a,e);if(i&&"none"!==i){var r=t.getItemVisual(a,"color"),s=t.getItemVisual(a,e+"Size"),l=t.getItemVisual(a,e+"Rotate");o.isArray(s)||(s=[s,s]);var u=n.createSymbol(i,-s[0]/2,-s[1]/2,s[0],s[1],r);return u.__specifiedRotation=null==l||isNaN(l)?void 0:+l*Math.PI/180||0,u.name=e,u}}function h(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var a=t[2];a?(e.cpx1=a[0],e.cpy1=a[1]):(e.cpx1=NaN,e.cpy1=NaN)}function p(e,t,a){s.Group.call(this),this._createLine(e,t,a)}var g=p.prototype;g.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),a=this.childOfName("label");if(e||t||!a.ignore){for(var o=1,n=this.parent;n;)n.scale&&(o/=n.scale[0]),n=n.parent;var r=this.childOfName("line");if(this.__dirty||r.__dirty){var s=r.shape.percent,l=r.pointAt(0),u=r.pointAt(s),c=i.sub([],u,l);if(i.normalize(c,c),e){if(e.attr("position",l),null==(h=e.__specifiedRotation)){var d=r.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(d[1],d[0]))}else e.attr("rotation",h);e.attr("scale",[o*s,o*s])}if(t){var h;if(t.attr("position",u),null==(h=t.__specifiedRotation)){d=r.tangentAt(1);t.attr("rotation",-Math.PI/2-Math.atan2(d[1],d[0]))}else t.attr("rotation",h);t.attr("scale",[o*s,o*s])}if(!a.ignore){var p,g,f,y;a.attr("position",u);var m=a.__labelDistance,v=m[0]*o,_=m[1]*o,S=s/2,x=[(d=r.tangentAt(S))[1],-d[0]],I=r.pointAt(S);x[1]>0&&(x[0]=-x[0],x[1]=-x[1]);var b,w=d[0]<0?-1:1;if("start"!==a.__position&&"end"!==a.__position){var L=-Math.atan2(d[1],d[0]);u[0]<l[0]&&(L=Math.PI+L),a.attr("rotation",L)}switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":b=-_,f="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":b=_,f="top";break;default:b=0,f="middle"}switch(a.__position){case"end":p=[c[0]*v+u[0],c[1]*_+u[1]],g=c[0]>.8?"left":c[0]<-.8?"right":"center",f=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";break;case"start":p=[-c[0]*v+l[0],-c[1]*_+l[1]],g=c[0]>.8?"right":c[0]<-.8?"left":"center",f=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":p=[v*w+l[0],l[1]+b],g=d[0]<0?"right":"left",y=[-v*w,-b];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":p=[I[0],I[1]+b],g="center",y=[0,-b];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":p=[-v*w+u[0],u[1]+b],g=d[0]>=0?"right":"left",y=[v*w,-b]}a.attr({style:{textVerticalAlign:a.__verticalAlign||f,textAlign:a.__textAlign||g},position:p,scale:[o,o],origin:y})}}}},g._createLine=function(e,t,a){var i=e.hostModel,n=function(e){var t=new r({name:"line",subPixelOptimize:!0});return h(t.shape,e),t}(e.getItemLayout(t));n.shape.percent=0,s.initProps(n,{shape:{percent:1}},i,t),this.add(n);var l=new s.Text({name:"label",lineLabelOriginalOpacity:1});this.add(l),o.each(u,(function(a){var o=d(a,e,t);this.add(o),this[c(a)]=e.getItemVisual(t,a)}),this),this._updateCommonStl(e,t,a)},g.updateData=function(e,t,a){var i=e.hostModel,n=this.childOfName("line"),r=e.getItemLayout(t),l={shape:{}};h(l.shape,r),s.updateProps(n,l,i,t),o.each(u,(function(a){var o=e.getItemVisual(t,a),i=c(a);if(this[i]!==o){this.remove(this.childOfName(a));var n=d(a,e,t);this.add(n)}this[i]=o}),this),this._updateCommonStl(e,t,a)},g._updateCommonStl=function(e,t,a){var i=e.hostModel,n=this.childOfName("line"),r=a&&a.lineStyle,c=a&&a.hoverLineStyle,d=a&&a.labelModel,h=a&&a.hoverLabelModel;if(!a||e.hasItemOption){var p=e.getItemModel(t);r=p.getModel("lineStyle").getLineStyle(),c=p.getModel("emphasis.lineStyle").getLineStyle(),d=p.getModel("label"),h=p.getModel("emphasis.label")}var g=e.getItemVisual(t,"color"),f=o.retrieve3(e.getItemVisual(t,"opacity"),r.opacity,1);n.useStyle(o.defaults({strokeNoScale:!0,fill:"none",stroke:g,opacity:f},r)),n.hoverStyle=c,o.each(u,(function(e){var t=this.childOfName(e);t&&(t.setColor(g),t.setStyle({opacity:f}))}),this);var y,m,v=d.getShallow("show"),_=h.getShallow("show"),S=this.childOfName("label");if((v||_)&&(y=g||"#000",null==(m=i.getFormattedLabel(t,"normal",e.dataType)))){var x=i.getRawValue(t);m=null==x?e.getName(t):isFinite(x)?l(x):x}var I=v?m:null,b=_?o.retrieve2(i.getFormattedLabel(t,"emphasis",e.dataType),m):null,w=S.style;if(null!=I||null!=b){s.setTextStyle(S.style,d,{text:I},{autoColor:y}),S.__textAlign=w.textAlign,S.__verticalAlign=w.textVerticalAlign,S.__position=d.get("position")||"middle";var L=d.get("distance");o.isArray(L)||(L=[L,L]),S.__labelDistance=L}S.hoverStyle=null!=b?{text:b,textFill:h.getTextColor(!0),fontStyle:h.getShallow("fontStyle"),fontWeight:h.getShallow("fontWeight"),fontSize:h.getShallow("fontSize"),fontFamily:h.getShallow("fontFamily")}:{text:null},S.ignore=!v&&!_,s.setHoverStyle(this)},g.highlight=function(){this.trigger("emphasis")},g.downplay=function(){this.trigger("normal")},g.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},g.setLinePoints=function(e){var t=this.childOfName("line");h(t.shape,e),t.dirty()},o.inherits(p,s.Group);var f=p;e.exports=f},47145:(e,t,a)=>{var o=a(51177),i=a(77159);function n(e){this._ctor=e||i,this.group=new o.Group}var r=n.prototype;function s(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function l(e){return isNaN(e[0])||isNaN(e[1])}function u(e){return!l(e[0])&&!l(e[1])}r.isPersistent=function(){return!0},r.updateData=function(e){var t=this,a=t.group,o=t._lineData;t._lineData=e,o||a.removeAll();var i=s(e);e.diff(o).add((function(a){!function(e,t,a,o){if(!u(t.getItemLayout(a)))return;var i=new e._ctor(t,a,o);t.setItemGraphicEl(a,i),e.group.add(i)}(t,e,a,i)})).update((function(a,n){!function(e,t,a,o,i,n){var r=t.getItemGraphicEl(o);if(!u(a.getItemLayout(i)))return void e.group.remove(r);r?r.updateData(a,i,n):r=new e._ctor(a,i,n);a.setItemGraphicEl(i,r),e.group.add(r)}(t,o,e,n,a,i)})).remove((function(e){a.remove(o.getItemGraphicEl(e))})).execute()},r.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl((function(t,a){t.updateLayout(e,a)}),this)},r.incrementalPrepareUpdate=function(e){this._seriesScope=s(e),this._lineData=null,this.group.removeAll()},r.incrementalUpdate=function(e,t){function a(e){e.isGroup||function(e){return e.animators&&e.animators.length>0}(e)||(e.incremental=e.useHoverLayer=!0)}for(var o=e.start;o<e.end;o++){if(u(t.getItemLayout(o))){var i=new this._ctor(t,o,this._seriesScope);i.traverse(a),this.group.add(i),t.setItemGraphicEl(o,i)}}},r.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},r._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var c=n;e.exports=c},93290:(e,t,a)=>{var o=a(51177),i=a(45280),n=o.Line.prototype,r=o.BezierCurve.prototype;function s(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var l=o.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){this[s(t)?"_buildPathLine":"_buildPathCurve"](e,t)},_buildPathLine:n.buildPath,_buildPathCurve:r.buildPath,pointAt:function(e){return this[s(this.shape)?"_pointAtLine":"_pointAtCurve"](e)},_pointAtLine:n.pointAt,_pointAtCurve:r.pointAt,tangentAt:function(e){var t=this.shape,a=s(t)?[t.x2-t.x1,t.y2-t.y1]:this._tangentAtCurve(e);return i.normalize(a,a)},_tangentAtCurve:r.tangentAt});e.exports=l},30146:(e,t,a)=>{var o=a(51177),i=a(33051);function n(e,t,a){o.Group.call(this),this._createPolyline(e,t,a)}var r=n.prototype;r._createPolyline=function(e,t,a){var i=e.getItemLayout(t),n=new o.Polyline({shape:{points:i}});this.add(n),this._updateCommonStl(e,t,a)},r.updateData=function(e,t,a){var i=e.hostModel,n=this.childAt(0),r={shape:{points:e.getItemLayout(t)}};o.updateProps(n,r,i,t),this._updateCommonStl(e,t,a)},r._updateCommonStl=function(e,t,a){var n=this.childAt(0),r=e.getItemModel(t),s=e.getItemVisual(t,"color"),l=a&&a.lineStyle,u=a&&a.hoverLineStyle;a&&!e.hasItemOption||(l=r.getModel("lineStyle").getLineStyle(),u=r.getModel("emphasis.lineStyle").getLineStyle()),n.useStyle(i.defaults({strokeNoScale:!0,fill:"none",stroke:s},l)),n.hoverStyle=u,o.setHoverStyle(this)},r.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},i.inherits(n,o.Group);var s=n;e.exports=s},19638:(e,t,a)=>{var o=a(33051),i=a(87587),n=a(85446),r=a(87190),s=a(55623),l=a(95899),u=a(40488);e.exports=function(e,t,a,c,d){for(var h=new n(c),p=0;p<e.length;p++)h.addNode(o.retrieve(e[p].id,e[p].name,p),p);var g=[],f=[],y=0;for(p=0;p<t.length;p++){var m=t[p],v=m.source,_=m.target;h.addEdge(v,_,y)&&(f.push(m),g.push(o.retrieve(m.id,v+" > "+_)),y++)}var S,x=a.get("coordinateSystem");if("cartesian2d"===x||"polar"===x)S=u(e,a);else{var I=l.get(x),b=I&&"view"!==I.type&&I.dimensions||[];o.indexOf(b,"value")<0&&b.concat(["value"]);var w=s(e,{coordDimensions:b});(S=new i(w,a)).initData(e)}var L=new i(["value"],a);return L.initData(f,g),d&&d(S,L),r({mainData:S,struct:h,structAttr:"graph",datas:{node:S,edge:L},datasAttr:{node:"data",edge:"edgeData"}}),h.update(),h}},35540:(e,t,a)=>{var o=a(70492);o.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},(function(){})),o.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},(function(){}))},11516:(e,t,a)=>{var o=a(33051),i=function(e){return e.get("autoCurveness")||null},n=function(e,t){var a=i(e),n=20,r=[];if("number"==typeof a)n=a;else if(o.isArray(a))return void(e.__curvenessList=a);t>n&&(n=t);var s=n%2?n+2:n+3;r=[];for(var l=0;l<s;l++)r.push((l%2?l+1:l)/10*(l%2?-1:1));e.__curvenessList=r},r=function(e,t,a){var o=[e.id,e.dataIndex].join("."),i=[t.id,t.dataIndex].join(".");return[a.uid,o,i].join("--\x3e")},s=function(e){var t=e.split("--\x3e");return[t[0],t[2],t[1]].join("--\x3e")},l=function(e,t){var a=t.__edgeMap;return a[e]?a[e].length:0};t.initCurvenessList=function(e){i(e)&&(e.__curvenessList=[],e.__edgeMap={},n(e))},t.createEdgeMapForCurveness=function(e,t,a,o){if(i(a)){var n=r(e,t,a),l=a.__edgeMap,u=l[s(n)];l[n]&&!u?l[n].isForward=!0:u&&l[n]&&(u.isForward=!0,l[n].isForward=!1),l[n]=l[n]||[],l[n].push(o)}},t.getCurvenessForEdge=function(e,t,a,u){var c=i(t),d=o.isArray(c);if(!c)return null;var h=function(e,t){var a=r(e.node1,e.node2,t);return t.__edgeMap[a]}(e,t);if(!h)return null;for(var p=-1,g=0;g<h.length;g++)if(h[g]===a){p=g;break}var f=function(e,t){return l(r(e.node1,e.node2,t),t)+l(r(e.node2,e.node1,t),t)}(e,t);n(t,f),e.lineStyle=e.lineStyle||{};var y=r(e.node1,e.node2,t),m=t.__curvenessList,v=d||f%2?0:1;if(h.isForward)return m[v+p];var _=s(y),S=l(_,t),x=m[p+S+v];return u?d?c&&0===c[0]?(S+v)%2?x:-x:((S%2?0:1)+v)%2?x:-x:(S+v)%2?x:-x:m[p+S+v]}},68833:(e,t,a)=>{var o=a(33051);function i(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}t.retrieveTargetInfo=function(e,t,a){if(e&&o.indexOf(t,e.type)>=0){var i=a.getData().tree.root,n=e.targetNode;if("string"==typeof n&&(n=i.getNodeById(n)),n&&i.contains(n))return{node:n};var r=e.targetNodeId;if(null!=r&&(n=i.getNodeById(r)))return{node:n}}},t.getPathToRoot=i,t.aboveViewRoot=function(e,t){var a=i(e);return o.indexOf(a,t)>=0},t.wrapTreePathInfo=function(e,t){for(var a=[];e;){var o=e.dataIndex;a.push({name:e.name,dataIndex:o,value:t.getRawValue(o)}),e=e.parentNode}return a.reverse(),a}},4993:(e,t,a)=>{var o=a(23263),i=a(33051),n=a(10381).getDimensionTypeByAxis,r=a(61772).makeSeriesEncodeForAxisCoordSys,s={_baseAxisDim:null,getInitialData:function(e,t){var a,s,l=t.getComponent("xAxis",this.get("xAxisIndex")),u=t.getComponent("yAxis",this.get("yAxisIndex")),c=l.get("type"),d=u.get("type");"category"===c?(e.layout="horizontal",a=l.getOrdinalMeta(),s=!0):"category"===d?(e.layout="vertical",a=u.getOrdinalMeta(),s=!0):e.layout=e.layout||"horizontal";var h=["x","y"],p="horizontal"===e.layout?0:1,g=this._baseAxisDim=h[p],f=h[1-p],y=[l,u],m=y[p].get("type"),v=y[1-p].get("type"),_=e.data;if(_&&s){var S=[];i.each(_,(function(e,t){var a;e.value&&i.isArray(e.value)?(a=e.value.slice(),e.value.unshift(t)):i.isArray(e)?(a=e.slice(),e.unshift(t)):a=e,S.push(a)})),e.data=S}var x=this.defaultValueDimensions,I=[{name:g,type:n(m),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:n(v),dimsDef:x.slice()}];return o(this,{coordDimensions:I,dimensionsCount:x.length+1,encodeDefaulter:i.curry(r,I,this)})},getBaseAxis:function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis}};t.seriesModelMixin=s},64771:(e,t,a)=>{var o=a(70492);a(40142),a(68192);var i=a(43850),n=a(62503);o.registerLayout(i),o.registerVisual(n)},40142:(e,t,a)=>{a(38175).__DEV__;var o=a(93321),i=a(87587),n=a(33051),r=n.concatArray,s=n.mergeAll,l=n.map,u=a(78988).encodeHTML,c=(a(95899),"undefined"==typeof Uint32Array?Array:Uint32Array),d="undefined"==typeof Float64Array?Array:Float64Array;function h(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=l(t,(function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),s([t,e[0],e[1]])})))}var p=o.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(e){e.data=e.data||[],h(e);var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),p.superApply(this,"init",arguments)},mergeOption:function(e){if(h(e),e.data){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count))}p.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=r(this._flatCoords,t.flatCoords),this._flatCoordsOffset=r(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var a=this._flatCoordsOffset[2*e],o=this._flatCoordsOffset[2*e+1],i=0;i<o;i++)t[i]=t[i]||[],t[i][0]=this._flatCoords[a+2*i],t[i][1]=this._flatCoords[a+2*i+1];return o}var n=this._getCoordsFromItemModel(e);for(i=0;i<n.length;i++)t[i]=t[i]||[],t[i][0]=n[i][0],t[i][1]=n[i][1];return n.length},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"==typeof e[0]){for(var a=e.length,o=new c(a),i=new d(a),n=0,r=0,s=0,l=0;l<a;){s++;var u=e[l++];o[r++]=n+t,o[r++]=u;for(var h=0;h<u;h++){var p=e[l++],g=e[l++];i[n++]=p,i[n++]=g}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,r),flatCoords:i,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},getInitialData:function(e,t){var a=new i(["value"],this);return a.hasItemOption=!1,a.initData(e.data,[],(function(e,t,o,i){if(e instanceof Array)return NaN;a.hasItemOption=!0;var n=e.value;return null!=n?n instanceof Array?n[i]:n:void 0})),a},formatTooltip:function(e){var t=this.getData().getItemModel(e),a=t.get("name");if(a)return a;var o=t.get("fromName"),i=t.get("toName"),n=[];return null!=o&&n.push(o),null!=i&&n.push(i),u(n.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}}),g=p;e.exports=g},68192:(e,t,a)=>{a(38175).__DEV__;var o=a(70492),i=a(47145),n=a(99895),r=a(77159),s=a(30146),l=a(69121),u=a(34148),c=a(43850),d=a(22963).createClipPath,h=o.extendChartView({type:"lines",init:function(){},render:function(e,t,a){var o=e.getData(),i=this._updateLineDraw(o,e),n=e.get("zlevel"),r=e.get("effect.trailLength"),s=a.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(n).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&r&&(l||s.configLayer(n,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(r/10+.9,1),0)})),i.updateData(o);var u=e.get("clip",!0)&&d(e.coordinateSystem,!1,e);u?this.group.setClipPath(u):this.group.removeClipPath(),this._lastZlevel=n,this._finished=!0},incrementalPrepareRender:function(e,t,a){var o=e.getData();this._updateLineDraw(o,e).incrementalPrepareUpdate(o),this._clearLayer(a),this._finished=!1},incrementalRender:function(e,t,a){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,a){var o=e.getData(),i=e.pipelineContext;if(!this._finished||i.large||i.progressiveRender)return{update:!0};var n=c.reset(e);n.progress&&n.progress({start:0,end:o.count()},o),this._lineDraw.updateLayout(),this._clearLayer(a)},_updateLineDraw:function(e,t){var a=this._lineDraw,o=this._showEffect(t),c=!!t.get("polyline"),d=t.pipelineContext.large;return a&&o===this._hasEffet&&c===this._isPolyline&&d===this._isLargeDraw||(a&&a.remove(),a=this._lineDraw=d?new u:new i(c?o?l:s:o?n:r),this._hasEffet=o,this._isPolyline=c,this._isLargeDraw=d,this.group.removeAll()),this.group.add(a.group),a},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});e.exports=h},43850:(e,t,a)=>{var o={seriesType:"lines",plan:a(95682)(),reset:function(e){var t=e.coordinateSystem,a=e.get("polyline"),o=e.pipelineContext.large;return{progress:function(i,n){var r=[];if(o){var s,l=i.end-i.start;if(a){for(var u=0,c=i.start;c<i.end;c++)u+=e.getLineCoordsCount(c);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var d=0,h=[];for(c=i.start;c<i.end;c++){var p=e.getLineCoords(c,r);a&&(s[d++]=p);for(var g=0;g<p;g++)h=t.dataToPoint(r[g],!1,h),s[d++]=h[0],s[d++]=h[1]}n.setLayout("linesPoints",s)}else for(c=i.start;c<i.end;c++){var f=n.getItemModel(c),y=(p=e.getLineCoords(c,r),[]);if(a)for(var m=0;m<p;m++)y.push(t.dataToPoint(r[m]));else{y[0]=t.dataToPoint(r[0]),y[1]=t.dataToPoint(r[1]);var v=f.get("lineStyle.curveness");+v&&(y[2]=[(y[0][0]+y[1][0])/2-(y[0][1]-y[1][1])*v,(y[0][1]+y[1][1])/2-(y[1][0]-y[0][0])*v])}n.setItemLayout(c,y)}}}}};e.exports=o},62503:e=>{function t(e){return e instanceof Array||(e=[e,e]),e}var a="lineStyle.opacity".split("."),o={seriesType:"lines",reset:function(e,o,i){var n=t(e.get("symbol")),r=t(e.get("symbolSize")),s=e.getData();return s.setVisual("fromSymbol",n&&n[0]),s.setVisual("toSymbol",n&&n[1]),s.setVisual("fromSymbolSize",r&&r[0]),s.setVisual("toSymbolSize",r&&r[1]),s.setVisual("opacity",e.get(a)),{dataEach:s.hasItemOption?function(e,o){var i=e.getItemModel(o),n=t(i.getShallow("symbol",!0)),r=t(i.getShallow("symbolSize",!0)),s=i.get(a);n[0]&&e.setItemVisual(o,"fromSymbol",n[0]),n[1]&&e.setItemVisual(o,"toSymbol",n[1]),r[0]&&e.setItemVisual(o,"fromSymbolSize",r[0]),r[1]&&e.setItemVisual(o,"toSymbolSize",r[1]),e.setItemVisual(o,"opacity",s)}:null}}};e.exports=o},10064:(e,t,a)=>{var o=a(70492);a(42980),a(5249),a(28401),a(18958);var i=a(34804),n=a(80685),r=a(31293),s=a(87949),l=a(75324);o.registerLayout(i),o.registerVisual(n),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,r),o.registerPreprocessor(s),l("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}])},42980:(e,t,a)=>{var o=a(33051),i=a(23263),n=a(93321),r=a(78988),s=r.encodeHTML,l=r.addCommas,u=a(1501),c=a(68540).retrieveRawAttr,d=a(11194),h=a(61772).makeSeriesEncodeForNameBased,p=n.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(e){for(var t=i(this,{coordDimensions:["value"],encodeDefaulter:o.curry(h,this)}),a=t.mapDimension("value"),n=o.createHashMap(),r=[],s=[],l=0,u=t.count();l<u;l++){var p=t.getName(l);n.set(p,!0),r.push({name:p,value:t.get(a,l),selected:c(t,l,"selected")})}var g=d.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return o.each(g.regions,(function(e){var t=e.name;n.get(t)||(r.push({name:t}),s.push(t))})),this.updateSelectedMap(r),t.appendValues([],s),t},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e,t,a,o){for(var i=this.getData(),n=l(this.getRawValue(e)),r=i.getName(e),u=this.seriesGroup,c=[],d=0;d<u.length;d++){var h=u[d].originalData.indexOfName(r),p=i.mapDimension("value");isNaN(u[d].originalData.get(p,h))||c.push(s(u[d].name))}var g="html"===o?"<br/>":"\n";return c.join(", ")+g+s(r+" : "+n)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),a=this.coordinateSystem,o=a.getRegion(t);return o&&a.dataToPoint(o.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}});o.mixin(p,u);var g=p;e.exports=g},5249:(e,t,a)=>{var o=a(70492),i=a(33051),n=a(51177),r=a(44121),s=o.extendChartView({type:"map",render:function(e,t,a,o){if(!o||"mapToggleSelect"!==o.type||o.from!==this.uid){var i=this.group;if(i.removeAll(),!e.getHostGeoModel()){if(o&&"geoRoam"===o.type&&"series"===o.componentType&&o.seriesId===e.id)(n=this._mapDraw)&&i.add(n.group);else if(e.needsDrawMap){var n=this._mapDraw||new r(a,!0);i.add(n.group),n.draw(e,t,a,this,o),this._mapDraw=n}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,a)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(e,t,a){var o=e.originalData,r=this.group;o.each(o.mapDimension("value"),(function(t,a){if(!isNaN(t)){var s=o.getItemLayout(a);if(s&&s.point){var c=s.point,d=s.offset,h=new n.Circle({style:{fill:e.getData().getVisual("color")},shape:{cx:c[0]+9*d,cy:c[1],r:3},silent:!0,z2:8+(d?0:n.Z2_EMPHASIS_LIFT+1)});if(!d){var p=e.mainSeries.getData(),g=o.getName(a),f=p.indexOfName(g),y=o.getItemModel(a),m=y.getModel("label"),v=y.getModel("emphasis.label"),_=p.getItemGraphicEl(f),S=i.retrieve2(e.getFormattedLabel(f,"normal"),g),x=i.retrieve2(e.getFormattedLabel(f,"emphasis"),S),I=_.__seriesMapHighDown,b=Math.random();if(!I){I=_.__seriesMapHighDown={};var w=i.curry(l,!0),L=i.curry(l,!1);_.on("mouseover",w).on("mouseout",L).on("emphasis",w).on("normal",L)}_.__seriesMapCallKey=b,i.extend(I,{recordVersion:b,circle:h,labelModel:m,hoverLabelModel:v,emphasisText:x,normalText:S}),u(I,!1)}r.add(h)}}}))}});function l(e){var t=this.__seriesMapHighDown;t&&t.recordVersion===this.__seriesMapCallKey&&u(t,e)}function u(e,t){var a=e.circle,o=e.labelModel,i=e.hoverLabelModel,r=e.emphasisText,s=e.normalText;t?(a.style.extendFrom(n.setTextStyle({},i,{text:i.get("show")?r:null},{isRectText:!0,useInsideStyle:!1},!0)),a.__mapOriginalZ2=a.z2,a.z2+=n.Z2_EMPHASIS_LIFT):(n.setTextStyle(a.style,o,{text:o.get("show")?s:null,textPosition:o.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),a.dirty(!1),null!=a.__mapOriginalZ2&&(a.z2=a.__mapOriginalZ2,a.__mapOriginalZ2=null))}e.exports=s},87949:(e,t,a)=>{var o=a(33051);e.exports=function(e){var t=[];o.each(e.series,(function(e){e&&"map"===e.type&&(t.push(e),e.map=e.map||e.mapType,o.defaults(e,e.mapLocation))}))}},31293:(e,t,a)=>{var o=a(33051);e.exports=function(e){var t={};e.eachSeriesByType("map",(function(e){var a=e.getHostGeoModel(),o=a?"o"+a.id:"i"+e.getMapType();(t[o]=t[o]||[]).push(e)})),o.each(t,(function(e,t){for(var a,i,n,r=(a=o.map(e,(function(e){return e.getData()})),i=e[0].get("mapValueCalculation"),n={},o.each(a,(function(e){e.each(e.mapDimension("value"),(function(t,a){var o="ec-"+e.getName(a);n[o]=n[o]||[],isNaN(t)||n[o].push(t)}))})),a[0].map(a[0].mapDimension("value"),(function(e,t){for(var o,r="ec-"+a[0].getName(t),s=0,l=1/0,u=-1/0,c=n[r].length,d=0;d<c;d++)l=Math.min(l,n[r][d]),u=Math.max(u,n[r][d]),s+=n[r][d];return o="min"===i?l:"max"===i?u:"average"===i?s/c:s,0===c?NaN:o}))),s=0;s<e.length;s++)e[s].originalData=e[s].getData();for(s=0;s<e.length;s++)e[s].seriesGroup=e,e[s].needsDrawMap=0===s&&!e[s].getHostGeoModel(),e[s].setData(r.cloneShallow()),e[s].mainSeries=e[0]}))}},34804:(e,t,a)=>{var o=a(33051);e.exports=function(e){var t={};e.eachSeriesByType("map",(function(a){var i=a.getMapType();if(!a.getHostGeoModel()&&!t[i]){var n={};o.each(a.seriesGroup,(function(t){var a=t.coordinateSystem,o=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&o.each(o.mapDimension("value"),(function(e,t){var i=o.getName(t),r=a.getRegion(i);if(r&&!isNaN(e)){var s=n[i]||0,l=a.dataToPoint(r.center);n[i]=s+1,o.setItemLayout(t,{point:l,offset:s})}}))}));var r=a.getData();r.each((function(e){var t=r.getName(e),a=r.getItemLayout(e)||{};a.showLabel=!n[t],r.setItemLayout(e,a)})),t[i]=!0}}))}},80685:e=>{e.exports=function(e){e.eachSeriesByType("map",(function(e){var t=e.get("color"),a=e.getModel("itemStyle"),o=a.get("areaColor"),i=a.get("color")||t[e.seriesIndex%t.length];e.getData().setVisual({areaColor:o,color:i})}))}},28571:(e,t,a)=>{var o=a(70492);a(75781),a(20710),a(6335);var i=a(75608);o.registerVisual(i)},20710:(e,t,a)=>{var o=a(33051),i=o.each,n=o.createHashMap,r=a(93321),s=a(40488),l=r.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(e,t){var a=this.getSource();return function(e,t){if(e.encodeDefine)return;var a=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(!a)return;var o=e.encodeDefine=n();i(a.dimensions,(function(e){var t=+e.replace("dim","");o.set(e,t)}))}(a,this),s(a,this)},getRawIndicesByActiveState:function(e){var t=this.coordinateSystem,a=this.getData(),o=[];return t.eachActiveState(a,(function(t,i){e===t&&o.push(a.getRawIndex(i))})),o},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}});e.exports=l},6335:(e,t,a)=>{var o=a(51177),i=a(75797);function n(e,t,a,o){for(var i,n=[],r=0;r<a.length;r++){var s=a[r],l=e.get(e.mapDimension(s),t);i=l,("category"===o.getAxis(s).type?null==i:null==i||isNaN(i))||n.push(o.dataToPoint(l,s))}return n}function r(e,t,a,i,r){var s=n(e,a,i,r),l=new o.Polyline({shape:{points:s},silent:!0,z2:10});return t.add(l),e.setItemGraphicEl(a,l),l}function s(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),{lineStyle:e.getModel("lineStyle").getLineStyle(),smooth:null!=t?t:.3}}function l(e,t,a,o){var i=o.lineStyle;t.hasItemOption&&(i=t.getItemModel(a).getModel("lineStyle").getLineStyle());e.useStyle(i);var n=e.style;n.fill=null,n.stroke=t.getItemVisual(a,"color"),n.opacity=t.getItemVisual(a,"opacity"),o.smooth&&(e.shape.smooth=o.smooth)}var u=i.extend({type:"parallel",init:function(){this._dataGroup=new o.Group,this.group.add(this._dataGroup),this._data,this._initialized},render:function(e,t,a,i){var u=this._dataGroup,c=e.getData(),d=this._data,h=e.coordinateSystem,p=h.dimensions,g=s(e);if(c.diff(d).add((function(e){l(r(c,u,e,p,h),c,e,g)})).update((function(t,a){var r=d.getItemGraphicEl(a),s=n(c,t,p,h);c.setItemGraphicEl(t,r);var u=i&&!1===i.animation?null:e;o.updateProps(r,{shape:{points:s}},u,t),l(r,c,t,g)})).remove((function(e){var t=d.getItemGraphicEl(e);u.remove(t)})).execute(),!this._initialized){this._initialized=!0;var f=function(e,t,a){var i=e.model,n=e.getRect(),r=new o.Rect({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),s="horizontal"===i.get("layout")?"width":"height";return r.setShape(s,0),o.initProps(r,{shape:{width:n.width,height:n.height}},t,a),r}(h,e,(function(){setTimeout((function(){u.removeClipPath()}))}));u.setClipPath(f)}this._data=c},incrementalPrepareRender:function(e,t,a){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(e,t,a){for(var o=t.getData(),i=t.coordinateSystem,n=i.dimensions,u=s(t),c=e.start;c<e.end;c++){var d=r(o,this._dataGroup,c,n,i);d.incremental=!0,l(d,o,c,u)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});e.exports=u},75608:e=>{var t=["lineStyle","normal","opacity"],a={seriesType:"parallel",reset:function(e,a,o){var i=e.getModel("itemStyle"),n=e.getModel("lineStyle"),r=a.get("color"),s=n.get("color")||i.get("color")||r[e.seriesIndex%r.length],l=e.get("inactiveOpacity"),u=e.get("activeOpacity"),c=e.getModel("lineStyle").getLineStyle(),d=e.coordinateSystem,h=e.getData(),p={normal:c.opacity,active:u,inactive:l};return h.setVisual("color",s),{progress:function(e,a){d.eachActiveState(a,(function(e,o){var i=p[e];if("normal"===e&&a.hasItemOption){var n=a.getItemModel(o).get(t,!0);null!=n&&(i=n)}a.setItemVisual(o,"opacity",i)}),e.start,e.end)}}}};e.exports=a},24339:(e,t,a)=>{var o=a(70492),i=a(33051);a(77532),a(77346),a(25874);var n=a(79093).layout,r=a(34586);a(84617),o.registerLayout(i.curry(n,"pictorialBar")),o.registerVisual(r("pictorialBar","roundRect"))},48927:(e,t,a)=>{var o=a(70492);a(22881),a(57345),a(36158);var i=a(69274),n=a(34586),r=a(34263),s=a(22528),l=a(17144);o.registerVisual(i("radar")),o.registerVisual(n("radar","circle")),o.registerLayout(r),o.registerProcessor(s("radar")),o.registerPreprocessor(l)},57345:(e,t,a)=>{var o=a(93321),i=a(23263),n=a(33051),r=a(78988).encodeHTML,s=a(72019),l=o.extend({type:"series.radar",dependencies:["radar"],init:function(e){l.superApply(this,"init",arguments),this.legendVisualProvider=new s(n.bind(this.getData,this),n.bind(this.getRawData,this))},getInitialData:function(e,t){return i(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(e,t,a,o){var i=this.getData(),s=this.coordinateSystem.getIndicatorAxes(),l=this.getData().getName(e),u="html"===o?"<br/>":"\n";return r(""===l?this.name:l)+u+n.map(s,(function(t,a){var o=i.get(i.mapDimension(t.dim),e);return r(t.name+" : "+o)})).join(u)},getTooltipPosition:function(e){if(null!=e)for(var t=this.getData(),a=this.coordinateSystem,o=t.getValues(n.map(a.dimensions,(function(e){return t.mapDimension(e)})),e,!0),i=0,r=o.length;i<r;i++)if(!isNaN(o[i])){var s=a.getIndicatorAxes();return a.coordToPoint(s[i].dataToCoord(o[i]),i)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}}),u=l;e.exports=u},36158:(e,t,a)=>{var o=a(70492),i=a(51177),n=a(33051),r=a(41525);var s=o.extendChartView({type:"radar",render:function(e,t,a){var o=e.coordinateSystem,s=this.group,l=e.getData(),u=this._data;function c(e,t){var a=e.getItemVisual(t,"symbol")||"circle",o=e.getItemVisual(t,"color");if("none"!==a){var i=function(e){return n.isArray(e)||(e=[+e,+e]),e}(e.getItemVisual(t,"symbolSize")),s=r.createSymbol(a,-1,-1,2,2,o),l=e.getItemVisual(t,"symbolRotate")||0;return s.attr({style:{strokeNoScale:!0},z2:100,scale:[i[0]/2,i[1]/2],rotation:l*Math.PI/180||0}),s}}function d(t,a,o,n,r,s){o.removeAll();for(var l=0;l<a.length-1;l++){var u=c(n,r);u&&(u.__dimIdx=l,t[l]?(u.attr("position",t[l]),i[s?"initProps":"updateProps"](u,{position:a[l]},e,r)):u.attr("position",a[l]),o.add(u))}}function h(e){return n.map(e,(function(e){return[o.cx,o.cy]}))}l.diff(u).add((function(t){var a=l.getItemLayout(t);if(a){var o=new i.Polygon,n=new i.Polyline,r={shape:{points:a}};o.shape.points=h(a),n.shape.points=h(a),i.initProps(o,r,e,t),i.initProps(n,r,e,t);var s=new i.Group,u=new i.Group;s.add(n),s.add(o),s.add(u),d(n.shape.points,a,u,l,t,!0),l.setItemGraphicEl(t,s)}})).update((function(t,a){var o=u.getItemGraphicEl(a),n=o.childAt(0),r=o.childAt(1),s=o.childAt(2),c={shape:{points:l.getItemLayout(t)}};c.shape.points&&(d(n.shape.points,c.shape.points,s,l,t,!1),i.updateProps(n,c,e),i.updateProps(r,c,e),l.setItemGraphicEl(t,o))})).remove((function(e){s.remove(u.getItemGraphicEl(e))})).execute(),l.eachItemGraphicEl((function(e,t){var a=l.getItemModel(t),o=e.childAt(0),r=e.childAt(1),u=e.childAt(2),c=l.getItemVisual(t,"color");s.add(e),o.useStyle(n.defaults(a.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:c})),o.hoverStyle=a.getModel("emphasis.lineStyle").getLineStyle();var d=a.getModel("areaStyle"),h=a.getModel("emphasis.areaStyle"),p=d.isEmpty()&&d.parentModel.isEmpty(),g=h.isEmpty()&&h.parentModel.isEmpty();g=g&&p,r.ignore=p,r.useStyle(n.defaults(d.getAreaStyle(),{fill:c,opacity:.7})),r.hoverStyle=h.getAreaStyle();var f=a.getModel("itemStyle").getItemStyle(["color"]),y=a.getModel("emphasis.itemStyle").getItemStyle(),m=a.getModel("label"),v=a.getModel("emphasis.label");u.eachChild((function(e){e.setStyle(f),e.hoverStyle=n.clone(y);var a=l.get(l.dimensions[e.__dimIdx],t);(null==a||isNaN(a))&&(a=""),i.setLabelStyle(e.style,e.hoverStyle,m,v,{labelFetcher:l.hostModel,labelDataIndex:t,labelDimIndex:e.__dimIdx,defaultText:a,autoColor:c,isRectText:!0})})),e.highDownOnUpdate=function(e,t){r.attr("ignore","emphasis"===t?g:p)},i.setHoverStyle(e)})),this._data=l},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});e.exports=s},17144:(e,t,a)=>{var o=a(33051);e.exports=function(e){var t=e.polar;if(t){o.isArray(t)||(t=[t]);var a=[];o.each(t,(function(t,i){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),e.radar=e.radar||[],o.isArray(e.radar)||(e.radar=[e.radar]),e.radar.push(t)):a.push(t)})),e.polar=a}o.each(e.series,(function(e){e&&"radar"===e.type&&e.polarIndex&&(e.radarIndex=e.polarIndex)}))}},34263:(e,t,a)=>{var o=a(33051);function i(e){return!isNaN(e[0])&&!isNaN(e[1])}function n(e){return[e.cx,e.cy]}e.exports=function(e){e.eachSeriesByType("radar",(function(e){var t=e.getData(),a=[],r=e.coordinateSystem;if(r){var s=r.getIndicatorAxes();o.each(s,(function(e,o){t.each(t.mapDimension(s[o].dim),(function(e,t){a[t]=a[t]||[];var s=r.dataToPoint(e,o);a[t][o]=i(s)?s:n(r)}))})),t.each((function(e){var s=o.find(a[e],(function(e){return i(e)}))||n(r);a[e].push(s.slice()),t.setItemLayout(e,a[e])}))}}))}},90474:(e,t,a)=>{var o=a(70492);a(55341),a(42978),a(37655);var i=a(55776),n=a(66028);o.registerLayout(i),o.registerVisual(n)},55341:(e,t,a)=>{var o=a(93321),i=a(19638),n=a(78988).encodeHTML,r=a(4272),s=(a(38175).__DEV__,o.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(e,t){for(var a=e.edges||e.links,o=e.data||e.nodes,n=e.levels,s=this.levelModels={},l=0;l<n.length;l++)null!=n[l].depth&&n[l].depth>=0&&(s[n[l].depth]=new r(n[l],this,t));if(o&&a)return i(o,a,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e,t){return e.customizeGetParent((function(e){var a=this.parentModel,o=a.getData().getItemLayout(t).depth;return a.levelModels[o]||this.parentModel})),e})),t.wrapMethod("getItemModel",(function(e,t){return e.customizeGetParent((function(e){var a=this.parentModel,o=a.getGraph().getEdgeByIndex(t).node1.getLayout().depth;return a.levelModels[o]||this.parentModel})),e}))})).data},setNodePosition:function(e,t){var a=this.option.data[e];a.localX=t[0],a.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(e,t,a){if("edge"===a){var o=this.getDataParams(e,a),i=o.data,r=i.source+" -- "+i.target;return o.value&&(r+=" : "+o.value),n(r)}if("node"===a){var l=this.getGraph().getNodeByIndex(e).getLayout().value,u=this.getDataParams(e,a).data.name;if(l)r=u+" : "+l;return n(r)}return s.superCall(this,"formatTooltip",e,t)},optionUpdated:function(){var e=this.option;!0===e.focusNodeAdjacency&&(e.focusNodeAdjacency="allEdges")},getDataParams:function(e,t){var a=s.superCall(this,"getDataParams",e,t);if(null==a.value&&"node"===t){var o=this.getGraph().getNodeByIndex(e).getLayout().value;a.value=o}return a},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}})),l=s;e.exports=l},42978:(e,t,a)=>{var o=a(51177),i=a(70492),n=a(33051),r=["itemStyle","opacity"],s=["emphasis","itemStyle","opacity"],l=["lineStyle","opacity"],u=["emphasis","lineStyle","opacity"];function c(e,t){return e.getVisual("opacity")||e.getModel().get(t)}function d(e,t,a){var o=e.getGraphicEl(),i=c(e,t);null!=a&&(null==i&&(i=1),i*=a),o.downplay&&o.downplay(),o.traverse((function(e){"group"!==e.type&&e.setStyle("opacity",i)}))}function h(e,t){var a=c(e,t),o=e.getGraphicEl();o.traverse((function(e){"group"!==e.type&&e.setStyle("opacity",a)})),o.highlight&&o.highlight()}var p=o.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(e,t){var a=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+a,t.y2),e.bezierCurveTo(t.cpx2+a,t.cpy2,t.cpx1+a,t.cpy1,t.x1+a,t.y1)):(e.lineTo(t.x2,t.y2+a),e.bezierCurveTo(t.cpx2,t.cpy2+a,t.cpx1,t.cpy1+a,t.x1,t.y1+a)),e.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}}),g=i.extendChartView({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(e,t,a){var i=this,n=e.getGraph(),r=this.group,s=e.layoutInfo,l=s.width,u=s.height,c=e.getData(),d=e.getData("edge"),h=e.get("orient");this._model=e,r.removeAll(),r.attr("position",[s.x,s.y]),n.eachEdge((function(t){var a=new p;a.dataIndex=t.dataIndex,a.seriesIndex=e.seriesIndex,a.dataType="edge";var i,n,s,c,g,f,y,m,v=t.getModel("lineStyle"),_=v.get("curveness"),S=t.node1.getLayout(),x=t.node1.getModel(),I=x.get("localX"),b=x.get("localY"),w=t.node2.getLayout(),L=t.node2.getModel(),D=L.get("localX"),A=L.get("localY"),M=t.getLayout();switch(a.shape.extent=Math.max(1,M.dy),a.shape.orient=h,"vertical"===h?(i=(null!=I?I*l:S.x)+M.sy,n=(null!=b?b*u:S.y)+S.dy,s=(null!=D?D*l:w.x)+M.ty,g=i,f=n*(1-_)+(c=null!=A?A*u:w.y)*_,y=s,m=n*_+c*(1-_)):(i=(null!=I?I*l:S.x)+S.dx,n=(null!=b?b*u:S.y)+M.sy,g=i*(1-_)+(s=null!=D?D*l:w.x)*_,f=n,y=i*_+s*(1-_),m=c=(null!=A?A*u:w.y)+M.ty),a.setShape({x1:i,y1:n,x2:s,y2:c,cpx1:g,cpy1:f,cpx2:y,cpy2:m}),a.setStyle(v.getItemStyle()),a.style.fill){case"source":a.style.fill=t.node1.getVisual("color");break;case"target":a.style.fill=t.node2.getVisual("color")}o.setHoverStyle(a,t.getModel("emphasis.lineStyle").getItemStyle()),r.add(a),d.setItemGraphicEl(t.dataIndex,a)})),n.eachNode((function(t){var a=t.getLayout(),i=t.getModel(),n=i.get("localX"),s=i.get("localY"),d=i.getModel("label"),h=i.getModel("emphasis.label"),p=new o.Rect({shape:{x:null!=n?n*l:a.x,y:null!=s?s*u:a.y,width:a.dx,height:a.dy},style:i.getModel("itemStyle").getItemStyle()}),g=t.getModel("emphasis.itemStyle").getItemStyle();o.setLabelStyle(p.style,g,d,h,{labelFetcher:e,labelDataIndex:t.dataIndex,defaultText:t.id,isRectText:!0}),p.setStyle("fill",t.getVisual("color")),o.setHoverStyle(p,g),r.add(p),c.setItemGraphicEl(t.dataIndex,p),p.dataType="node"})),c.eachItemGraphicEl((function(t,o){var n=c.getItemModel(o);n.get("draggable")&&(t.drift=function(t,n){i._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=n,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:c.getRawIndex(o),localX:this.shape.x/l,localY:this.shape.y/u})},t.ondragend=function(){i._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move"),t.highlight=function(){this.trigger("emphasis")},t.downplay=function(){this.trigger("normal")},t.focusNodeAdjHandler&&t.off("mouseover",t.focusNodeAdjHandler),t.unfocusNodeAdjHandler&&t.off("mouseout",t.unfocusNodeAdjHandler),n.get("focusNodeAdjacency")&&(t.on("mouseover",t.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),a.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:t.dataIndex}))}),t.on("mouseout",t.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(a)}))})),d.eachItemGraphicEl((function(t,o){var n=d.getItemModel(o);t.focusNodeAdjHandler&&t.off("mouseover",t.focusNodeAdjHandler),t.unfocusNodeAdjHandler&&t.off("mouseout",t.unfocusNodeAdjHandler),n.get("focusNodeAdjacency")&&(t.on("mouseover",t.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),a.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:t.dataIndex}))}),t.on("mouseout",t.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(a)}))})),!this._data&&e.get("animation")&&r.setClipPath(function(e,t,a){var i=new o.Rect({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return o.initProps(i,{shape:{width:e.width+20}},t,a),i}(r.getBoundingRect(),e,(function(){r.removeClipPath()}))),this._data=e.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(e){var t=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout((function(){t._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t._model.id})}),500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,a,o){var i=e.getData(),c=i.graph,p=o.dataIndex,g=i.getItemModel(p),f=o.edgeDataIndex;if(null!=p||null!=f){var y=c.getNodeByIndex(p),m=c.getEdgeByIndex(f);if(c.eachNode((function(e){d(e,r,.1)})),c.eachEdge((function(e){d(e,l,.1)})),y){h(y,s);var v=g.get("focusNodeAdjacency");"outEdges"===v?n.each(y.outEdges,(function(e){e.dataIndex<0||(h(e,u),h(e.node2,s))})):"inEdges"===v?n.each(y.inEdges,(function(e){e.dataIndex<0||(h(e,u),h(e.node1,s))})):"allEdges"===v&&n.each(y.edges,(function(e){e.dataIndex<0||(h(e,u),e.node1!==y&&h(e.node1,s),e.node2!==y&&h(e.node2,s))}))}m&&(h(m,u),h(m.node1,s),h(m.node2,s))}},unfocusNodeAdjacency:function(e,t,a,o){var i=e.getGraph();i.eachNode((function(e){d(e,r)})),i.eachEdge((function(e){d(e,l)}))}});e.exports=g},37655:(e,t,a)=>{var o=a(70492);a(35540),o.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},(function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])}))}))},55776:(e,t,a)=>{var o=a(76172),i=a(33051),n=a(32234).groupData;function r(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function s(e,t,a,o,n){var r="vertical"===n?"x":"y";i.each(e,(function(e){var i,s,l;e.sort((function(e,t){return e.getLayout()[r]-t.getLayout()[r]}));for(var u=0,c=e.length,d="vertical"===n?"dx":"dy",h=0;h<c;h++)(l=u-(s=e[h]).getLayout()[r])>0&&(i=s.getLayout()[r]+l,"vertical"===n?s.setLayout({x:i},!0):s.setLayout({y:i},!0)),u=s.getLayout()[r]+s.getLayout()[d]+t;if((l=u-t-("vertical"===n?o:a))>0)for(i=s.getLayout()[r]-l,"vertical"===n?s.setLayout({x:i},!0):s.setLayout({y:i},!0),u=i,h=c-2;h>=0;--h)(l=(s=e[h]).getLayout()[r]+s.getLayout()[d]+t-u)>0&&(i=s.getLayout()[r]-l,"vertical"===n?s.setLayout({x:i},!0):s.setLayout({y:i},!0)),u=s.getLayout()[r]}))}function l(e,t,a){i.each(e.slice().reverse(),(function(e){i.each(e,(function(e){if(e.outEdges.length){var o=f(e.outEdges,u,a)/f(e.outEdges,g,a);if(isNaN(o)){var i=e.outEdges.length;o=i?f(e.outEdges,c,a)/i:0}if("vertical"===a){var n=e.getLayout().x+(o-p(e,a))*t;e.setLayout({x:n},!0)}else{var r=e.getLayout().y+(o-p(e,a))*t;e.setLayout({y:r},!0)}}}))}))}function u(e,t){return p(e.node2,t)*e.getValue()}function c(e,t){return p(e.node2,t)}function d(e,t){return p(e.node1,t)*e.getValue()}function h(e,t){return p(e.node1,t)}function p(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function g(e){return e.getValue()}function f(e,t,a){for(var o=0,i=e.length,n=-1;++n<i;){var r=+t.call(e,e[n],a);isNaN(r)||(o+=r)}return o}function y(e,t,a){i.each(e,(function(e){i.each(e,(function(e){if(e.inEdges.length){var o=f(e.inEdges,d,a)/f(e.inEdges,g,a);if(isNaN(o)){var i=e.inEdges.length;o=i?f(e.inEdges,h,a)/i:0}if("vertical"===a){var n=e.getLayout().x+(o-p(e,a))*t;e.setLayout({x:n},!0)}else{var r=e.getLayout().y+(o-p(e,a))*t;e.setLayout({y:r},!0)}}}))}))}e.exports=function(e,t,a){e.eachSeriesByType("sankey",(function(e){var a=e.get("nodeWidth"),u=e.get("nodeGap"),c=function(e,t){return o.getLayoutRect(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=c;var d=c.width,h=c.height,p=e.getGraph(),m=p.nodes,v=p.edges;!function(e){i.each(e,(function(e){var t=f(e.outEdges,g),a=f(e.inEdges,g),o=e.getValue()||0,i=Math.max(t,a,o);e.setLayout({value:i},!0)}))}(m),function(e,t,a,o,u,c,d,h,p){(function(e,t,a,o,n,s,l){for(var u=[],c=[],d=[],h=[],p=0,g=0;g<t.length;g++)u[g]=1;for(g=0;g<e.length;g++)c[g]=e[g].inEdges.length,0===c[g]&&d.push(e[g]);var f=-1;for(;d.length;){for(var y=0;y<d.length;y++){var m=d[y],v=m.hostGraph.data.getRawDataItem(m.dataIndex),_=null!=v.depth&&v.depth>=0;_&&v.depth>f&&(f=v.depth),m.setLayout({depth:_?v.depth:p},!0),"vertical"===s?m.setLayout({dy:a},!0):m.setLayout({dx:a},!0);for(var S=0;S<m.outEdges.length;S++){var x=m.outEdges[S],I=t.indexOf(x);u[I]=0;var b=x.node2,w=e.indexOf(b);0==--c[w]&&h.indexOf(b)<0&&h.push(b)}}++p,d=h,h=[]}for(g=0;g<u.length;g++)if(1===u[g])throw new Error("Sankey is a DAG, the original data has cycle!");var L=f>p-1?f:p-1;l&&"left"!==l&&function(e,t,a,o){if("right"===t){for(var n=[],s=e,l=0;s.length;){for(var u=0;u<s.length;u++){var c=s[u];c.setLayout({skNodeHeight:l},!0);for(var d=0;d<c.inEdges.length;d++){var h=c.inEdges[d];n.indexOf(h.node1)<0&&n.push(h.node1)}}s=n,n=[],++l}i.each(e,(function(e){r(e)||e.setLayout({depth:Math.max(0,o-e.getLayout().skNodeHeight)},!0)}))}else"justify"===t&&function(e,t){i.each(e,(function(e){r(e)||e.outEdges.length||e.setLayout({depth:t},!0)}))}(e,o)}(e,l,0,L);!function(e,t,a){i.each(e,(function(e){var o=e.getLayout().depth*t;"vertical"===a?e.setLayout({y:o},!0):e.setLayout({x:o},!0)}))}(e,"vertical"===s?(n-a)/L:(o-a)/L,s)})(e,t,a,u,c,h,p),function(e,t,a,o,r,u,c){var d=function(e,t){var a=[],o="vertical"===t?"y":"x",r=n(e,(function(e){return e.getLayout()[o]}));return r.keys.sort((function(e,t){return e-t})),i.each(r.keys,(function(e){a.push(r.buckets.get(e))})),a}(e,c);(function(e,t,a,o,n,r){var s=1/0;i.each(e,(function(e){var t=e.length,l=0;i.each(e,(function(e){l+=e.getLayout().value}));var u="vertical"===r?(o-(t-1)*n)/l:(a-(t-1)*n)/l;u<s&&(s=u)})),i.each(e,(function(e){i.each(e,(function(e,t){var a=e.getLayout().value*s;"vertical"===r?(e.setLayout({x:t},!0),e.setLayout({dx:a},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:a},!0))}))})),i.each(t,(function(e){var t=+e.getValue()*s;e.setLayout({dy:t},!0)}))})(d,t,a,o,r,c),s(d,r,a,o,c);for(var h=1;u>0;u--)l(d,h*=.99,c),s(d,r,a,o,c),y(d,h,c),s(d,r,a,o,c)}(e,t,c,u,o,d,h),function(e,t){var a="vertical"===t?"x":"y";i.each(e,(function(e){e.outEdges.sort((function(e,t){return e.node2.getLayout()[a]-t.node2.getLayout()[a]})),e.inEdges.sort((function(e,t){return e.node1.getLayout()[a]-t.node1.getLayout()[a]}))})),i.each(e,(function(e){var t=0,a=0;i.each(e.outEdges,(function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy})),i.each(e.inEdges,(function(e){e.setLayout({ty:a},!0),a+=e.getLayout().dy}))}))}(e,h)}(m,v,a,u,d,h,0!==i.filter(m,(function(e){return 0===e.getLayout().value})).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))}))}},66028:(e,t,a)=>{var o=a(59937),i=a(33051);e.exports=function(e,t){e.eachSeriesByType("sankey",(function(e){var t=e.getGraph().nodes;if(t.length){var a=1/0,n=-1/0;i.each(t,(function(e){var t=e.getLayout().value;t<a&&(a=t),t>n&&(n=t)})),i.each(t,(function(t){var i=new o({type:"color",mappingMethod:"linear",dataExtent:[a,n],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),r=t.getModel().get("itemStyle.color");null!=r?t.setVisual("color",r):t.setVisual("color",i)}))}}))}},42213:(e,t,a)=>{var o=a(70492);a(517),a(79002);var i=a(34586),n=a(21149);a(84617),o.registerVisual(i("scatter","circle")),o.registerLayout(n("scatter"))},517:(e,t,a)=>{var o=a(40488),i=a(93321).extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(e,t){return o(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});e.exports=i},79002:(e,t,a)=>{var o=a(70492),i=a(68162),n=a(48066),r=a(21149);o.extendChartView({type:"scatter",render:function(e,t,a){var o=e.getData();this._updateSymbolDraw(o,e).updateData(o,{clipShape:this._getClipShape(e)}),this._finished=!0},incrementalPrepareRender:function(e,t,a){var o=e.getData();this._updateSymbolDraw(o,e).incrementalPrepareUpdate(o),this._finished=!1},incrementalRender:function(e,t,a){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,a){var o=e.getData();if(this.group.dirty(),!this._finished||o.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var i=r().reset(e);i.progress&&i.progress({start:0,end:o.count()},o),this._symbolDraw.updateLayout(o)},_getClipShape:function(e){var t=e.coordinateSystem,a=t&&t.getArea&&t.getArea();return e.get("clip",!0)?a:null},_updateSymbolDraw:function(e,t){var a=this._symbolDraw,o=t.pipelineContext.large;return a&&o===this._isLargeDraw||(a&&a.remove(),a=this._symbolDraw=o?new n:new i,this._isLargeDraw=o,this.group.removeAll()),this.group.add(a.group),a},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}})}}]);