"use strict";(self.webpackChunkdt_em_front=self.webpackChunkdt_em_front||[]).push([[7366],{31907:(e,t,i)=>{i.d(t,{Bb:()=>C,MN:()=>b,RB:()=>_,TM:()=>L,aI:()=>x,bA:()=>y,uH:()=>v});var o=i(9488),n=i(71050),s=i(17301),r=i(9917),l=i(70666),d=i(39925),a=i(24314),h=i(3860),c=i(44101),g=i(51200),u=i(94565),m=i(90535),p=i(89532),f=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{d(o.next(e))}catch(e){s(e)}}function l(e){try{d(o.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}d((o=o.apply(e,t||[])).next())}))};const _="editor.action.codeAction",C="editor.action.refactor",b="editor.action.sourceAction",v="editor.action.organizeImports",L="editor.action.fixAll";class y{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return f(this,void 0,void 0,(function*(){if((null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)&&!this.action.edit){let t;try{t=yield this.provider.resolveCodeAction(this.action,e)}catch(e){(0,s.Cp)(e)}t&&(this.action.edit=t.edit)}return this}))}}class N extends r.JT{constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(N.codeActionsComparator),this.validActions=this.allActions.filter(({action:e})=>!e.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:(0,o.Of)(e.diagnostics)?(0,o.Of)(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:(0,o.Of)(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&p.yN.QuickFix.contains(new p.yN(e.kind))&&!!e.isPreferred)}}const w={actions:[],documentation:void 0};function x(e,t,i,n,l){var a;const h=i.filter||{},g={only:null===(a=h.include)||void 0===a?void 0:a.value,trigger:i.type},u=new d.YQ(e,l),m=function(e,t){return c.H9.all(e).filter(e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some(e=>(0,p.EU)(t,new p.yN(e))))}(e,h),_=new r.SL,C=m.map(i=>f(this,void 0,void 0,(function*(){try{n.report(i);const o=yield i.provideCodeActions(e,t,g,u.token);if(o&&_.add(o),u.token.isCancellationRequested)return w;const s=((null==o?void 0:o.actions)||[]).filter(e=>e&&(0,p.Yl)(h,e)),r=function(e,t,i){if(!e.documentation)return;const o=e.documentation.map(e=>({kind:new p.yN(e.kind),command:e.command}));if(i){let e;for(const t of o)t.kind.contains(i)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return null==e?void 0:e.command}for(const e of t)if(e.kind)for(const t of o)if(t.kind.contains(new p.yN(e.kind)))return t.command;return}(i,s,h.include);return{actions:s.map(e=>new y(e,i)),documentation:r}}catch(e){if((0,s.VV)(e))throw e;return(0,s.Cp)(e),w}}))),b=c.H9.onDidChange(()=>{const t=c.H9.all(e);(0,o.fS)(t,m)||u.cancel()});return Promise.all(C).then(e=>{const t=(0,o.xH)(e.map(e=>e.actions)),i=(0,o.kX)(e.map(e=>e.documentation));return new N(t,i,_)}).finally(()=>{b.dispose(),u.dispose()})}u.P0.registerCommand("_executeCodeActionProvider",(function(e,t,i,o,r){return f(this,void 0,void 0,(function*(){if(!(t instanceof l.o))throw(0,s.b1)();const d=e.get(g.q).getModel(t);if(!d)throw(0,s.b1)();const c=h.Y.isISelection(i)?h.Y.liftSelection(i):a.e.isIRange(i)?d.validateRange(i):void 0;if(!c)throw(0,s.b1)();const u="string"==typeof o?new p.yN(o):void 0,f=yield x(d,c,{type:1,filter:{includeSourceActions:!0,include:u}},m.Ex.None,n.T.None),_=[],C=Math.min(f.validActions.length,"number"==typeof r?r:0);for(let e=0;e<C;e++)_.push(f.validActions[e].resolve(n.T.None));try{return yield Promise.all(_),f.validActions.map(e=>e.action)}finally{setTimeout(()=>f.dispose(),100)}}))}))},59471:(e,t,i)=>{i.d(t,{E7:()=>fe,pY:()=>ue});var o=i(71050),n=i(79579),s=i(9917),r=i(97295),l=i(16830),d=i(66007),a=i(29102),h=i(31907),c=i(17301),g=i(82276),u=i(72065),m=i(65321),p=i(74741),f=i(50187),_=i(44101),C=i(89532),b=i(5606),v=i(91847),L=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,o){t(i,o,e)}},N=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{d(o.next(e))}catch(e){s(e)}}function l(e){try{d(o.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}d((o=o.apply(e,t||[])).next())}))};class w extends p.aU{constructor(e,t){super(e.command?e.command.id:e.title,e.title.replace(/\r\n|\r|\n/g," "),void 0,!e.disabled,t),this.action=e}}let x=class extends s.JT{constructor(e,t,i,o){super(),this._editor=e,this._delegate=t,this._contextMenuService=i,this._visible=!1,this._showingActions=this._register(new s.XK),this._keybindingResolver=new A({getKeybindings:()=>o.getKeybindings()})}get isVisible(){return this._visible}show(e,t,i,o){return N(this,void 0,void 0,(function*(){const n=o.includeDisabledActions?t.allActions:t.validActions;if(!n.length)return void(this._visible=!1);if(!this._editor.getDomNode())throw this._visible=!1,(0,c.F0)();this._visible=!0,this._showingActions.value=t;const s=this.getMenuActions(e,n,t.documentation),r=f.L.isIPosition(i)?this._toCoords(i):i||{x:0,y:0},l=this._keybindingResolver.getResolver(),d=this._editor.getOption(114);this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>r,getActions:()=>s,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:e=>e instanceof w?l(e.action):void 0})}))}getMenuActions(e,t,i){var o,n;const s=e=>new w(e.action,()=>this._delegate.onSelectCodeAction(e)),r=t.map(s),l=[...i],d=this._editor.getModel();if(d&&r.length)for(const i of _.H9.all(d))i._getAdditionalMenuItems&&l.push(...i._getAdditionalMenuItems({trigger:e.type,only:null===(n=null===(o=e.filter)||void 0===o?void 0:o.include)||void 0===n?void 0:n.value},t.map(e=>e.action)));return l.length&&r.push(new p.Z0,...l.map(e=>s(new h.bA({title:e.title,command:e},void 0)))),r}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=(0,m.i)(this._editor.getDomNode());return{x:i.left+t.left,y:i.top+t.top+t.height}}};x=L([y(2,b.i),y(3,v.d)],x);class A{constructor(e){this._keybindingProvider=e}getResolver(){const e=new n.o(()=>this._keybindingProvider.getKeybindings().filter(e=>A.codeActionCommands.indexOf(e.command)>=0).filter(e=>e.resolvedKeybinding).map(e=>{let t=e.commandArgs;return e.command===h.uH?t={kind:C.yN.SourceOrganizeImports.value}:e.command===h.TM&&(t={kind:C.yN.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},C.wZ.fromUser(t,{kind:C.yN.None,apply:"never"}))}));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.getValue());return null==i?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new C.yN(e.kind);return t.filter(e=>e.kind.contains(i)).filter(t=>!t.preferred||e.isPreferred).reduceRight((e,t)=>e?e.kind.contains(t.kind)?t:e:t,void 0)}}A.codeActionCommands=[h.Bb,h.RB,h.MN,h.uH,h.TM];var S,D=i(57974),I=i(10553),k=i(73046),M=i(4669),P=i(75425),R=i(63580),E=i(73910),O=i(97781),T=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},F=function(e,t){return function(i,o){t(i,o,e)}};!function(e){e.Hidden={type:0};e.Showing=class{constructor(e,t,i,o){this.actions=e,this.trigger=t,this.editorPosition=i,this.widgetPosition=o,this.type=1}}}(S||(S={}));let H=class e extends s.JT{constructor(e,t,i,o){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=i,this._keybindingService=o,this._onClick=this._register(new M.Q5),this.onClick=this._onClick.event,this._state=S.Hidden,this._domNode=document.createElement("div"),this._domNode.className=k.lA.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(e=>{const t=this._editor.getModel();(1!==this.state.type||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide()})),I.o.ignoreTarget(this._domNode),this._register(m.Gw(this._domNode,e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();const{top:t,height:i}=m.i(this._domNode),o=this._editor.getOption(58);let n=Math.floor(o/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(n+=o),this._onClick.fire({x:e.posx,y:t+i+n,actions:this.state.actions,trigger:this.state.trigger})})),this._register(m.nm(this._domNode,"mouseenter",e=>{if(1!=(1&e.buttons))return;this.hide();const t=new D.Z;t.startMonitoring(e.target,e.buttons,D.e,()=>{},()=>{t.dispose()})})),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(t,i,o){if(t.validActions.length<=0)return this.hide();const n=this._editor.getOptions();if(!n.get(56).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:r,column:l}=s.validatePosition(o),d=s.getOptions().tabSize,a=n.get(43),h=s.getLineContent(r),c=P.yO.computeIndentLevel(h,d),g=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1);let u=r;if(!(a.spaceWidth*c>22))if(r>1&&!g(r-1))u-=1;else if(g(r+1)){if(l*a.spaceWidth<22)return this.hide()}else u+=1;this.state=new S.Showing(t,i,o,{position:{lineNumber:u,column:1},preference:e._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=S.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(1===this.state.type&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...k.lA.lightBulb.classNamesArray),this._domNode.classList.add(...k.lA.lightbulbAutofix.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(e)return void(this.title=R.N("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",e.getLabel()))}this._domNode.classList.remove(...k.lA.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...k.lA.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);this.title=e?R.N("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):R.N("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};H._posPref=[0],H=T([F(3,v.d)],H),(0,O.Ic)((e,t)=>{var i;const o=null===(i=e.getColor(E.cvW))||void 0===i?void 0:i.transparent(.7),n=e.getColor(E.Fu1);n&&t.addRule(`\n\t\t.monaco-editor .contentWidgets ${k.lA.lightBulb.cssSelector} {\n\t\t\tcolor: ${n};\n\t\t\tbackground-color: ${o};\n\t\t}`);const s=e.getColor(E.sKV);s&&t.addRule(`\n\t\t.monaco-editor .contentWidgets ${k.lA.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${s};\n\t\t\tbackground-color: ${o};\n\t\t}`)});var V,U=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},B=function(e,t){return function(i,o){t(i,o,e)}},W=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{d(o.next(e))}catch(e){s(e)}}function l(e){try{d(o.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}d((o=o.apply(e,t||[])).next())}))},z=function(e,t,i,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,i):n?n.value=i:t.set(e,i),i},j=function(e,t,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(e):o?o.value:t.get(e)};let Q=class extends s.JT{constructor(e,t,i,o,r){super(),this._editor=e,this.delegate=o,this._activeCodeActions=this._register(new s.XK),V.set(this,!1),this._codeActionWidget=new n.o(()=>this._register(r.createInstance(x,this._editor,{onSelectCodeAction:e=>W(this,void 0,void 0,(function*(){this.delegate.applyCodeAction(e,!0)}))}))),this._lightBulbWidget=new n.o(()=>{const e=this._register(r.createInstance(H,this._editor,t,i));return this._register(e.onClick(e=>this.showCodeActionList(e.trigger,e.actions,e,{includeDisabledActions:!1}))),e})}dispose(){z(this,V,!0,"f"),super.dispose()}update(e){var t,i,o;return W(this,void 0,void 0,(function*(){if(1!==e.type)return void(null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide());let n;try{n=yield e.actions}catch(e){return void(0,c.dL)(e)}if(!j(this,V,"f"))if(this._lightBulbWidget.getValue().update(n,e.trigger,e.position),1===e.trigger.type){if(null===(i=e.trigger.filter)||void 0===i?void 0:i.include){const t=this.tryGetValidActionToApply(e.trigger,n);if(t){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(t,!1)}finally{n.dispose()}return}if(e.trigger.context){const t=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,n);if(t&&t.action.disabled)return g.O.get(this._editor).showMessage(t.action.disabled,e.trigger.context.position),void n.dispose()}}const t=!!(null===(o=e.trigger.filter)||void 0===o?void 0:o.include);if(e.trigger.context&&(!n.allActions.length||!t&&!n.validActions.length))return g.O.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=n,void n.dispose();this._activeCodeActions.value=n,this._codeActionWidget.getValue().show(e.trigger,n,e.position,{includeDisabledActions:t})}else this._codeActionWidget.getValue().isVisible?n.dispose():this._activeCodeActions.value=n}))}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find(({action:e})=>e.disabled):void 0}tryGetValidActionToApply(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}showCodeActionList(e,t,i,o){return W(this,void 0,void 0,(function*(){this._codeActionWidget.getValue().show(e,t,i,o)}))}};V=new WeakMap,Q=U([B(4,u.TG)],Q);var $,K=i(94565),Z=i(38819),q=i(98674),G=i(59422),X=i(90535),Y=i(10829),J=i(15393),ee=i(95935),te=i(24314),ie=function(e,t,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(e):o?o.value:t.get(e)},oe=function(e,t,i,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,i):n?n.value=i:t.set(e,i),i};const ne=new Z.uy("supportedCodeAction","");class se extends s.JT{constructor(e,t,i,o=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=o,this._autoTriggerTimer=this._register(new J._F),this._register(this._markerService.onMarkerChanged(e=>this._onMarkerChanges(e))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(e=>(0,ee.Xy)(e,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const i of this._markerService.read({resource:t.uri})){const o=t.validateRange(i);if(te.e.intersectRanges(o,e))return te.e.lift(o)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._editor.getSelection();if(i.isEmpty()&&2===e.type){const{lineNumber:e,column:o}=i.getPosition(),n=t.getLineContent(e);if(0===n.length)return;if(1===o){if(/\s/.test(n[0]))return}else if(o===t.getLineMaxColumn(e)){if(/\s/.test(n[n.length-1]))return}else if(/\s/.test(n[o-2])&&/\s/.test(n[o-1]))return}return i}_createEventAndSignalChange(e,t){const i=this._editor.getModel();if(!t||!i)return void this._signalChange(void 0);const o=this._getRangeOfMarker(t),n=o?o.getStartPosition():t.getStartPosition(),s={trigger:e,selection:t,position:n};return this._signalChange(s),s}}var re;!function(e){e.Empty={type:0};e.Triggered=class{constructor(e,t,i,o){this.trigger=e,this.rangeOrSelection=t,this.position=i,this._cancellablePromise=o,this.type=1,this.actions=o.catch(e=>{if((0,c.VV)(e))return le;throw e})}cancel(){this._cancellablePromise.cancel()}}}(re||(re={}));const le={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class de extends s.JT{constructor(e,t,i,o){super(),this._editor=e,this._markerService=t,this._progressService=o,this._codeActionOracle=this._register(new s.XK),this._state=re.Empty,this._onDidChangeState=this._register(new M.Q5),this.onDidChangeState=this._onDidChangeState.event,$.set(this,!1),this._supportedCodeActions=ne.bindTo(i),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(_.H9.onDidChange(()=>this._update())),this._update()}dispose(){ie(this,$,"f")||(oe(this,$,!0,"f"),super.dispose(),this.setState(re.Empty,!0))}_update(){if(ie(this,$,"f"))return;this._codeActionOracle.value=void 0,this.setState(re.Empty);const e=this._editor.getModel();if(e&&_.H9.has(e)&&!this._editor.getOption(80)){const t=[];for(const i of _.H9.all(e))Array.isArray(i.providedCodeActionKinds)&&t.push(...i.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new se(this._editor,this._markerService,t=>{var i;if(!t)return void this.setState(re.Empty);const o=(0,J.PG)(i=>(0,h.aI)(e,t.selection,t.trigger,X.Ex.None,i));1===t.trigger.type&&(null===(i=this._progressService)||void 0===i||i.showWhile(o,250)),this.setState(new re.Triggered(t.trigger,t.selection,t.position,o))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||ie(this,$,"f")||this._onDidChangeState.fire(e))}}$=new WeakMap;var ae=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},he=function(e,t){return function(i,o){t(i,o,e)}},ce=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{d(o.next(e))}catch(e){s(e)}}function l(e){try{d(o.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}d((o=o.apply(e,t||[])).next())}))};function ge(e){return Z.Ao.regex(ne.keys()[0],new RegExp("(\\s|^)"+(0,r.ec)(e.value)+"\\b"))}R.N("args.schema.kind","Kind of the code action to run."),R.N("args.schema.apply","Controls when the returned actions are applied."),R.N("args.schema.apply.first","Always apply the first returned code action."),R.N("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),R.N("args.schema.apply.never","Do not apply the returned code actions."),R.N("args.schema.preferred","Controls if only preferred code actions should be returned.");let ue=class e extends s.JT{constructor(e,t,i,o,s){super(),this._instantiationService=s,this._editor=e,this._model=this._register(new de(this._editor,t,i,o)),this._register(this._model.onDidChangeState(e=>this.update(e))),this._ui=new n.o(()=>this._register(new Q(e,fe.Id,_e.Id,{applyCodeAction:(e,t)=>ce(this,void 0,void 0,(function*(){try{yield this._applyCodeAction(e)}finally{t&&this._trigger({type:2,filter:{}})}}))},this._instantiationService)))}static get(t){return t.getContribution(e.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,i){return this._ui.getValue().showCodeActionList(e,t,i,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,i){if(!this._editor.hasModel())return;g.O.get(this._editor).closeMessage();const o=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:i,context:{notAvailableMessage:e,position:o}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(me,e,this._editor)}};function me(e,t,i){return ce(this,void 0,void 0,(function*(){const n=e.get(d.vu),s=e.get(K.Hy),r=e.get(Y.b),l=e.get(G.lT);if(r.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred}),yield t.resolve(o.T.None),t.action.edit&&(yield n.apply(d.fo.convert(t.action.edit),{editor:i,label:t.action.title})),t.action.command)try{yield s.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(e){const t=function(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}(e);l.error("string"==typeof t?t:R.N("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}))}function pe(e,t,i,o){if(e.hasModel()){const n=ue.get(e);n&&n.manualTriggerAtCurrentPosition(t,i,o)}}ue.ID="editor.contrib.quickFixController",ue=ae([he(1,q.lT),he(2,Z.i6),he(3,X.ek),he(4,u.TG)],ue);class fe extends l.R6{constructor(){super({id:fe.Id,label:R.N("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:Z.Ao.and(a.u.writable,a.u.hasCodeActionsProvider),kbOpts:{kbExpr:a.u.editorTextFocus,primary:2132,weight:100}})}run(e,t){return pe(t,R.N("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}fe.Id="editor.action.quickFix";class _e extends l.R6{constructor(){super({id:_e.Id,label:R.N("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:Z.Ao.and(a.u.writable,ge(C.yN.QuickFix)),kbOpts:{kbExpr:a.u.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return pe(t,R.N("editor.action.autoFix.noneMessage","No auto fixes available"),{include:C.yN.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}_e.Id="editor.action.autoFix"},89532:(e,t,i)=>{i.d(t,{EU:()=>n,Yl:()=>s,wZ:()=>l,yN:()=>o});class o{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+o.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new o(this.value+o.sep+e)}}function n(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some(i=>r(t,i,e.include)))&&!(!e.includeSourceActions&&o.Source.contains(t)))}function s(e,t){const i=t.kind?new o(t.kind):void 0;return!!(!e.include||i&&e.include.contains(i))&&(!(e.excludes&&i&&e.excludes.some(t=>r(i,t,e.include)))&&(!(!e.includeSourceActions&&i&&o.Source.contains(i))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function r(e,t,i){return!!t.contains(e)&&(!i||!t.contains(i))}o.sep=".",o.None=new o("@@none@@"),o.Empty=new o(""),o.QuickFix=new o("quickfix"),o.Refactor=new o("refactor"),o.Source=new o("source"),o.SourceOrganizeImports=o.Source.append("organizeImports"),o.SourceFixAll=o.Source.append("fixAll");class l{constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}static fromUser(e,t){return e&&"object"==typeof e?new l(l.getKindFromUser(e,t.kind),l.getApplyFromUser(e,t.apply),l.getPreferredUser(e)):new l(t.kind,t.apply,!1)}static getApplyFromUser(e,t){switch("string"==typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return"string"==typeof e.kind?new o(e.kind):t}static getPreferredUser(e){return"boolean"==typeof e.preferred&&e.preferred}}},53832:(e,t,i)=>{i.r(t),i.d(t,{CodeLensContribution:()=>Q});var o=i(65321),n=i(15393),s=i(17301),r=i(89954),l=i(9917),d=i(39925),a=i(16830),h=i(64141),c=i(29102),g=i(44101),u=i(21036),m=i(71050),p=i(98401),f=i(70666),_=i(51200),C=i(94565),b=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{d(o.next(e))}catch(e){s(e)}}function l(e){try{d(o.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}d((o=o.apply(e,t||[])).next())}))};class v{constructor(){this.lenses=[],this._disposables=new l.SL}dispose(){this._disposables.dispose()}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}function L(e,t){return b(this,void 0,void 0,(function*(){const i=g.He.ordered(e),o=new Map,n=new v,r=i.map((i,r)=>b(this,void 0,void 0,(function*(){o.set(i,r);try{const o=yield Promise.resolve(i.provideCodeLenses(e,t));o&&n.add(o,i)}catch(e){(0,s.Cp)(e)}})));return yield Promise.all(r),n.lenses=n.lenses.sort((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:o.get(e.provider)<o.get(t.provider)?-1:o.get(e.provider)>o.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0),n}))}C.P0.registerCommand("_executeCodeLensProvider",(function(e,...t){let[i,o]=t;(0,p.p_)(f.o.isUri(i)),(0,p.p_)("number"==typeof o||!o);const n=e.get(_.q).getModel(i);if(!n)throw(0,s.b1)();const r=[],d=new l.SL;return L(n,m.T.None).then(e=>{d.add(e);let t=[];for(const i of e.lenses)null==o||Boolean(i.symbol.command)?r.push(i.symbol):o-- >0&&i.provider.resolveCodeLens&&t.push(Promise.resolve(i.provider.resolveCodeLens(n,i.symbol,m.T.None)).then(e=>r.push(e||i.symbol)));return Promise.all(t)}).then(()=>r).finally(()=>{setTimeout(()=>d.dispose(),100)})}));var y=i(88289),N=i(43702),w=i(24314),x=i(65026),A=i(72065),S=i(52365),D=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},I=function(e,t){return function(i,o){t(i,o,e)}};const k=(0,A.yh)("ICodeLensCache");class M{constructor(e,t){this.lineCount=e,this.data=t}}let P=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new N.z6(20,.75);(0,n.To)(()=>e.remove("codelens/cache",1));const t="codelens/cache2",i=e.get(t,1,"{}");this._deserialize(i),(0,y.I)(e.onWillSaveState)(i=>{i.reason===S.fk.SHUTDOWN&&e.store(t,this._serialize(),1,1)})}put(e,t){const i=t.lenses.map(e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}}),o=new v;o.add({lenses:i,dispose:()=>{}},this._fakeProvider);const n=new M(e.getLineCount(),o);this._cache.set(e.uri.toString(),n)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const o=new Set;for(const e of i.data.lenses)o.add(e.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...o.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const i=t[e],o=[];for(const e of i.lines)o.push({range:new w.e(e,1,e,11)});const n=new v;n.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(e,new M(i.lineCount,n))}}catch(e){}}};P=D([I(0,S.Uy)],P),(0,x.z)(k,P);var R=i(56811),E=i(75425);class O{constructor(e,t,i){this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class T{constructor(e,t,i){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-"+T._idPool++,this.updatePosition(i),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration "+t}withCommands(e,t){this._commands.clear();let i=[],n=!1;for(let t=0;t<e.length;t++){const s=e[t];if(s&&(n=!0,s.command)){const n=(0,R.T)(s.command.title.trim());s.command.id?(i.push(o.$("a",{id:String(t),title:s.command.tooltip},...n)),this._commands.set(String(t),s.command)):i.push(o.$("span",{title:s.command.tooltip},...n)),t+1<e.length&&i.push(o.$("span",void 0," | "))}}n?(o.mc(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):o.mc(this._domNode,o.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}T._idPool=0;class F{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let e=0,i=t.length;e<i;e++)this._addDecorationsCallbacks[e](t[e])}}class H{constructor(e,t,i,o,n,s,r){let l;this._isDisposed=!1,this._editor=t,this._className=i,this._data=e,this._decorationIds=[];let d=[];this._data.forEach((e,t)=>{e.symbol.command&&d.push(e.symbol),o.addDecoration({range:e.symbol.range,options:E.qx.EMPTY},e=>this._decorationIds[t]=e),l=l?w.e.plusRange(l,e.symbol.range):w.e.lift(e.symbol.range)}),this._viewZone=new O(l.startLineNumber-1,s,r),this._viewZoneId=n.addZone(this._viewZone),d.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(d,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new T(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),o=this._data[t].symbol;return!(!i||w.e.isEmpty(o.range)!==i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((e,i)=>{t.addDecoration({range:e.symbol.range,options:E.qx.EMPTY},e=>this._decorationIds[i]=e)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:e}=this._data[t];e.command=i.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}}var V=i(63580),U=i(59422),B=i(10056),W=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},z=function(e,t){return function(i,o){t(i,o,e)}},j=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{d(o.next(e))}catch(e){s(e)}}function l(e){try{d(o.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}d((o=o.apply(e,t||[])).next())}))};let Q=class{constructor(e,t,i,s){this._editor=e,this._commandService=t,this._notificationService=i,this._codeLensCache=s,this._disposables=new l.SL,this._localToDispose=new l.SL,this._lenses=[],this._getCodeLensModelDelays=new u.Y(g.He,250,2500),this._oldCodeLensModels=new l.SL,this._resolveCodeLensesDelays=new u.Y(g.He,250,2500),this._resolveCodeLensesScheduler=new n.pY(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(e=>{(e.hasChanged(43)||e.hasChanged(16)||e.hasChanged(15))&&this._updateLensStyle(),e.hasChanged(14)&&this._onModelChange()})),this._disposables.add(g.He.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+(0,r.vp)(this._editor.getId()).toString(16),this._styleElement=o.dS(o.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e,t=this._editor.getOption(16);return!t||t<5?(t=.9*this._editor.getOption(45)|0,e=this._editor.getOption(58)):e=t*Math.max(1.3,this._editor.getOption(58)/this._editor.getOption(45))|0,{codeLensHeight:e,fontSize:t}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(15),o=this._editor.getOption(43),n="--codelens-font-family"+this._styleClassName,s="--codelens-font-features"+this._styleClassName;let r=`\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(.5*t)}px; font-feature-settings: var(${s}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }\n\t\t`;i&&(r+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${n}), ${h.hL.fontFamily}}`),this._styleElement.textContent=r,this._editor.getContainerDomNode().style.setProperty(n,null!=i?i:"inherit"),this._editor.getContainerDomNode().style.setProperty(s,o.fontFeatureSettings),this._editor.changeViewZones(t=>{for(let i of this._lenses)i.updateHeight(e,t)})}_localDispose(){var e,t,i;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(i=this._currentCodeLensModel)||void 0===i||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!g.He.has(e))return void(t&&this._localToDispose.add((0,n.Vg)(()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},3e4)));for(const t of g.He.all(e))if("function"==typeof t.onDidChange){let e=t.onDidChange(()=>i.schedule());this._localToDispose.add(e)}const i=new n.pY(()=>{var t;const o=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,n.PG)(t=>L(e,t)),this._getCodeLensModelPromise.then(t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const n=this._getCodeLensModelDelays.update(e,Date.now()-o);i.delay=n,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()},s.dL)},this._getCodeLensModelDelays.get(e));this._localToDispose.add(i),this._localToDispose.add((0,l.OF)(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{let i=[],o=-1;this._lenses.forEach(e=>{e.isValid()&&o!==e.getLineNumber()?(e.update(t),o=e.getLineNumber()):i.push(e)});let n=new F;i.forEach(e=>{e.dispose(n,t),this._lenses.splice(this._lenses.indexOf(e),1)}),n.commit(e)})}),i.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add((0,l.OF)(()=>{if(this._editor.getModel()){const e=d.ZF.capture(this._editor);this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{this._disposeAllLenses(e,t)})}),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null==t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null==t?void 0:t.tagName))for(const e of this._lenses){let i=e.getCommand(t);if(i){this._commandService.executeCommand(i.id,...i.arguments||[]).catch(e=>this._notificationService.error(e));break}}})),i.schedule()}_disposeAllLenses(e,t){const i=new F;for(const e of this._lenses)e.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t,i=this._editor.getModel().getLineCount(),o=[];for(let n of e.lenses){let e=n.symbol.range.startLineNumber;e<1||e>i||(t&&t[t.length-1].symbol.range.startLineNumber===e?t.push(n):(t=[n],o.push(t)))}const n=d.ZF.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{const i=new F;let n=0,r=0;for(;r<o.length&&n<this._lenses.length;){let e=o[r][0].symbol.range.startLineNumber,l=this._lenses[n].getLineNumber();l<e?(this._lenses[n].dispose(i,t),this._lenses.splice(n,1)):l===e?(this._lenses[n].updateCodeLensSymbols(o[r],i),r++,n++):(this._lenses.splice(n,0,new H(o[r],this._editor,this._styleClassName,i,t,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),n++,r++)}for(;n<this._lenses.length;)this._lenses[n].dispose(i,t),this._lenses.splice(n,1);for(;r<o.length;)this._lenses.push(new H(o[r],this._editor,this._styleClassName,i,t,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),r++;i.commit(e)})}),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const i=[],o=[];if(this._lenses.forEach(e=>{const n=e.computeIfNecessary(t);n&&(i.push(n),o.push(e))}),0===i.length)return;const r=Date.now(),l=(0,n.PG)(e=>{const n=i.map((i,n)=>{const r=new Array(i.length),l=i.map((i,o)=>i.symbol.command||"function"!=typeof i.provider.resolveCodeLens?(r[o]=i.symbol,Promise.resolve(void 0)):Promise.resolve(i.provider.resolveCodeLens(t,i.symbol,e)).then(e=>{r[o]=e},s.Cp));return Promise.all(l).then(()=>{e.isCancellationRequested||o[n].isDisposed()||o[n].updateCommands(r)})});return Promise.all(n)});this._resolveCodeLensesPromise=l,this._resolveCodeLensesPromise.then(()=>{const e=this._resolveCodeLensesDelays.update(t,Date.now()-r);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),l===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},e=>{(0,s.dL)(e),l===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getLenses(){return this._lenses}};Q.ID="css.editor.codeLens",Q=W([z(1,C.Hy),z(2,U.lT),z(3,k)],Q),(0,a._K)(Q.ID,Q),(0,a.Qr)(class extends a.R6{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:c.u.hasCodeLensProvider,label:(0,V.N)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return j(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(B.eJ),o=e.get(C.Hy),n=e.get(U.lT),s=t.getSelection().positionLineNumber,r=t.getContribution(Q.ID),l=[];for(let e of r.getLenses())if(e.getLineNumber()===s)for(let t of e.getItems()){const{command:e}=t.symbol;e&&l.push({label:e.title,command:e})}if(0===l.length)return;const d=yield i.pick(l,{canPickMany:!1});if(d)try{yield o.executeCommand(d.command.id,...d.command.arguments||[])}catch(e){n.error(e)}}))}})},83308:(e,t,i)=>{i.d(t,{E:()=>h,R:()=>c});var o=i(71050),n=i(17301),s=i(70666),r=i(24314),l=i(44101),d=i(51200),a=i(94565);function h(e,t){const i=[],o=l.OH.ordered(e).reverse().map(o=>Promise.resolve(o.provideDocumentColors(e,t)).then(e=>{if(Array.isArray(e))for(let t of e)i.push({colorInfo:t,provider:o})}));return Promise.all(o).then(()=>i)}function c(e,t,i,o){return Promise.resolve(i.provideColorPresentations(e,t,o))}a.P0.registerCommand("_executeDocumentColorProvider",(function(e,...t){const[i]=t;if(!(i instanceof s.o))throw(0,n.b1)();const r=e.get(d.q).getModel(i);if(!r)throw(0,n.b1)();const a=[],h=l.OH.ordered(r).reverse().map(e=>Promise.resolve(e.provideDocumentColors(r,o.T.None)).then(e=>{if(Array.isArray(e))for(let t of e)a.push({range:t.range,color:[t.color.red,t.color.green,t.color.blue,t.color.alpha]})}));return Promise.all(h).then(()=>a)})),a.P0.registerCommand("_executeColorPresentationProvider",(function(e,...t){const[i,a]=t,{uri:h,range:c}=a;if(!(h instanceof s.o&&Array.isArray(i)&&4===i.length&&r.e.isIRange(c)))throw(0,n.b1)();const[g,u,m,p]=i,f=e.get(d.q).getModel(h);if(!f)throw(0,n.b1)();const _={range:c,color:{red:g,green:u,blue:m,alpha:p}},C=[],b=l.OH.ordered(f).reverse().map(e=>Promise.resolve(e.provideColorPresentations(f,_,o.T.None)).then(e=>{Array.isArray(e)&&C.push(...e)}));return Promise.all(b).then(()=>C)}))},64494:(e,t,i)=>{i.d(t,{i:()=>_});var o=i(15393),n=i(41264),s=i(17301),r=i(9917),l=i(97295),d=i(29994),a=i(16830),h=i(24314),c=i(75425),g=i(44101),u=i(83308),m=i(33108),p=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},f=function(e,t){return function(i,o){t(i,o,e)}};let _=class e extends r.JT{constructor(e,t){super(),this._editor=e,this._configurationService=t,this._localToDispose=this._register(new r.SL),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=new Set,this._ruleFactory=new d.t7(this._editor),this._colorDecorationClassRefs=this._register(new r.SL),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(g.OH.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let e=this._isEnabled;this._isEnabled=this.isEnabled(),e!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&"object"==typeof i){const e=i.colorDecorators;if(e&&void 0!==e.enable&&!e.enable)return e.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const t=this._editor.getModel();t&&g.OH.has(t)&&(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new o._F,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},e.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=(0,o.PG)(e=>{const t=this._editor.getModel();return t?(0,u.E)(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},s.dL)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:c.qx.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((t,i)=>this._colorDatas.set(t,e[i]))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[];for(let i=0;i<e.length&&t.length<500;i++){const{red:o,green:s,blue:r,alpha:d}=e[i].colorInfo.color,a=new n.VS(Math.round(255*o),Math.round(255*s),Math.round(255*r),d);let h=`rgba(${a.r}, ${a.g}, ${a.b}, ${a.a})`;const c=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:h}));t.push({range:{startLineNumber:e[i].colorInfo.range.startLineNumber,startColumn:e[i].colorInfo.range.startColumn,endLineNumber:e[i].colorInfo.range.endLineNumber,endColumn:e[i].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:l.B4,inlineClassName:c.className+" colorpicker-color-decoration",inlineClassNameAffectsLetterSpacing:!0}}})}this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],t))}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],[])),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(h.e.fromPositions(e,e)).filter(e=>this._colorDatas.has(e.id));return 0===i.length?null:this._colorDatas.get(i[0].id)}isColorDecorationId(e){return this._colorDecoratorIds.has(e)}};_.ID="editor.contrib.colorDetector",_.RECOMPUTE_TIME=1e3,_=p([f(1,m.Ui)],_),(0,a._K)(_.ID,_)},94789:(e,t,i)=>{i.d(t,{A:()=>n});var o=i(4669);class n{constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new o.Q5,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new o.Q5,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new o.Q5,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let e=0;e<this.colorPresentations.length;e++)if(t.toLowerCase()===this.colorPresentations[e].label){this.presentationIndex=e,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}},77862:(e,t,i)=>{i.d(t,{YW:()=>v});var o=i(16268),n=i(65321),s=i(57974),r=i(93794),l=i(41264),d=i(4669),a=i(9917),h=i(63580),c=i(73910),g=i(97781);const u=n.$;class m extends a.JT{constructor(e,t,i){super(),this.model=t,this.domNode=u(".colorpicker-header"),n.R3(e,this.domNode),this.pickedColorNode=n.R3(this.domNode,u(".picked-color"));const o=(0,h.N)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",o);const s=n.R3(this.domNode,u(".original-color"));s.style.backgroundColor=l.Il.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(c.yJx)||l.Il.white,this._register((0,g.Ic)((e,t)=>{this.backgroundColor=e.getColor(c.yJx)||l.Il.white})),this._register(n.nm(this.pickedColorNode,n.tw.CLICK,()=>this.model.selectNextColorPresentation())),this._register(n.nm(s,n.tw.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=l.Il.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=l.Il.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(u(".codicon.codicon-color-mode"))}}class p extends a.JT{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this.domNode=u(".colorpicker-body"),n.R3(e,this.domNode),this.saturationBox=new f(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new C(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new b(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new l.Il(new l.tx(i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new l.Il(new l.tx(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=360*(1-e);this.model.color=new l.Il(new l.tx(360===i?0:i,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class f extends a.JT{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new d.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new d.Q5,this.onColorFlushed=this._onColorFlushed.event,this.domNode=u(".saturation-wrap"),n.R3(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",n.R3(this.domNode,this.canvas),this.selection=u(".saturation-selection"),n.R3(this.domNode,this.selection),this.layout(),this._register(n.Lo(this.domNode,e=>this.onMouseDown(e))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new s.Z);const t=n.i(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,s.e,e=>this.onDidChangePosition(e.posx-t.left,e.posy-t.top),()=>null);const i=n.qV(document,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),o=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,o),this._onDidChange.fire({s:i,v:o})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new l.Il(new l.tx(e.h,1,1,1)),i=this.canvas.getContext("2d"),o=i.createLinearGradient(0,0,this.canvas.width,0);o.addColorStop(0,"rgba(255, 255, 255, 1)"),o.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),o.addColorStop(1,"rgba(255, 255, 255, 0)");const n=i.createLinearGradient(0,0,0,this.canvas.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this.canvas.width,this.canvas.height),i.fillStyle=l.Il.Format.CSS.format(t),i.fill(),i.fillStyle=o,i.fill(),i.fillStyle=n,i.fill()}paintSelection(e,t){this.selection.style.left=e*this.width+"px",this.selection.style.top=this.height-t*this.height+"px"}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class _ extends a.JT{constructor(e,t){super(),this.model=t,this._onDidChange=new d.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new d.Q5,this.onColorFlushed=this._onColorFlushed.event,this.domNode=n.R3(e,u(".strip")),this.overlay=n.R3(this.domNode,u(".overlay")),this.slider=n.R3(this.domNode,u(".slider")),this.slider.style.top="0px",this._register(n.Lo(this.domNode,e=>this.onMouseDown(e))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new s.Z),i=n.i(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,s.e,e=>this.onDidChangeTop(e.posy-i.top),()=>null);const o=n.qV(document,()=>{this._onColorFlushed.fire(),o.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=(1-e)*this.height+"px"}}class C extends _{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:i,b:o}=e.rgba,n=new l.Il(new l.VS(t,i,o,1)),s=new l.Il(new l.VS(t,i,o,0));this.overlay.style.background=`linear-gradient(to bottom, ${n} 0%, ${s} 100%)`}getValue(e){return e.hsva.a}}class b extends _{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class v extends r.${constructor(e,t,i,n){super(),this.model=t,this.pixelRatio=i,this._register((0,o.onDidChangeZoomLevel)(()=>this.layout()));const s=u(".colorpicker-widget");e.appendChild(s);const r=new m(s,this.model,n);this.body=new p(s,this.model,this.pixelRatio),this._register(r),this._register(this.body)}layout(){this.body.layout()}}},89098:(e,t,i)=>{i.r(t);var o=i(22258),n=i(16830),s=i(24314),r=i(29102),l=i(69386),d=i(50187),a=i(3860),h=i(83831);class c{constructor(e,t){this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const o=t.length;if(i+o>e.length)return!1;for(let n=0;n<o;n++){const o=e.charCodeAt(i+n),s=t.charCodeAt(n);if(o!==s&&!(o>=65&&o<=90&&o+32===s||s>=65&&s<=90&&s+32===o))return!1}return!0}_createOperationsForBlockComment(e,t,i,o,n,r){const l=e.startLineNumber,d=e.startColumn,a=e.endLineNumber,h=e.endColumn,g=n.getLineContent(l),u=n.getLineContent(a);let m,p=g.lastIndexOf(t,d-1+t.length),f=u.indexOf(i,h-1-i.length);if(-1!==p&&-1!==f)if(l===a){g.substring(p+t.length,f).indexOf(i)>=0&&(p=-1,f=-1)}else{const e=g.substring(p+t.length),o=u.substring(0,f);(e.indexOf(i)>=0||o.indexOf(i)>=0)&&(p=-1,f=-1)}-1!==p&&-1!==f?(o&&p+t.length<g.length&&32===g.charCodeAt(p+t.length)&&(t+=" "),o&&f>0&&32===u.charCodeAt(f-1)&&(i=" "+i,f-=1),m=c._createRemoveBlockCommentOperations(new s.e(l,p+t.length+1,a,f+1),t,i)):(m=c._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=1===m.length?i:null);for(const e of m)r.addTrackedEditOperation(e.range,e.text)}static _createRemoveBlockCommentOperations(e,t,i){let o=[];return s.e.isEmpty(e)?o.push(l.h.delete(new s.e(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(o.push(l.h.delete(new s.e(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),o.push(l.h.delete(new s.e(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),o}static _createAddBlockCommentOperations(e,t,i,o){let n=[];return s.e.isEmpty(e)?n.push(l.h.replace(new s.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(n.push(l.h.insert(new d.L(e.startLineNumber,e.startColumn),t+(o?" ":""))),n.push(l.h.insert(new d.L(e.endLineNumber,e.endColumn),(o?" ":"")+i))),n}getEditOperations(e,t){const i=this._selection.startLineNumber,o=this._selection.startColumn;e.tokenizeIfCheap(i);const n=e.getLanguageIdAtPosition(i,o),s=h.zu.getComments(n);s&&s.blockCommentStartToken&&s.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(2===i.length){const e=i[0],t=i[1];return new a.Y(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{const e=i[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new a.Y(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}}var g=i(97295);class u{constructor(e,t,i,o,n,s){this._selection=e,this._tabSize=t,this._type=i,this._insertSpace=o,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=n,this._ignoreFirstLine=s||!1}static _gatherPreflightCommentStrings(e,t,i){e.tokenizeIfCheap(t);const o=e.getLanguageIdAtPosition(t,1),n=h.zu.getComments(o),s=n?n.lineCommentToken:null;if(!s)return null;let r=[];for(let e=0,o=i-t+1;e<o;e++)r[e]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return r}static _analyzeLines(e,t,i,o,n,s,r){let l,d=!0;l=0===e||1!==e;for(let a=0,h=o.length;a<h;a++){const h=o[a],u=n+a;if(u===n&&r){h.ignore=!0;continue}const m=i.getLineContent(u),p=g.LC(m);if(-1!==p){if(d=!1,h.ignore=!1,h.commentStrOffset=p,l&&!c._haystackHasNeedleAtOffset(m,h.commentStr,p)&&(0===e?l=!1:1===e||(h.ignore=!0)),l&&t){const e=p+h.commentStrLength;e<m.length&&32===m.charCodeAt(e)&&(h.commentStrLength+=1)}}else h.ignore=s,h.commentStrOffset=m.length}if(0===e&&d){l=!1;for(let e=0,t=o.length;e<t;e++)o[e].ignore=!1}return{supported:!0,shouldRemoveComments:l,lines:o}}static _gatherPreflightData(e,t,i,o,n,s,r){const l=u._gatherPreflightCommentStrings(i,o,n);return null===l?{supported:!1}:u._analyzeLines(e,t,i,l,o,s,r)}_executeLineComments(e,t,i,o){let n;i.shouldRemoveComments?n=u._createRemoveLineCommentsOperations(i.lines,o.startLineNumber):(u._normalizeInsertionPoint(e,i.lines,o.startLineNumber,this._tabSize),n=this._createAddLineCommentsOperations(i.lines,o.startLineNumber));const r=new d.L(o.positionLineNumber,o.positionColumn);for(let i=0,o=n.length;i<o;i++)if(t.addEditOperation(n[i].range,n[i].text),s.e.isEmpty(n[i].range)&&s.e.getStartPosition(n[i].range).equals(r)){e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(n[i].text||"").length)}this._selectionId=t.trackSelection(o)}_attemptRemoveBlockComment(e,t,i,o){let n=t.startLineNumber,r=t.endLineNumber,l=o.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),d=e.getLineContent(n).lastIndexOf(i,l-1),a=e.getLineContent(r).indexOf(o,t.endColumn-1-i.length);return-1!==d&&-1===a&&(a=e.getLineContent(n).indexOf(o,d+i.length),r=n),-1===d&&-1!==a&&(d=e.getLineContent(r).lastIndexOf(i,a),n=r),!t.isEmpty()||-1!==d&&-1!==a||(d=e.getLineContent(n).indexOf(i),-1!==d&&(a=e.getLineContent(n).indexOf(o,d+i.length))),-1!==d&&32===e.getLineContent(n).charCodeAt(d+i.length)&&(i+=" "),-1!==a&&32===e.getLineContent(r).charCodeAt(a-1)&&(o=" "+o,a-=1),-1!==d&&-1!==a?c._createRemoveBlockCommentOperations(new s.e(n,d+i.length+1,r,a+1),i,o):null}_executeBlockComment(e,t,i){e.tokenizeIfCheap(i.startLineNumber);let o=e.getLanguageIdAtPosition(i.startLineNumber,1),n=h.zu.getComments(o);if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;const r=n.blockCommentStartToken,l=n.blockCommentEndToken;let d=this._attemptRemoveBlockComment(e,i,r,l);if(!d){if(i.isEmpty()){const t=e.getLineContent(i.startLineNumber);let o=g.LC(t);-1===o&&(o=t.length),d=c._createAddBlockCommentOperations(new s.e(i.startLineNumber,o+1,i.startLineNumber,t.length+1),r,l,this._insertSpace)}else d=c._createAddBlockCommentOperations(new s.e(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,l,this._insertSpace);1===d.length&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(i);for(const e of d)t.addEditOperation(e.range,e.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine)return t.addEditOperation(new s.e(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=t.trackSelection(i));i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const o=u._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return o.supported?this._executeLineComments(e,t,o,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new a.Y(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let i=[];for(let o=0,n=e.length;o<n;o++){const n=e[o];n.ignore||i.push(l.h.delete(new s.e(t+o,n.commentStrOffset+1,t+o,n.commentStrOffset+n.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){let i=[];const o=this._insertSpace?" ":"";for(let n=0,s=e.length;n<s;n++){const s=e[n];s.ignore||i.push(l.h.insert(new d.L(t+n,s.commentStrOffset+1),s.commentStr+o))}return i}static nextVisibleColumn(e,t,i,o){return i?e+(t-e%t):e+o}static _normalizeInsertionPoint(e,t,i,o){let n,s,r=1073741824;for(let n=0,s=t.length;n<s;n++){if(t[n].ignore)continue;const s=e.getLineContent(i+n);let l=0;for(let e=0,i=t[n].commentStrOffset;l<r&&e<i;e++)l=u.nextVisibleColumn(l,o,9===s.charCodeAt(e),1);l<r&&(r=l)}r=Math.floor(r/o)*o;for(let l=0,d=t.length;l<d;l++){if(t[l].ignore)continue;const d=e.getLineContent(i+l);let a=0;for(n=0,s=t[l].commentStrOffset;a<r&&n<s;n++)a=u.nextVisibleColumn(a,o,9===d.charCodeAt(n),1);t[l].commentStrOffset=a>r?n-1:n}}}var m=i(63580),p=i(84144);class f extends n.R6{constructor(e,t){super(t),this._type=e}run(e,t){if(!t.hasModel())return;const i=[],o=t.getModel().getOptions(),n=t.getOption(19),r=t.getSelections().map((e,t)=>({selection:e,index:t,ignoreFirstLine:!1}));r.sort((e,t)=>s.e.compareRangesUsingStarts(e.selection,t.selection));let l=r[0];for(let e=1;e<r.length;e++){const t=r[e];l.selection.endLineNumber===t.selection.startLineNumber&&(l.index<t.index?t.ignoreFirstLine=!0:(l.ignoreFirstLine=!0,l=t))}for(const e of r)i.push(new u(e.selection,o.tabSize,this._type,n.insertSpace,n.ignoreEmptyLines,e.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class _ extends n.R6{constructor(){super({id:"editor.action.blockComment",label:m.N("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:r.u.writable,kbOpts:{kbExpr:r.u.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:p.eH.MenubarEditMenu,group:"5_insert",title:m.N({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){if(!t.hasModel())return;const i=t.getOption(19),o=[],n=t.getSelections();for(const e of n)o.push(new c(e,i.insertSpace));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}(0,n.Qr)(class extends f{constructor(){super(0,{id:"editor.action.commentLine",label:m.N("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:r.u.writable,kbOpts:{kbExpr:r.u.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:p.eH.MenubarEditMenu,group:"5_insert",title:m.N({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}),(0,n.Qr)(class extends f{constructor(){super(1,{id:"editor.action.addCommentLine",label:m.N("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:r.u.writable,kbOpts:{kbExpr:r.u.editorTextFocus,primary:(0,o.gx)(2089,2081),weight:100}})}}),(0,n.Qr)(class extends f{constructor(){super(2,{id:"editor.action.removeCommentLine",label:m.N("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:r.u.writable,kbOpts:{kbExpr:r.u.editorTextFocus,primary:(0,o.gx)(2089,2099),weight:100}})}}),(0,n.Qr)(_)},62943:(e,t,i)=>{i.r(t),i.d(t,{FoldingController:()=>Z,editorFoldForeground:()=>J,foldBackgroundBackground:()=>Y});var o=i(15393),n=i(17301),s=i(22258),r=i(9917),l=i(97295),d=i(98401),a=i(39925),h=i(16830),c=i(29102),g=i(44101),u=i(83831),m=i(4669);class p{constructor(e,t,i){if(e.length!==t.length||e.length>65535)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(t,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=t&&this.getEndLineNumber(o)>=i};for(let i=0,o=this._startIndexes.length;i<o;i++){let o=this._startIndexes[i],n=this._endIndexes[i];if(o>16777215||n>16777215)throw new Error("startLineNumber or endLineNumber must not exceed 16777215");for(;e.length>0&&!t(o,n);)e.pop();let s=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=o+((255&s)<<24),this._endIndexes[i]=n+((65280&s)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return 16777215&this._startIndexes[e]}getEndLineNumber(e){return 16777215&this._endIndexes[e]}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,i=e%32;return 0!=(this._collapseStates[t]&1<<i)}setCollapsed(e,t){let i=e/32|0,o=e%32,n=this._collapseStates[i];this._collapseStates[i]=t?n|1<<o:n&~(1<<o)}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let o=0;o<this._types.length;o++)this._types[o]===e&&(this.setCollapsed(o,t),i=!0);return i}toRegion(e){return new f(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((4278190080&this._startIndexes[e])>>>24)+((4278190080&this._endIndexes[e])>>>16);return 65535===t?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(0===i)return-1;for(;t<i;){let o=Math.floor((t+i)/2);e<this.getStartLineNumber(o)?i=o:t=o+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);-1!==t;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class f{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class _{constructor(e,t){this._updateEventEmitter=new m.Q5,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new p(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((e,t)=>e.regionIndex-t.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let o=0,n=-1,s=-1;const r=e=>{for(;o<e;){const e=this._regions.getEndLineNumber(o),t=this._regions.isCollapsed(o);e<=n&&i.changeDecorationOptions(this._editorDecorationIds[o],this._decorationProvider.getDecorationOption(t,e<=s)),t&&e>s&&(s=e),o++}};for(let i of e){let e=i.regionIndex,o=this._editorDecorationIds[e];if(o&&!t[o]){t[o]=!0,r(e);let i=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,i),n=Math.max(n,this._regions.getEndLineNumber(e))}}r(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let i=[],o=-1,n=(n,s)=>{const r=e.getStartLineNumber(n),l=e.getEndLineNumber(n);s||(s=e.isCollapsed(n)),s&&((e,i)=>{for(let o of t)if(e<o&&o<=i)return!0;return!1})(r,l)&&(s=!1),e.setCollapsed(n,s);const d=this._textModel.getLineMaxColumn(r),a={startLineNumber:r,startColumn:Math.max(d-1,1),endLineNumber:r,endColumn:d};i.push({range:a,options:this._decorationProvider.getDecorationOption(s,l<=o)}),s&&l>o&&(o=l)},s=0,r=()=>{for(;s<this._regions.length;){let e=this._regions.isCollapsed(s);if(s++,e)return s-1}return-1},l=0,d=r();for(;-1!==d&&l<e.length;){let t=this._textModel.getDecorationRange(this._editorDecorationIds[d]);if(t){let i=t.startLineNumber;if(t.startColumn===Math.max(t.endColumn-1,1)&&this._textModel.getLineMaxColumn(i)===t.endColumn)for(;l<e.length;){let t=e.getStartLineNumber(l);if(!(i>=t))break;n(l,i===t),l++}}d=r()}for(;l<e.length;)n(l,!1),l++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let i=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(i){let o=i.startLineNumber,n=i.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:o,endLineNumber:n})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let i of e){let e=this.getRegionAtLine(i.startLineNumber);e&&!e.isCollapsed&&t.push(e)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let i=[];if(this._regions){let o=this._regions.findRange(e),n=1;for(;o>=0;){let e=this._regions.toRegion(o);t&&!t(e,n)||i.push(e),n++,o=e.parentIndex}}return i}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let i=[],o=e?e.regionIndex+1:0,n=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length){const e=[];for(let s=o,r=this._regions.length;s<r;s++){let o=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<n))break;for(;e.length>0&&!o.containedBy(e[e.length-1]);)e.pop();e.push(o),t(o,e.length)&&i.push(o)}}else for(let e=o,s=this._regions.length;e<s;e++){let o=this._regions.toRegion(e);if(!(this._regions.getStartLineNumber(e)<n))break;t&&!t(o)||i.push(o)}return i}}function C(e,t,i=Number.MAX_VALUE,o){let n=[];if(o&&o.length>0)for(let s of o){let o=e.getRegionAtLine(s);if(o&&(o.isCollapsed!==t&&n.push(o),i>1)){let s=e.getRegionsInside(o,(e,o)=>e.isCollapsed!==t&&o<i);n.push(...s)}}else{let o=e.getRegionsInside(null,(e,o)=>e.isCollapsed!==t&&o<i);n.push(...o)}e.toggleCollapseState(n)}function b(e,t,i,o){let n=[];for(let s of o){let o=e.getAllRegionsAtLine(s,(e,o)=>e.isCollapsed!==t&&o<=i);n.push(...o)}e.toggleCollapseState(n)}function v(e,t,i){let o=[];for(let t of i)o.push(e.getAllRegionsAtLine(t,void 0)[0]);let n=e.getRegionsInside(null,e=>o.every(t=>!t.containedBy(e)&&!e.containedBy(t))&&e.isCollapsed!==t);e.toggleCollapseState(n)}function L(e,t,i){let o=e.textModel,n=e.regions,s=[];for(let e=n.length-1;e>=0;e--)if(i!==n.isCollapsed(e)){let i=n.getStartLineNumber(e);t.test(o.getLineContent(i))&&s.push(n.toRegion(e))}e.toggleCollapseState(s)}function y(e,t,i){let o=e.regions,n=[];for(let e=o.length-1;e>=0;e--)i!==o.isCollapsed(e)&&t===o.getType(e)&&n.push(o.toRegion(e));e.toggleCollapseState(n)}var N=i(9488),w=i(24314),x=i(58409);class A{constructor(e){this._updateEventEmitter=new m.Q5,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(e=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(e=>e.range.endLineNumber!==e.range.startLineNumber||0!==(0,x.QZ)(e.text)[0]))}updateHiddenRanges(){let e=!1,t=[],i=0,o=0,n=Number.MAX_VALUE,s=-1,r=this._foldingModel.regions;for(;i<r.length;i++){if(!r.isCollapsed(i))continue;let l=r.getStartLineNumber(i)+1,d=r.getEndLineNumber(i);n<=l&&d<=s||(!e&&o<this._hiddenRanges.length&&this._hiddenRanges[o].startLineNumber===l&&this._hiddenRanges[o].endLineNumber===d?(t.push(this._hiddenRanges[o]),o++):(e=!0,t.push(new w.e(l,1,d,1))),n=l,s=d)}(this._hasLineChanges||e||o<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||0===e.length)return!1;let t=[];for(let i of e){if(!i.startLineNumber||!i.endLineNumber)return!1;t.push(new w.e(i.startLineNumber+1,1,i.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return null!==S(this._hiddenRanges,e)}adjustSelections(e){let t=!1,i=this._foldingModel.textModel,o=null,n=e=>(o&&function(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}(e,o)||(o=S(this._hiddenRanges,e)),o?o.startLineNumber-1:null);for(let o=0,s=e.length;o<s;o++){let s=e[o],r=n(s.startLineNumber);r&&(s=s.setStartPosition(r,i.getLineMaxColumn(r)),t=!0);let l=n(s.endLineNumber);l&&(s=s.setEndPosition(l,i.getLineMaxColumn(l)),t=!0),e[o]=s}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function S(e,t){let i=(0,N.lG)(e,e=>t<e.startLineNumber)-1;return i>=0&&e[i].endLineNumber>=t?e[i]:null}var D=i(75425);class I{constructor(e){this.editorModel=e,this.id="indent"}dispose(){}compute(e){let t=u.zu.getFoldingRules(this.editorModel.getLanguageId()),i=t&&!!t.offSide,o=t&&t.markers;return Promise.resolve(function(e,t,i,o=5e3){const n=e.getOptions().tabSize;let s=new k(o),r=void 0;i&&(r=new RegExp(`(${i.start.source})|(?:${i.end.source})`));let l=[],d=e.getLineCount()+1;l.push({indent:-1,endAbove:d,line:d});for(let i=e.getLineCount();i>0;i--){let o,d=e.getLineContent(i),a=D.yO.computeIndentLevel(d,n),h=l[l.length-1];if(-1!==a){if(r&&(o=d.match(r))){if(!o[1]){l.push({indent:-2,endAbove:i,line:i});continue}{let e=l.length-1;for(;e>0&&-2!==l[e].indent;)e--;if(e>0){l.length=e+1,h=l[e],s.insertFirst(i,h.line,a),h.line=i,h.indent=a,h.endAbove=i;continue}}}if(h.indent>a){do{l.pop(),h=l[l.length-1]}while(h.indent>a);let e=h.endAbove-1;e-i>=1&&s.insertFirst(i,e,a)}h.indent===a?h.endAbove=i:l.push({indent:a,endAbove:i,line:i})}else t&&(h.endAbove=i)}return s.toIndentRanges(e)}(this.editorModel,i,o))}}class k{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>16777215||t>16777215)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=this._length-1,o=0;i>=0;i--,o++)e[o]=this._startIndexes[i],t[o]=this._endIndexes[i];return new p(e,t)}{let t=0,i=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){let o=this._indentOccurrences[e];if(o){if(o+t>this._foldingRangesLimit){i=e;break}t+=o}}const o=e.getOptions().tabSize;let n=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit);for(let r=this._length-1,l=0;r>=0;r--){let d=this._startIndexes[r],a=e.getLineContent(d),h=D.yO.computeIndentLevel(a,o);(h<i||h===i&&t++<this._foldingRangesLimit)&&(n[l]=d,s[l]=this._endIndexes[r],l++)}return new p(n,s)}}}const M={};class P{constructor(e,t,i,o=5e3){this.editorModel=e,this.providers=t,this.limit=o,this.id="syntax";for(const e of t)"function"==typeof e.onDidChange&&(this.disposables||(this.disposables=new r.SL),this.disposables.add(e.onDidChange(i)))}compute(e){return function(e,t,i){let o=null,s=e.map((e,s)=>Promise.resolve(e.provideFoldingRanges(t,M,i)).then(e=>{if(!i.isCancellationRequested&&Array.isArray(e)){Array.isArray(o)||(o=[]);let i=t.getLineCount();for(let t of e)t.start>0&&t.end>t.start&&t.end<=i&&o.push({start:t.start,end:t.end,rank:s,kind:t.kind})}},n.Cp));return Promise.all(s).then(e=>o)}(this.providers,this.editorModel,e).then(e=>{if(e){return E(e,this.limit)}return null})}dispose(){var e;null===(e=this.disposables)||void 0===e||e.dispose()}}class R{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,o){if(e>16777215||t>16777215)return;let n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._nestingLevels[n]=o,this._types[n]=i,this._length++,o<30&&(this._nestingLevelCounts[o]=(this._nestingLevelCounts[o]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=0;i<this._length;i++)e[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new p(e,t,this._types)}{let e=0,t=this._nestingLevelCounts.length;for(let i=0;i<this._nestingLevelCounts.length;i++){let o=this._nestingLevelCounts[i];if(o){if(o+e>this._foldingRangesLimit){t=i;break}e+=o}}let i=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit),n=[];for(let s=0,r=0;s<this._length;s++){let l=this._nestingLevels[s];(l<t||l===t&&e++<this._foldingRangesLimit)&&(i[r]=this._startIndexes[s],o[r]=this._endIndexes[s],n[r]=this._types[s],r++)}return new p(i,o,n)}}}function E(e,t){let i=e.sort((e,t)=>{let i=e.start-t.start;return 0===i&&(i=e.rank-t.rank),i}),o=new R(t),n=void 0,s=[];for(let e of i)if(n){if(e.start>n.start)if(e.end<=n.end)s.push(n),n=e,o.add(e.start,e.end,e.kind&&e.kind.value,s.length);else{if(e.start>n.end){do{n=s.pop()}while(n&&e.start>n.end);n&&s.push(n),n=e}o.add(e.start,e.end,e.kind&&e.kind.value,s.length)}}else n=e,o.add(e.start,e.end,e.kind&&e.kind.value,s.length);return o.toIndentRanges()}class O{constructor(e,t,i,o){if(this.editorModel=e,this.id="init",t.length){let n=t=>({range:{startLineNumber:t.startLineNumber,startColumn:0,endLineNumber:t.endLineNumber,endColumn:e.getLineLength(t.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(n)),this.timeout=setTimeout(i,o)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),"number"==typeof this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let e of this.decorationIds){let i=this.editorModel.getDecorationRange(e);i&&t.push({start:i.startLineNumber,end:i.endLineNumber,rank:1})}return Promise.resolve(E(t,Number.MAX_VALUE))}}var T=i(63580),F=i(38819),H=i(73910),V=i(97781),U=i(73046),B=i(59554);const W=(0,B.q5)("folding-expanded",U.lA.chevronDown,(0,T.N)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),z=(0,B.q5)("folding-collapsed",U.lA.chevronRight,(0,T.N)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class j{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?j.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?j.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:j.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?j.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:j.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}j.COLLAPSED_VISUAL_DECORATION=D.qx.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:V.kS.asClassName(z)}),j.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=D.qx.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:V.kS.asClassName(z)}),j.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=D.qx.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:V.kS.asClassName(W)}),j.EXPANDED_VISUAL_DECORATION=D.qx.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+V.kS.asClassName(W)}),j.HIDDEN_RANGE_DECORATION=D.qx.register({description:"folding-hidden-range-decoration",stickiness:1});var Q=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},$=function(e,t){return function(i,o){t(i,o,e)}};const K=new F.uy("foldingEnabled",!1);let Z=class e extends r.JT{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new r.SL),this.editor=e;const i=this.editor.getOptions();this._isEnabled=i.get(37),this._useFoldingProviders="indentation"!==i.get(38),this._unfoldOnClickAfterEndOfLine=i.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=i.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new j(e),this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===i.get(98),this.foldingDecorationProvider.showFoldingHighlights=i.get(39),this.foldingEnabled=K.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(e=>{if(e.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(98)||e.hasChanged(39)){const e=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===e.get(98),this.foldingDecorationProvider.showFoldingHighlights=e.get(39),this.triggerFoldingModelChanged()}e.hasChanged(38)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(38),this.onFoldingStrategyChanged()),e.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),e.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(t){return t.getContribution(e.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)return;if(!e||e.lineCount!==t.getLineCount())return;if(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions)return;"syntax"!==e.provider&&"init"!==e.provider||(this.foldingStateMemento=e);const i=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(i)){const e=this.getFoldingModel();e&&e.then(e=>{if(e){this._restoringViewState=!0;try{e.applyMemento(i)}finally{this._restoringViewState=!1}}}).then(void 0,n.dL)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();this._isEnabled&&e&&!e.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new _(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new A(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(e=>this.onHiddenRangesChanges(e))),this.updateScheduler=new o.vp(200),this.cursorChangedScheduler=new o.pY(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(g.aC.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(e=>this.onDidChangeModelContent(e))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(e=>this.onEditorMouseDown(e))),this.localToDispose.add(this.editor.onMouseUp(e=>this.onEditorMouseUp(e))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new I(e),this._useFoldingProviders&&this.foldingModel){let t=g.aC.ordered(this.foldingModel.textModel);if(0===t.length&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions){return this.rangeProvider=new O(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4)}t.length>0&&(this.rangeProvider=new P(e,t,()=>this.triggerFoldingModelChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;null===(t=this.hiddenRangeModel)||void 0===t||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let i=this.foldingRegionPromise=(0,o.PG)(e=>t.compute(e));return i.then(t=>{if(t&&i===this.foldingRegionPromise){let i;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const e=t.setCollapsedAllOfType(g.AD.Imports.value,!0);e&&(i=a.ZF.capture(this.editor),this._currentModelHasFoldedImports=e)}let o=this.editor.getSelections(),n=o?o.map(e=>e.startLineNumber):[];e.update(t,n),i&&i.restore(this.editor)}return e})}).then(void 0,e=>((0,n.dL)(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(e=>{if(e){let t=this.editor.getSelections();if(t&&t.length>0){let i=[];for(let o of t){let t=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(t)&&i.push(...e.getAllRegionsAtLine(t,e=>e.isCollapsed&&t>e.startLineNumber))}i.length&&(e.toggleCollapseState(i),this.reveal(t[0].getPosition()))}}}).then(void 0,n.dL)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range)return;if(!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:const o=e.target.detail,n=e.target.element.offsetLeft;if(o.offsetX-n<5)return;i=!0;break;case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){if(!e.target.detail.isAfterLines)break}return;case 6:if(this.hiddenRangeModel.hasRanges()){let e=this.editor.getModel();if(e&&t.startColumn===e.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let i=this.mouseDownInfo.lineNumber,o=this.mouseDownInfo.iconClicked,s=e.target.range;if(s&&s.startLineNumber===i){if(o){if(4!==e.target.type)return}else{let e=this.editor.getModel();if(!e||s.startColumn!==e.getLineMaxColumn(i))return}t.then(t=>{if(t){let n=t.getRegionAtLine(i);if(n&&n.startLineNumber===i){let s=n.isCollapsed;if(o||s){let o=[];if(e.event.altKey){let e=e=>!e.containedBy(n)&&!n.containedBy(e),i=t.getRegionsInside(null,e);for(const e of i)e.isCollapsed&&o.push(e);0===o.length&&(o=i)}else{let i=e.event.middleButton||e.event.shiftKey;if(i)for(const e of t.getRegionsInside(n))e.isCollapsed===s&&o.push(e);!s&&i&&0!==o.length||o.push(n)}t.toggleCollapseState(o),this.reveal({lineNumber:i,column:1})}}}}).then(void 0,n.dL)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};Z.ID="editor.contrib.folding",Z=Q([$(1,F.i6)],Z);class q extends h.R6{runEditorCommand(e,t,i){let o=Z.get(t);if(!o)return;let n=o.getFoldingModel();return n?(this.reportTelemetry(e,t),n.then(e=>{if(e){this.invoke(o,e,t,i);const n=t.getSelection();n&&o.reveal(n.getStartPosition())}})):void 0}getSelectedLines(e){let t=e.getSelections();return t?t.map(e=>e.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(e=>e+1):this.getSelectedLines(t)}run(e,t){}}function G(e){if(!d.o8(e)){if(!d.Kn(e))return!1;const t=e;if(!d.o8(t.levels)&&!d.hj(t.levels))return!1;if(!d.o8(t.direction)&&!d.HD(t.direction))return!1;if(!(d.o8(t.selectionLines)||d.kJ(t.selectionLines)&&t.selectionLines.every(d.hj)))return!1}return!0}class X extends q{getFoldingLevel(){return parseInt(this.id.substr(X.ID_PREFIX.length))}invoke(e,t,i){!function(e,t,i,o){let n=e.getRegionsInside(null,(e,n)=>n===t&&e.isCollapsed!==i&&!o.some(t=>e.containsLine(t)));e.toggleCollapseState(n)}(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}X.ID_PREFIX="editor.foldLevel",X.ID=e=>X.ID_PREFIX+e;(0,h._K)(Z.ID,Z),(0,h.Qr)(class extends q{constructor(){super({id:"editor.unfold",label:T.N("unfoldAction.label","Unfold"),alias:"Unfold",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:G,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,o){let n=o&&o.levels||1,s=this.getLineNumbers(o,i);o&&"up"===o.direction?b(t,!1,n,s):C(t,!1,n,s)}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.unfoldRecursively",label:T.N("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2137),weight:100}})}invoke(e,t,i,o){C(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.fold",label:T.N("foldAction.label","Fold"),alias:"Fold",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:G,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,o){let n=this.getLineNumbers(o,i);const s=o&&o.levels,r=o&&o.direction;"number"!=typeof s&&"string"!=typeof r?function(e,t,i){let o=[];for(let n of i){let i=e.getAllRegionsAtLine(n,e=>e.isCollapsed!==t);i.length>0&&o.push(i[0])}e.toggleCollapseState(o)}(t,!0,n):"up"===r?b(t,!0,s||1,n):C(t,!0,s||1,n)}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.foldRecursively",label:T.N("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2135),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);C(t,!0,Number.MAX_VALUE,o)}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.foldAll",label:T.N("foldAllAction.label","Fold All"),alias:"Fold All",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2069),weight:100}})}invoke(e,t,i){C(t,!0)}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.unfoldAll",label:T.N("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2088),weight:100}})}invoke(e,t,i){C(t,!1)}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.foldAllBlockComments",label:T.N("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2133),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())y(t,g.AD.Comment.value,!0);else{const e=i.getModel();if(!e)return;const o=u.zu.getComments(e.getLanguageId());if(o&&o.blockCommentStartToken){L(t,new RegExp("^\\s*"+(0,l.ec)(o.blockCommentStartToken)),!0)}}}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.foldAllMarkerRegions",label:T.N("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2077),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())y(t,g.AD.Region.value,!0);else{const e=i.getModel();if(!e)return;const o=u.zu.getFoldingRules(e.getLanguageId());if(o&&o.markers&&o.markers.start){L(t,new RegExp(o.markers.start),!0)}}}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:T.N("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2078),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())y(t,g.AD.Region.value,!1);else{const e=i.getModel();if(!e)return;const o=u.zu.getFoldingRules(e.getLanguageId());if(o&&o.markers&&o.markers.start){L(t,new RegExp(o.markers.start),!1)}}}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.foldAllExcept",label:T.N("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2131),weight:100}})}invoke(e,t,i){v(t,!0,this.getSelectedLines(i))}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.unfoldAllExcept",label:T.N("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2129),weight:100}})}invoke(e,t,i){v(t,!1,this.getSelectedLines(i))}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.toggleFold",label:T.N("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2090),weight:100}})}invoke(e,t,i){!function(e,t,i){let o=[];for(let n of i){let i=e.getRegionAtLine(n);if(i){const n=!i.isCollapsed;if(o.push(i),t>1){let s=e.getRegionsInside(i,(e,i)=>e.isCollapsed!==n&&i<t);o.push(...s)}}}e.toggleCollapseState(o)}(t,1,this.getSelectedLines(i))}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.gotoParentFold",label:T.N("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=function(e,t){let i=null,o=t.getRegionAtLine(e);if(null!==o&&(i=o.startLineNumber,e===i)){let e=o.parentIndex;i=-1!==e?t.regions.getStartLineNumber(e):null}return i}(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.gotoPreviousFold",label:T.N("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=function(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){if(e!==i.startLineNumber)return i.startLineNumber;{let e=i.parentIndex,o=0;for(-1!==e&&(o=t.regions.getStartLineNumber(i.parentIndex));null!==i;){if(!(i.regionIndex>0))return null;if(i=t.regions.toRegion(i.regionIndex-1),i.startLineNumber<=o)return null;if(i.parentIndex===e)return i.startLineNumber}}}else if(t.regions.length>0)for(i=t.regions.toRegion(t.regions.length-1);null!==i;){if(i.startLineNumber<e)return i.startLineNumber;i=i.regionIndex>0?t.regions.toRegion(i.regionIndex-1):null}return null}(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}),(0,h.Qr)(class extends q{constructor(){super({id:"editor.gotoNextFold",label:T.N("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=function(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){let e=i.parentIndex,o=0;if(-1!==e)o=t.regions.getEndLineNumber(i.parentIndex);else{if(0===t.regions.length)return null;o=t.regions.getEndLineNumber(t.regions.length-1)}for(;null!==i;){if(!(i.regionIndex<t.regions.length))return null;if(i=t.regions.toRegion(i.regionIndex+1),i.startLineNumber>=o)return null;if(i.parentIndex===e)return i.startLineNumber}}else if(t.regions.length>0)for(i=t.regions.toRegion(0);null!==i;){if(i.startLineNumber>e)return i.startLineNumber;i=i.regionIndex<t.regions.length?t.regions.toRegion(i.regionIndex+1):null}return null}(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}});for(let e=1;e<=7;e++)(0,h.QG)(new X({id:X.ID(e),label:T.N("foldLevelAction.label","Fold Level {0}",e),alias:"Fold Level "+e,precondition:K,kbOpts:{kbExpr:c.u.editorTextFocus,primary:(0,s.gx)(2089,2048|21+e),weight:100}}));const Y=(0,H.P6G)("editor.foldBackground",{light:(0,H.ZnX)(H.hEj,.3),dark:(0,H.ZnX)(H.hEj,.3),hc:null},T.N("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),J=(0,H.P6G)("editorGutter.foldingControlForeground",{dark:H.XZx,light:H.XZx,hc:H.XZx},T.N("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));(0,V.Ic)((e,t)=>{const i=e.getColor(Y);i&&t.addRule(`.monaco-editor .folded-background { background-color: ${i}; }`);const o=e.getColor(J);o&&t.addRule(`\n\t\t.monaco-editor .cldr${V.kS.asCSSSelector(W)},\n\t\t.monaco-editor .cldr${V.kS.asCSSSelector(z)} {\n\t\t\tcolor: ${o} !important;\n\t\t}\n\t\t`)})}}]);